{"test_class": {"identifier": "ResponseMapperTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Mock\n    Cursor mockCursor;", "modifier": "@Mock", "type": "Cursor", "declarator": "mockCursor", "var_name": "mockCursor"}, {"original_string": "private final ResponseMapper mapper = new ResponseMapper();", "modifier": "private final", "type": "ResponseMapper", "declarator": "mapper = new ResponseMapper()", "var_name": "mapper"}], "file": "data/src/test/java/org/akvo/flow/data/entity/ResponseMapperTest.java"}, "test_case": {"identifier": "mapIdIterationShouldParseCorrectlyCorrectIterationInvalid", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void mapIdIterationShouldParseCorrectlyCorrectIterationInvalid() {\n        when(mockCursor.getString(0)).thenReturn(\"abc\");\n        when(mockCursor.getInt(1)).thenReturn(-1);\n\n        Pair<String, Integer> mapped = mapper.mapIdIteration(mockCursor);\n\n        assertEquals(\"abc\", mapped.first);\n        assertEquals(0, mapped.second.intValue());\n    }", "signature": "void mapIdIterationShouldParseCorrectlyCorrectIterationInvalid()", "full_signature": "@Test public void mapIdIterationShouldParseCorrectlyCorrectIterationInvalid()", "class_method_signature": "ResponseMapperTest.mapIdIterationShouldParseCorrectlyCorrectIterationInvalid()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "getString", "thenReturn", "when", "getInt", "mapIdIteration", "assertEquals", "assertEquals", "intValue"]}, "focal_class": {"identifier": "ResponseMapper", "superclass": "", "interfaces": "", "fields": [], "methods": [{"identifier": "ResponseMapper", "parameters": "()", "modifiers": "@Inject public", "return": "", "signature": " ResponseMapper()", "full_signature": "@Inject public  ResponseMapper()", "class_method_signature": "ResponseMapper.ResponseMapper()", "testcase": false, "constructor": true}, {"identifier": "extractResponse", "parameters": "(Cursor data, String value)", "modifiers": "@NonNull", "return": "Response", "signature": "Response extractResponse(Cursor data, String value)", "full_signature": "@NonNull Response extractResponse(Cursor data, String value)", "class_method_signature": "ResponseMapper.extractResponse(Cursor data, String value)", "testcase": false, "constructor": false}, {"identifier": "getAnswerType", "parameters": "(Cursor data)", "modifiers": "private", "return": "String", "signature": "String getAnswerType(Cursor data)", "full_signature": "private String getAnswerType(Cursor data)", "class_method_signature": "ResponseMapper.getAnswerType(Cursor data)", "testcase": false, "constructor": false}, {"identifier": "mapIdIteration", "parameters": "(Cursor data)", "modifiers": "@VisibleForTesting", "return": "Pair<String, Integer>", "signature": "Pair<String, Integer> mapIdIteration(Cursor data)", "full_signature": "@VisibleForTesting Pair<String, Integer> mapIdIteration(Cursor data)", "class_method_signature": "ResponseMapper.mapIdIteration(Cursor data)", "testcase": false, "constructor": false}], "file": "data/src/main/java/org/akvo/flow/data/entity/ResponseMapper.java"}, "focal_method": {"identifier": "mapIdIteration", "parameters": "(Cursor data)", "modifiers": "@VisibleForTesting", "return": "Pair<String, Integer>", "body": "@VisibleForTesting\n    Pair<String, Integer> mapIdIteration(Cursor data) {\n        int questionIdColumn = data.getColumnIndexOrThrow(ResponseColumns.QUESTION_ID);\n        int iterationColumn = data.getColumnIndexOrThrow(ResponseColumns.ITERATION);\n        String rawQuestionId = data.getString(questionIdColumn);\n        int iteration = data.getInt(iterationColumn);\n        String[] tokens = rawQuestionId.split(\"\\\\|\", -1);\n        if (tokens.length == 2) {\n            // This is a compound ID from a repeatable question\n            rawQuestionId = tokens[0];\n            iteration = Integer.parseInt(tokens[1]);\n        }\n        iteration = Math.max(iteration, 0);\n        return new Pair<>(rawQuestionId, iteration);\n    }", "signature": "Pair<String, Integer> mapIdIteration(Cursor data)", "full_signature": "@VisibleForTesting Pair<String, Integer> mapIdIteration(Cursor data)", "class_method_signature": "ResponseMapper.mapIdIteration(Cursor data)", "testcase": false, "constructor": false, "invocations": ["getColumnIndexOrThrow", "getColumnIndexOrThrow", "getString", "getInt", "split", "parseInt", "max"]}, "repository": {"repo_id": 5380818, "url": "https://github.com/akvo/akvo-flow-mobile", "stars": 15, "created": "8/11/2012 3:36:16 PM +00:00", "updates": "2020-01-20T15:04:47+00:00", "fork": "False", "license": "licensed"}}