{"test_class": {"identifier": "RuntimeResourceManagerTest", "superclass": "", "interfaces": "", "fields": [], "file": "core-project/asakusa-runtime/src/test/java/com/asakusafw/runtime/flow/RuntimeResourceManagerTest.java"}, "test_case": {"identifier": "setup_multi", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void setup_multi() throws Exception {\n        AtomicInteger passed = new AtomicInteger();\n        Configuration conf = new Configuration();\n        conf.set(\"test\", \"OK\");\n        RuntimeResourceManager manager = new RuntimeResourceManager(conf) {\n            @Override\n            protected List<RuntimeResource> load() throws IOException {\n                RuntimeResource adapter = new RuntimeResource() {\n                    @Override\n                    public void setup(ResourceConfiguration configuration) {\n                        passed.addAndGet(1);\n                        assertThat(configuration.get(\"test\", null), is(\"OK\"));\n                    }\n                };\n                return Arrays.asList(adapter, adapter, adapter);\n            }\n        };\n        manager.setup();\n        assertThat(passed.get(), is(3));\n    }", "signature": "void setup_multi()", "full_signature": "@Test public void setup_multi()", "class_method_signature": "RuntimeResourceManagerTest.setup_multi()", "testcase": true, "constructor": false, "invocations": ["set", "addAndGet", "assertThat", "get", "is", "asList", "setup", "assertThat", "get", "is"]}, "focal_class": {"identifier": "RuntimeResourceManager", "superclass": "extends Configured", "interfaces": "", "fields": [{"original_string": "static final Log LOG = LogFactory.getLog(RuntimeResourceManager.class);", "modifier": "static final", "type": "Log", "declarator": "LOG = LogFactory.getLog(RuntimeResourceManager.class)", "var_name": "LOG"}, {"original_string": "public static final String CONFIGURATION_FILE_NAME = \"asakusa-resources.xml\";", "modifier": "public static final", "type": "String", "declarator": "CONFIGURATION_FILE_NAME = \"asakusa-resources.xml\"", "var_name": "CONFIGURATION_FILE_NAME"}, {"original_string": "public static final String CONFIGURATION_FILE_PATH = \"core/conf/\" + CONFIGURATION_FILE_NAME;", "modifier": "public static final", "type": "String", "declarator": "CONFIGURATION_FILE_PATH = \"core/conf/\" + CONFIGURATION_FILE_NAME", "var_name": "CONFIGURATION_FILE_PATH"}, {"original_string": "private final HadoopConfiguration configuration;", "modifier": "private final", "type": "HadoopConfiguration", "declarator": "configuration", "var_name": "configuration"}, {"original_string": "private List<RuntimeResource> resources;", "modifier": "private", "type": "List<RuntimeResource>", "declarator": "resources", "var_name": "resources"}], "methods": [{"identifier": "RuntimeResourceManager", "parameters": "(Configuration configuration)", "modifiers": "public", "return": "", "signature": " RuntimeResourceManager(Configuration configuration)", "full_signature": "public  RuntimeResourceManager(Configuration configuration)", "class_method_signature": "RuntimeResourceManager.RuntimeResourceManager(Configuration configuration)", "testcase": false, "constructor": true}, {"identifier": "setup", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void setup()", "full_signature": "public void setup()", "class_method_signature": "RuntimeResourceManager.setup()", "testcase": false, "constructor": false}, {"identifier": "cleanup", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void cleanup()", "full_signature": "public void cleanup()", "class_method_signature": "RuntimeResourceManager.cleanup()", "testcase": false, "constructor": false}, {"identifier": "load", "parameters": "()", "modifiers": "protected", "return": "List<RuntimeResource>", "signature": "List<RuntimeResource> load()", "full_signature": "protected List<RuntimeResource> load()", "class_method_signature": "RuntimeResourceManager.load()", "testcase": false, "constructor": false}], "file": "core-project/asakusa-runtime/src/main/java/com/asakusafw/runtime/flow/RuntimeResourceManager.java"}, "focal_method": {"identifier": "setup", "parameters": "()", "modifiers": "public", "return": "void", "body": "public void setup() throws IOException, InterruptedException {\n        if (LOG.isDebugEnabled()) {\n            LOG.debug(\"Loading runtime plugins\"); //$NON-NLS-1$\n        }\n        List<? extends RuntimeResource> loaded = load();\n        this.resources = new ArrayList<>();\n        for (RuntimeResource resource : loaded) {\n            if (LOG.isDebugEnabled()) {\n                LOG.debug(MessageFormat.format(\n                        \"Activating runtime plugin: {0}\", //$NON-NLS-1$\n                        resource.getClass().getName()));\n            }\n            resource.setup(configuration);\n            resources.add(resource);\n        }\n        if (LOG.isDebugEnabled()) {\n            LOG.debug(MessageFormat.format(\n                    \"Loaded {0} runtime plugins\", //$NON-NLS-1$\n                    resources.size()));\n        }\n    }", "signature": "void setup()", "full_signature": "public void setup()", "class_method_signature": "RuntimeResourceManager.setup()", "testcase": false, "constructor": false, "invocations": ["isDebugEnabled", "debug", "load", "isDebugEnabled", "debug", "format", "getName", "getClass", "setup", "add", "isDebugEnabled", "debug", "format", "size"]}, "repository": {"repo_id": 1545929, "url": "https://github.com/asakusafw/asakusafw", "language": "Java", "is_fork": false, "fork_count": 13, "stargazer_count": 113, "size": 35236, "license": "licensed"}}