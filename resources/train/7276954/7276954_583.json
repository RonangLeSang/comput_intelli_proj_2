{"test_class": {"identifier": "BlockHeartbeatReporterTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final int SESSION_ID = 1;", "modifier": "private static final", "type": "int", "declarator": "SESSION_ID = 1", "var_name": "SESSION_ID"}, {"original_string": "private static final BlockStoreLocation MEM_LOC = new BlockStoreLocation(\"MEM\", 0, \"MEM\");", "modifier": "private static final", "type": "BlockStoreLocation", "declarator": "MEM_LOC = new BlockStoreLocation(\"MEM\", 0, \"MEM\")", "var_name": "MEM_LOC"}, {"original_string": "private static final BlockStoreLocation SSD_LOC = new BlockStoreLocation(\"SSD\", 0, \"SSD\");", "modifier": "private static final", "type": "BlockStoreLocation", "declarator": "SSD_LOC = new BlockStoreLocation(\"SSD\", 0, \"SSD\")", "var_name": "SSD_LOC"}, {"original_string": "private static final BlockStoreLocation HDD_LOC = new BlockStoreLocation(\"HDD\", 0, \"HDD\");", "modifier": "private static final", "type": "BlockStoreLocation", "declarator": "HDD_LOC = new BlockStoreLocation(\"HDD\", 0, \"HDD\")", "var_name": "HDD_LOC"}, {"original_string": "BlockHeartbeatReporter mReporter;", "modifier": "", "type": "BlockHeartbeatReporter", "declarator": "mReporter", "var_name": "mReporter"}], "file": "core/server/worker/src/test/java/alluxio/worker/block/BlockHeartbeatReporterTest.java"}, "test_case": {"identifier": "generateReportEmpty", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void generateReportEmpty() {\n    BlockHeartbeatReport report = mReporter.generateReport();\n    assertTrue(report.getAddedBlocks().isEmpty());\n    assertTrue(report.getRemovedBlocks().isEmpty());\n  }", "signature": "void generateReportEmpty()", "full_signature": "@Test public void generateReportEmpty()", "class_method_signature": "BlockHeartbeatReporterTest.generateReportEmpty()", "testcase": true, "constructor": false, "invocations": ["generateReport", "assertTrue", "isEmpty", "getAddedBlocks", "assertTrue", "isEmpty", "getRemovedBlocks"]}, "focal_class": {"identifier": "BlockHeartbeatReporter", "superclass": "extends AbstractBlockStoreEventListener", "interfaces": "", "fields": [{"original_string": "private final Object mLock;", "modifier": "private final", "type": "Object", "declarator": "mLock", "var_name": "mLock"}, {"original_string": "private final List<Long> mRemovedBlocks;", "modifier": "private final", "type": "List<Long>", "declarator": "mRemovedBlocks", "var_name": "mRemovedBlocks"}, {"original_string": "private final Map<BlockStoreLocation, List<Long>> mAddedBlocks;", "modifier": "private final", "type": "Map<BlockStoreLocation, List<Long>>", "declarator": "mAddedBlocks", "var_name": "mAddedBlocks"}, {"original_string": "private final Map<String, List<String>> mLostStorage;", "modifier": "private final", "type": "Map<String, List<String>>", "declarator": "mLostStorage", "var_name": "mLostStorage"}], "methods": [{"identifier": "BlockHeartbeatReporter", "parameters": "()", "modifiers": "public", "return": "", "signature": " BlockHeartbeatReporter()", "full_signature": "public  BlockHeartbeatReporter()", "class_method_signature": "BlockHeartbeatReporter.BlockHeartbeatReporter()", "testcase": false, "constructor": true}, {"identifier": "generateReport", "parameters": "()", "modifiers": "public", "return": "BlockHeartbeatReport", "signature": "BlockHeartbeatReport generateReport()", "full_signature": "public BlockHeartbeatReport generateReport()", "class_method_signature": "BlockHeartbeatReporter.generateReport()", "testcase": false, "constructor": false}, {"identifier": "onMoveBlockByClient", "parameters": "(long sessionId, long blockId, BlockStoreLocation oldLocation,\n      BlockStoreLocation newLocation)", "modifiers": "@Override public", "return": "void", "signature": "void onMoveBlockByClient(long sessionId, long blockId, BlockStoreLocation oldLocation,\n      BlockStoreLocation newLocation)", "full_signature": "@Override public void onMoveBlockByClient(long sessionId, long blockId, BlockStoreLocation oldLocation,\n      BlockStoreLocation newLocation)", "class_method_signature": "BlockHeartbeatReporter.onMoveBlockByClient(long sessionId, long blockId, BlockStoreLocation oldLocation,\n      BlockStoreLocation newLocation)", "testcase": false, "constructor": false}, {"identifier": "onRemoveBlockByClient", "parameters": "(long sessionId, long blockId)", "modifiers": "@Override public", "return": "void", "signature": "void onRemoveBlockByClient(long sessionId, long blockId)", "full_signature": "@Override public void onRemoveBlockByClient(long sessionId, long blockId)", "class_method_signature": "BlockHeartbeatReporter.onRemoveBlockByClient(long sessionId, long blockId)", "testcase": false, "constructor": false}, {"identifier": "onRemoveBlockByWorker", "parameters": "(long sessionId, long blockId)", "modifiers": "@Override public", "return": "void", "signature": "void onRemoveBlockByWorker(long sessionId, long blockId)", "full_signature": "@Override public void onRemoveBlockByWorker(long sessionId, long blockId)", "class_method_signature": "BlockHeartbeatReporter.onRemoveBlockByWorker(long sessionId, long blockId)", "testcase": false, "constructor": false}, {"identifier": "onMoveBlockByWorker", "parameters": "(long sessionId, long blockId, BlockStoreLocation oldLocation,\n      BlockStoreLocation newLocation)", "modifiers": "@Override public", "return": "void", "signature": "void onMoveBlockByWorker(long sessionId, long blockId, BlockStoreLocation oldLocation,\n      BlockStoreLocation newLocation)", "full_signature": "@Override public void onMoveBlockByWorker(long sessionId, long blockId, BlockStoreLocation oldLocation,\n      BlockStoreLocation newLocation)", "class_method_signature": "BlockHeartbeatReporter.onMoveBlockByWorker(long sessionId, long blockId, BlockStoreLocation oldLocation,\n      BlockStoreLocation newLocation)", "testcase": false, "constructor": false}, {"identifier": "onBlockLost", "parameters": "(long blockId)", "modifiers": "@Override public", "return": "void", "signature": "void onBlockLost(long blockId)", "full_signature": "@Override public void onBlockLost(long blockId)", "class_method_signature": "BlockHeartbeatReporter.onBlockLost(long blockId)", "testcase": false, "constructor": false}, {"identifier": "onStorageLost", "parameters": "(String tierAlias, String dirPath)", "modifiers": "@Override public", "return": "void", "signature": "void onStorageLost(String tierAlias, String dirPath)", "full_signature": "@Override public void onStorageLost(String tierAlias, String dirPath)", "class_method_signature": "BlockHeartbeatReporter.onStorageLost(String tierAlias, String dirPath)", "testcase": false, "constructor": false}, {"identifier": "removeBlockInternal", "parameters": "(long blockId)", "modifiers": "private", "return": "void", "signature": "void removeBlockInternal(long blockId)", "full_signature": "private void removeBlockInternal(long blockId)", "class_method_signature": "BlockHeartbeatReporter.removeBlockInternal(long blockId)", "testcase": false, "constructor": false}, {"identifier": "addBlockToAddedBlocks", "parameters": "(long blockId, BlockStoreLocation location)", "modifiers": "private", "return": "void", "signature": "void addBlockToAddedBlocks(long blockId, BlockStoreLocation location)", "full_signature": "private void addBlockToAddedBlocks(long blockId, BlockStoreLocation location)", "class_method_signature": "BlockHeartbeatReporter.addBlockToAddedBlocks(long blockId, BlockStoreLocation location)", "testcase": false, "constructor": false}, {"identifier": "removeBlockFromAddedBlocks", "parameters": "(long blockId)", "modifiers": "private", "return": "void", "signature": "void removeBlockFromAddedBlocks(long blockId)", "full_signature": "private void removeBlockFromAddedBlocks(long blockId)", "class_method_signature": "BlockHeartbeatReporter.removeBlockFromAddedBlocks(long blockId)", "testcase": false, "constructor": false}], "file": "core/server/worker/src/main/java/alluxio/worker/block/BlockHeartbeatReporter.java"}, "focal_method": {"identifier": "generateReport", "parameters": "()", "modifiers": "public", "return": "BlockHeartbeatReport", "body": "public BlockHeartbeatReport generateReport() {\n    synchronized (mLock) {\n      BlockHeartbeatReport report\n          = new BlockHeartbeatReport(mAddedBlocks, mRemovedBlocks, mLostStorage);\n      // Clear added and removed blocks\n      mAddedBlocks.clear();\n      mRemovedBlocks.clear();\n      mLostStorage.clear();\n      return report;\n    }\n  }", "signature": "BlockHeartbeatReport generateReport()", "full_signature": "public BlockHeartbeatReport generateReport()", "class_method_signature": "BlockHeartbeatReporter.generateReport()", "testcase": false, "constructor": false, "invocations": ["clear", "clear", "clear"]}, "repository": {"repo_id": 7276954, "url": "https://github.com/Alluxio/alluxio", "stars": 4494, "created": "12/21/2012 5:43:46 PM +00:00", "updates": "2020-01-24T20:27:46+00:00", "fork": "False", "license": "licensed"}}