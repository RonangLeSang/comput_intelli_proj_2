{"test_class": {"identifier": "GrpcBlockingStreamTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final int BUFFER_SIZE = 5;", "modifier": "private static final", "type": "int", "declarator": "BUFFER_SIZE = 5", "var_name": "BUFFER_SIZE"}, {"original_string": "private static final long TIMEOUT = 10 * Constants.SECOND_MS;", "modifier": "private static final", "type": "long", "declarator": "TIMEOUT = 10 * Constants.SECOND_MS", "var_name": "TIMEOUT"}, {"original_string": "private static final long SHORT_TIMEOUT = Constants.SECOND / 2;", "modifier": "private static final", "type": "long", "declarator": "SHORT_TIMEOUT = Constants.SECOND / 2", "var_name": "SHORT_TIMEOUT"}, {"original_string": "private static final ExecutorService EXECUTOR = Executors.newFixedThreadPool(4,\n      ThreadFactoryUtils.build(\"test-executor-%d\", true));", "modifier": "private static final", "type": "ExecutorService", "declarator": "EXECUTOR = Executors.newFixedThreadPool(4,\n      ThreadFactoryUtils.build(\"test-executor-%d\", true))", "var_name": "EXECUTOR"}, {"original_string": "private static final String TEST_MESSAGE = \"test message\";", "modifier": "private static final", "type": "String", "declarator": "TEST_MESSAGE = \"test message\"", "var_name": "TEST_MESSAGE"}, {"original_string": "private BlockWorkerClient mClient;", "modifier": "private", "type": "BlockWorkerClient", "declarator": "mClient", "var_name": "mClient"}, {"original_string": "private ClientCallStreamObserver<WriteRequest> mRequestObserver;", "modifier": "private", "type": "ClientCallStreamObserver<WriteRequest>", "declarator": "mRequestObserver", "var_name": "mRequestObserver"}, {"original_string": "private ClientResponseObserver<WriteRequest, WriteResponse> mResponseObserver;", "modifier": "private", "type": "ClientResponseObserver<WriteRequest, WriteResponse>", "declarator": "mResponseObserver", "var_name": "mResponseObserver"}, {"original_string": "private GrpcBlockingStream<WriteRequest, WriteResponse> mStream;", "modifier": "private", "type": "GrpcBlockingStream<WriteRequest, WriteResponse>", "declarator": "mStream", "var_name": "mStream"}, {"original_string": "private Runnable mOnReadyHandler;", "modifier": "private", "type": "Runnable", "declarator": "mOnReadyHandler", "var_name": "mOnReadyHandler"}, {"original_string": "@Rule\n  public ExpectedException mThrown = ExpectedException.none();", "modifier": "@Rule\n  public", "type": "ExpectedException", "declarator": "mThrown = ExpectedException.none()", "var_name": "mThrown"}], "file": "core/client/fs/src/test/java/alluxio/client/block/stream/GrpcBlockingStreamTest.java"}, "test_case": {"identifier": "cancel", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void cancel() throws Exception {\n    mStream.cancel();\n\n    assertTrue(mStream.isCanceled());\n    assertFalse(mStream.isOpen());\n    verify(mRequestObserver).cancel(any(String.class), eq(null));\n  }", "signature": "void cancel()", "full_signature": "@Test public void cancel()", "class_method_signature": "GrpcBlockingStreamTest.cancel()", "testcase": true, "constructor": false, "invocations": ["cancel", "assertTrue", "isCanceled", "assertFalse", "isOpen", "cancel", "verify", "any", "eq"]}, "focal_class": {"identifier": "GrpcBlockingStream", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOG = LoggerFactory.getLogger(GrpcBlockingStream.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOG = LoggerFactory.getLogger(GrpcBlockingStream.class)", "var_name": "LOG"}, {"original_string": "private final StreamObserver<ResT> mResponseObserver;", "modifier": "private final", "type": "StreamObserver<ResT>", "declarator": "mResponseObserver", "var_name": "mResponseObserver"}, {"original_string": "private final ClientCallStreamObserver<ReqT> mRequestObserver;", "modifier": "private final", "type": "ClientCallStreamObserver<ReqT>", "declarator": "mRequestObserver", "var_name": "mRequestObserver"}, {"original_string": "private final BlockingQueue<Object> mResponses;", "modifier": "private final", "type": "BlockingQueue<Object>", "declarator": "mResponses", "var_name": "mResponses"}, {"original_string": "private final String mDescription;", "modifier": "private final", "type": "String", "declarator": "mDescription", "var_name": "mDescription"}, {"original_string": "private boolean mCompleted = false;", "modifier": "private", "type": "boolean", "declarator": "mCompleted = false", "var_name": "mCompleted"}, {"original_string": "private boolean mClosed = false;", "modifier": "private", "type": "boolean", "declarator": "mClosed = false", "var_name": "mClosed"}, {"original_string": "private boolean mCanceled = false;", "modifier": "private", "type": "boolean", "declarator": "mCanceled = false", "var_name": "mCanceled"}, {"original_string": "private final ReentrantLock mLock = new ReentrantLock();", "modifier": "private final", "type": "ReentrantLock", "declarator": "mLock = new ReentrantLock()", "var_name": "mLock"}, {"original_string": "@GuardedBy(\"mLock\")\n  private Throwable mError;", "modifier": "@GuardedBy(\"mLock\")\n  private", "type": "Throwable", "declarator": "mError", "var_name": "mError"}, {"original_string": "private final Condition mReadyOrFailed = mLock.newCondition();", "modifier": "private final", "type": "Condition", "declarator": "mReadyOrFailed = mLock.newCondition()", "var_name": "mReadyOrFailed"}, {"original_string": "private boolean mClosedFromRemote = false;", "modifier": "private", "type": "boolean", "declarator": "mClosedFromRemote = false", "var_name": "mClosedFromRemote"}], "methods": [{"identifier": "GrpcBlockingStream", "parameters": "(Function<StreamObserver<ResT>, StreamObserver<ReqT>> rpcFunc,\n      int bufferSize, String description)", "modifiers": "public", "return": "", "signature": " GrpcBlockingStream(Function<StreamObserver<ResT>, StreamObserver<ReqT>> rpcFunc,\n      int bufferSize, String description)", "full_signature": "public  GrpcBlockingStream(Function<StreamObserver<ResT>, StreamObserver<ReqT>> rpcFunc,\n      int bufferSize, String description)", "class_method_signature": "GrpcBlockingStream.GrpcBlockingStream(Function<StreamObserver<ResT>, StreamObserver<ReqT>> rpcFunc,\n      int bufferSize, String description)", "testcase": false, "constructor": true}, {"identifier": "send", "parameters": "(ReqT request, long timeoutMs)", "modifiers": "public", "return": "void", "signature": "void send(ReqT request, long timeoutMs)", "full_signature": "public void send(ReqT request, long timeoutMs)", "class_method_signature": "GrpcBlockingStream.send(ReqT request, long timeoutMs)", "testcase": false, "constructor": false}, {"identifier": "send", "parameters": "(ReqT request)", "modifiers": "public", "return": "void", "signature": "void send(ReqT request)", "full_signature": "public void send(ReqT request)", "class_method_signature": "GrpcBlockingStream.send(ReqT request)", "testcase": false, "constructor": false}, {"identifier": "receive", "parameters": "(long timeoutMs)", "modifiers": "public", "return": "ResT", "signature": "ResT receive(long timeoutMs)", "full_signature": "public ResT receive(long timeoutMs)", "class_method_signature": "GrpcBlockingStream.receive(long timeoutMs)", "testcase": false, "constructor": false}, {"identifier": "close", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void close()", "full_signature": "public void close()", "class_method_signature": "GrpcBlockingStream.close()", "testcase": false, "constructor": false}, {"identifier": "cancel", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void cancel()", "full_signature": "public void cancel()", "class_method_signature": "GrpcBlockingStream.cancel()", "testcase": false, "constructor": false}, {"identifier": "waitForComplete", "parameters": "(long timeoutMs)", "modifiers": "public", "return": "void", "signature": "void waitForComplete(long timeoutMs)", "full_signature": "public void waitForComplete(long timeoutMs)", "class_method_signature": "GrpcBlockingStream.waitForComplete(long timeoutMs)", "testcase": false, "constructor": false}, {"identifier": "isClosedFromRemote", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isClosedFromRemote()", "full_signature": "public boolean isClosedFromRemote()", "class_method_signature": "GrpcBlockingStream.isClosedFromRemote()", "testcase": false, "constructor": false}, {"identifier": "isOpen", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isOpen()", "full_signature": "public boolean isOpen()", "class_method_signature": "GrpcBlockingStream.isOpen()", "testcase": false, "constructor": false}, {"identifier": "isClosed", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isClosed()", "full_signature": "public boolean isClosed()", "class_method_signature": "GrpcBlockingStream.isClosed()", "testcase": false, "constructor": false}, {"identifier": "isCanceled", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isCanceled()", "full_signature": "public boolean isCanceled()", "class_method_signature": "GrpcBlockingStream.isCanceled()", "testcase": false, "constructor": false}, {"identifier": "checkError", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void checkError()", "full_signature": "private void checkError()", "class_method_signature": "GrpcBlockingStream.checkError()", "testcase": false, "constructor": false}, {"identifier": "toAlluxioStatusException", "parameters": "(Throwable t)", "modifiers": "private", "return": "AlluxioStatusException", "signature": "AlluxioStatusException toAlluxioStatusException(Throwable t)", "full_signature": "private AlluxioStatusException toAlluxioStatusException(Throwable t)", "class_method_signature": "GrpcBlockingStream.toAlluxioStatusException(Throwable t)", "testcase": false, "constructor": false}, {"identifier": "formatErrorMessage", "parameters": "(String format, Object... args)", "modifiers": "private", "return": "String", "signature": "String formatErrorMessage(String format, Object... args)", "full_signature": "private String formatErrorMessage(String format, Object... args)", "class_method_signature": "GrpcBlockingStream.formatErrorMessage(String format, Object... args)", "testcase": false, "constructor": false}], "file": "core/client/fs/src/main/java/alluxio/client/block/stream/GrpcBlockingStream.java"}, "focal_method": {"identifier": "cancel", "parameters": "()", "modifiers": "public", "return": "void", "body": "public void cancel() {\n    if (isOpen()) {\n      LOG.debug(\"Cancelling stream ({})\", mDescription);\n      mCanceled = true;\n      mRequestObserver.cancel(\"Request is cancelled by user.\", null);\n    }\n  }", "signature": "void cancel()", "full_signature": "public void cancel()", "class_method_signature": "GrpcBlockingStream.cancel()", "testcase": false, "constructor": false, "invocations": ["isOpen", "debug", "cancel"]}, "repository": {"repo_id": 7276954, "url": "https://github.com/Alluxio/alluxio", "stars": 4494, "created": "12/21/2012 5:43:46 PM +00:00", "updates": "2020-01-24T20:27:46+00:00", "fork": "False", "license": "licensed"}}