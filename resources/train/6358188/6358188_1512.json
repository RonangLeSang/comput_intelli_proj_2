{"test_class": {"identifier": "AzureCloudBlobIteratorTest", "superclass": "extends EasyMockSupport", "interfaces": "", "fields": [{"original_string": "private static final String AZURE = \"azure\";", "modifier": "private static final", "type": "String", "declarator": "AZURE = \"azure\"", "var_name": "AZURE"}, {"original_string": "private static final String CONTAINER1 = \"container1\";", "modifier": "private static final", "type": "String", "declarator": "CONTAINER1 = \"container1\"", "var_name": "CONTAINER1"}, {"original_string": "private static final String PREFIX_ONLY_CLOUD_BLOBS = \"prefixOnlyCloudBlobs\";", "modifier": "private static final", "type": "String", "declarator": "PREFIX_ONLY_CLOUD_BLOBS = \"prefixOnlyCloudBlobs\"", "var_name": "PREFIX_ONLY_CLOUD_BLOBS"}, {"original_string": "private static final String PREFIX_WITH_NO_BLOBS = \"prefixWithNoBlobs\";", "modifier": "private static final", "type": "String", "declarator": "PREFIX_WITH_NO_BLOBS = \"prefixWithNoBlobs\"", "var_name": "PREFIX_WITH_NO_BLOBS"}, {"original_string": "private static final String PREFIX_WITH_CLOUD_BLOBS_AND_DIRECTORIES = \"prefixWithCloudBlobsAndDirectories\";", "modifier": "private static final", "type": "String", "declarator": "PREFIX_WITH_CLOUD_BLOBS_AND_DIRECTORIES = \"prefixWithCloudBlobsAndDirectories\"", "var_name": "PREFIX_WITH_CLOUD_BLOBS_AND_DIRECTORIES"}, {"original_string": "private static final URI PREFIX_ONLY_CLOUD_BLOBS_URI;", "modifier": "private static final", "type": "URI", "declarator": "PREFIX_ONLY_CLOUD_BLOBS_URI", "var_name": "PREFIX_ONLY_CLOUD_BLOBS_URI"}, {"original_string": "private static final URI PREFIX_WITH_NO_BLOBS_URI;", "modifier": "private static final", "type": "URI", "declarator": "PREFIX_WITH_NO_BLOBS_URI", "var_name": "PREFIX_WITH_NO_BLOBS_URI"}, {"original_string": "private static final URI PREFIX_WITH_CLOUD_BLOBS_AND_DIRECTORIES_URI;", "modifier": "private static final", "type": "URI", "declarator": "PREFIX_WITH_CLOUD_BLOBS_AND_DIRECTORIES_URI", "var_name": "PREFIX_WITH_CLOUD_BLOBS_AND_DIRECTORIES_URI"}, {"original_string": "private static final List<URI> EMPTY_URI_PREFIXES = ImmutableList.of();", "modifier": "private static final", "type": "List<URI>", "declarator": "EMPTY_URI_PREFIXES = ImmutableList.of()", "var_name": "EMPTY_URI_PREFIXES"}, {"original_string": "private static final List<URI> PREFIXES;", "modifier": "private static final", "type": "List<URI>", "declarator": "PREFIXES", "var_name": "PREFIXES"}, {"original_string": "private static final int MAX_LISTING_LENGTH = 10;", "modifier": "private static final", "type": "int", "declarator": "MAX_LISTING_LENGTH = 10", "var_name": "MAX_LISTING_LENGTH"}, {"original_string": "private static final int MAX_TRIES = 2;", "modifier": "private static final", "type": "int", "declarator": "MAX_TRIES = 2", "var_name": "MAX_TRIES"}, {"original_string": "private static final StorageException RETRYABLE_EXCEPTION = new StorageException(\"\", \"\", new IOException());", "modifier": "private static final", "type": "StorageException", "declarator": "RETRYABLE_EXCEPTION = new StorageException(\"\", \"\", new IOException())", "var_name": "RETRYABLE_EXCEPTION"}, {"original_string": "private static final URISyntaxException NON_RETRYABLE_EXCEPTION = new URISyntaxException(\"\", \"\");", "modifier": "private static final", "type": "URISyntaxException", "declarator": "NON_RETRYABLE_EXCEPTION = new URISyntaxException(\"\", \"\")", "var_name": "NON_RETRYABLE_EXCEPTION"}, {"original_string": "private AzureStorage storage;", "modifier": "private", "type": "AzureStorage", "declarator": "storage", "var_name": "storage"}, {"original_string": "private ListBlobItemHolderFactory blobItemDruidFactory;", "modifier": "private", "type": "ListBlobItemHolderFactory", "declarator": "blobItemDruidFactory", "var_name": "blobItemDruidFactory"}, {"original_string": "private AzureAccountConfig config;", "modifier": "private", "type": "AzureAccountConfig", "declarator": "config", "var_name": "config"}, {"original_string": "private ResultSegment<ListBlobItem> resultSegmentPrefixOnlyAndFailLessThanMaxTriesCloudBlobs1;", "modifier": "private", "type": "ResultSegment<ListBlobItem>", "declarator": "resultSegmentPrefixOnlyAndFailLessThanMaxTriesCloudBlobs1", "var_name": "resultSegmentPrefixOnlyAndFailLessThanMaxTriesCloudBlobs1"}, {"original_string": "private ResultSegment<ListBlobItem> resultSegmentPrefixOnlyAndFailLessThanMaxTriesCloudBlobs2;", "modifier": "private", "type": "ResultSegment<ListBlobItem>", "declarator": "resultSegmentPrefixOnlyAndFailLessThanMaxTriesCloudBlobs2", "var_name": "resultSegmentPrefixOnlyAndFailLessThanMaxTriesCloudBlobs2"}, {"original_string": "private ResultSegment<ListBlobItem> resultSegmentPrefixWithNoBlobs;", "modifier": "private", "type": "ResultSegment<ListBlobItem>", "declarator": "resultSegmentPrefixWithNoBlobs", "var_name": "resultSegmentPrefixWithNoBlobs"}, {"original_string": "private ResultSegment<ListBlobItem> resultSegmentPrefixWithCloudBlobsAndDirectories;", "modifier": "private", "type": "ResultSegment<ListBlobItem>", "declarator": "resultSegmentPrefixWithCloudBlobsAndDirectories", "var_name": "resultSegmentPrefixWithCloudBlobsAndDirectories"}, {"original_string": "private ResultContinuation resultContinuationPrefixOnlyCloudBlobs = new ResultContinuation();", "modifier": "private", "type": "ResultContinuation", "declarator": "resultContinuationPrefixOnlyCloudBlobs = new ResultContinuation()", "var_name": "resultContinuationPrefixOnlyCloudBlobs"}, {"original_string": "private ResultContinuation nullResultContinuationToken = null;", "modifier": "private", "type": "ResultContinuation", "declarator": "nullResultContinuationToken = null", "var_name": "nullResultContinuationToken"}, {"original_string": "private ListBlobItem blobItemPrefixWithOnlyCloudBlobs1;", "modifier": "private", "type": "ListBlobItem", "declarator": "blobItemPrefixWithOnlyCloudBlobs1", "var_name": "blobItemPrefixWithOnlyCloudBlobs1"}, {"original_string": "private ListBlobItemHolder cloudBlobItemPrefixWithOnlyCloudBlobs1;", "modifier": "private", "type": "ListBlobItemHolder", "declarator": "cloudBlobItemPrefixWithOnlyCloudBlobs1", "var_name": "cloudBlobItemPrefixWithOnlyCloudBlobs1"}, {"original_string": "private CloudBlobHolder cloudBlobDruidPrefixWithOnlyCloudBlobs1;", "modifier": "private", "type": "CloudBlobHolder", "declarator": "cloudBlobDruidPrefixWithOnlyCloudBlobs1", "var_name": "cloudBlobDruidPrefixWithOnlyCloudBlobs1"}, {"original_string": "private ListBlobItem blobItemPrefixWithOnlyCloudBlobs2;", "modifier": "private", "type": "ListBlobItem", "declarator": "blobItemPrefixWithOnlyCloudBlobs2", "var_name": "blobItemPrefixWithOnlyCloudBlobs2"}, {"original_string": "private ListBlobItemHolder cloudBlobItemPrefixWithOnlyCloudBlobs2;", "modifier": "private", "type": "ListBlobItemHolder", "declarator": "cloudBlobItemPrefixWithOnlyCloudBlobs2", "var_name": "cloudBlobItemPrefixWithOnlyCloudBlobs2"}, {"original_string": "private CloudBlobHolder cloudBlobDruidPrefixWithOnlyCloudBlobs2;", "modifier": "private", "type": "CloudBlobHolder", "declarator": "cloudBlobDruidPrefixWithOnlyCloudBlobs2", "var_name": "cloudBlobDruidPrefixWithOnlyCloudBlobs2"}, {"original_string": "private ListBlobItem blobItemPrefixWithCloudBlobsAndDirectories1;", "modifier": "private", "type": "ListBlobItem", "declarator": "blobItemPrefixWithCloudBlobsAndDirectories1", "var_name": "blobItemPrefixWithCloudBlobsAndDirectories1"}, {"original_string": "private ListBlobItemHolder directoryItemPrefixWithCloudBlobsAndDirectories;", "modifier": "private", "type": "ListBlobItemHolder", "declarator": "directoryItemPrefixWithCloudBlobsAndDirectories", "var_name": "directoryItemPrefixWithCloudBlobsAndDirectories"}, {"original_string": "private ListBlobItem blobItemPrefixWithCloudBlobsAndDirectories2;", "modifier": "private", "type": "ListBlobItem", "declarator": "blobItemPrefixWithCloudBlobsAndDirectories2", "var_name": "blobItemPrefixWithCloudBlobsAndDirectories2"}, {"original_string": "private ListBlobItemHolder cloudBlobItemPrefixWithCloudBlobsAndDirectories;", "modifier": "private", "type": "ListBlobItemHolder", "declarator": "cloudBlobItemPrefixWithCloudBlobsAndDirectories", "var_name": "cloudBlobItemPrefixWithCloudBlobsAndDirectories"}, {"original_string": "private CloudBlobHolder cloudBlobDruidPrefixWithCloudBlobsAndDirectories;", "modifier": "private", "type": "CloudBlobHolder", "declarator": "cloudBlobDruidPrefixWithCloudBlobsAndDirectories", "var_name": "cloudBlobDruidPrefixWithCloudBlobsAndDirectories"}, {"original_string": "private ListBlobItem blobItemPrefixWithCloudBlobsAndDirectories3;", "modifier": "private", "type": "ListBlobItem", "declarator": "blobItemPrefixWithCloudBlobsAndDirectories3", "var_name": "blobItemPrefixWithCloudBlobsAndDirectories3"}, {"original_string": "private ListBlobItemHolder directoryItemPrefixWithCloudBlobsAndDirectories3;", "modifier": "private", "type": "ListBlobItemHolder", "declarator": "directoryItemPrefixWithCloudBlobsAndDirectories3", "var_name": "directoryItemPrefixWithCloudBlobsAndDirectories3"}, {"original_string": "private AzureCloudBlobIterator azureCloudBlobIterator;", "modifier": "private", "type": "AzureCloudBlobIterator", "declarator": "azureCloudBlobIterator", "var_name": "azureCloudBlobIterator"}], "file": "extensions-core/azure-extensions/src/test/java/org/apache/druid/storage/azure/AzureCloudBlobIteratorTest.java"}, "test_case": {"identifier": "test_next_emptyPrefixes_throwsNoSuchElementException", "parameters": "()", "modifiers": "@Test(expected = NoSuchElementException.class) public", "return": "void", "body": "@Test(expected = NoSuchElementException.class)\n  public void test_next_emptyPrefixes_throwsNoSuchElementException()\n  {\n    azureCloudBlobIterator = new AzureCloudBlobIterator(\n        storage,\n        blobItemDruidFactory,\n        config,\n        EMPTY_URI_PREFIXES,\n        MAX_LISTING_LENGTH\n    );\n    azureCloudBlobIterator.next();\n  }", "signature": "void test_next_emptyPrefixes_throwsNoSuchElementException()", "full_signature": "@Test(expected = NoSuchElementException.class) public void test_next_emptyPrefixes_throwsNoSuchElementException()", "class_method_signature": "AzureCloudBlobIteratorTest.test_next_emptyPrefixes_throwsNoSuchElementException()", "testcase": true, "constructor": false, "invocations": ["next"]}, "focal_class": {"identifier": "AzureCloudBlobIterator", "superclass": "", "interfaces": "implements Iterator<CloudBlobHolder>", "fields": [{"original_string": "private static final Logger log = new Logger(AzureCloudBlobIterator.class);", "modifier": "private static final", "type": "Logger", "declarator": "log = new Logger(AzureCloudBlobIterator.class)", "var_name": "log"}, {"original_string": "private final AzureStorage storage;", "modifier": "private final", "type": "AzureStorage", "declarator": "storage", "var_name": "storage"}, {"original_string": "private final ListBlobItemHolderFactory blobItemDruidFactory;", "modifier": "private final", "type": "ListBlobItemHolderFactory", "declarator": "blobItemDruidFactory", "var_name": "blobItemDruidFactory"}, {"original_string": "private final Iterator<URI> prefixesIterator;", "modifier": "private final", "type": "Iterator<URI>", "declarator": "prefixesIterator", "var_name": "prefixesIterator"}, {"original_string": "private final int maxListingLength;", "modifier": "private final", "type": "int", "declarator": "maxListingLength", "var_name": "maxListingLength"}, {"original_string": "private ResultSegment<ListBlobItem> result;", "modifier": "private", "type": "ResultSegment<ListBlobItem>", "declarator": "result", "var_name": "result"}, {"original_string": "private String currentContainer;", "modifier": "private", "type": "String", "declarator": "currentContainer", "var_name": "currentContainer"}, {"original_string": "private String currentPrefix;", "modifier": "private", "type": "String", "declarator": "currentPrefix", "var_name": "currentPrefix"}, {"original_string": "private ResultContinuation continuationToken;", "modifier": "private", "type": "ResultContinuation", "declarator": "continuationToken", "var_name": "continuationToken"}, {"original_string": "private CloudBlobHolder currentBlobItem;", "modifier": "private", "type": "CloudBlobHolder", "declarator": "currentBlobItem", "var_name": "currentBlobItem"}, {"original_string": "private Iterator<ListBlobItem> blobItemIterator;", "modifier": "private", "type": "Iterator<ListBlobItem>", "declarator": "blobItemIterator", "var_name": "blobItemIterator"}, {"original_string": "private final AzureAccountConfig config;", "modifier": "private final", "type": "AzureAccountConfig", "declarator": "config", "var_name": "config"}], "methods": [{"identifier": "AzureCloudBlobIterator", "parameters": "(\n      AzureStorage storage,\n      ListBlobItemHolderFactory blobItemDruidFactory,\n      AzureAccountConfig config,\n      @Assisted final Iterable<URI> prefixes,\n      @Assisted final int maxListingLength\n  )", "modifiers": "@AssistedInject", "return": "", "signature": " AzureCloudBlobIterator(\n      AzureStorage storage,\n      ListBlobItemHolderFactory blobItemDruidFactory,\n      AzureAccountConfig config,\n      @Assisted final Iterable<URI> prefixes,\n      @Assisted final int maxListingLength\n  )", "full_signature": "@AssistedInject  AzureCloudBlobIterator(\n      AzureStorage storage,\n      ListBlobItemHolderFactory blobItemDruidFactory,\n      AzureAccountConfig config,\n      @Assisted final Iterable<URI> prefixes,\n      @Assisted final int maxListingLength\n  )", "class_method_signature": "AzureCloudBlobIterator.AzureCloudBlobIterator(\n      AzureStorage storage,\n      ListBlobItemHolderFactory blobItemDruidFactory,\n      AzureAccountConfig config,\n      @Assisted final Iterable<URI> prefixes,\n      @Assisted final int maxListingLength\n  )", "testcase": false, "constructor": true}, {"identifier": "hasNext", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean hasNext()", "full_signature": "@Override public boolean hasNext()", "class_method_signature": "AzureCloudBlobIterator.hasNext()", "testcase": false, "constructor": false}, {"identifier": "next", "parameters": "()", "modifiers": "@Override public", "return": "CloudBlobHolder", "signature": "CloudBlobHolder next()", "full_signature": "@Override public CloudBlobHolder next()", "class_method_signature": "AzureCloudBlobIterator.next()", "testcase": false, "constructor": false}, {"identifier": "prepareNextRequest", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void prepareNextRequest()", "full_signature": "private void prepareNextRequest()", "class_method_signature": "AzureCloudBlobIterator.prepareNextRequest()", "testcase": false, "constructor": false}, {"identifier": "fetchNextBatch", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void fetchNextBatch()", "full_signature": "private void fetchNextBatch()", "class_method_signature": "AzureCloudBlobIterator.fetchNextBatch()", "testcase": false, "constructor": false}, {"identifier": "advanceBlobItem", "parameters": "()", "modifiers": "private", "return": "void", "signature": "void advanceBlobItem()", "full_signature": "private void advanceBlobItem()", "class_method_signature": "AzureCloudBlobIterator.advanceBlobItem()", "testcase": false, "constructor": false}], "file": "extensions-core/azure-extensions/src/main/java/org/apache/druid/storage/azure/AzureCloudBlobIterator.java"}, "focal_method": {"identifier": "next", "parameters": "()", "modifiers": "@Override public", "return": "CloudBlobHolder", "body": "@Override\n  public CloudBlobHolder next()\n  {\n    if (currentBlobItem == null) {\n      throw new NoSuchElementException();\n    }\n\n    final CloudBlobHolder retVal = currentBlobItem;\n    advanceBlobItem();\n    return retVal;\n  }", "signature": "CloudBlobHolder next()", "full_signature": "@Override public CloudBlobHolder next()", "class_method_signature": "AzureCloudBlobIterator.next()", "testcase": false, "constructor": false, "invocations": ["advanceBlobItem"]}, "repository": {"repo_id": 6358188, "url": "https://github.com/apache/druid", "stars": 9116, "created": "10/23/2012 7:08:07 PM +00:00", "updates": "2020-01-27T21:36:20+00:00", "fork": "False", "license": "licensed"}}