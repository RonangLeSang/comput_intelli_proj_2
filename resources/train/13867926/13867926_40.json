{"test_class": {"identifier": "EarlToHtmlTransformationTest", "superclass": "", "interfaces": "", "fields": [], "file": "teamengine-core/src/test/java/com/occamlab/te/html/EarlToHtmlTransformationTest.java"}, "test_case": {"identifier": "testEarlHtmlReport_TestNG", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testEarlHtmlReport_TestNG()\n                            throws Exception {\n        String outputDirectory = createTempDirectoryAndCopyResources( \"earl-results_testng.rdf\" );\n\n        EarlToHtmlTransformation earlToHtmlTransformation = new EarlToHtmlTransformation();\n        earlToHtmlTransformation.earlHtmlReport( outputDirectory );\n\n        assertThat( new File( outputDirectory, \"result/index.html\" ).exists(), is( true ) );\n    }", "signature": "void testEarlHtmlReport_TestNG()", "full_signature": "@Test public void testEarlHtmlReport_TestNG()", "class_method_signature": "EarlToHtmlTransformationTest.testEarlHtmlReport_TestNG()", "testcase": true, "constructor": false, "invocations": ["createTempDirectoryAndCopyResources", "earlHtmlReport", "assertThat", "exists", "is"]}, "focal_class": {"identifier": "EarlToHtmlTransformation", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGR = Logger.getLogger( EarlToHtmlTransformation.class.getName() );", "modifier": "private static final", "type": "Logger", "declarator": "LOGR = Logger.getLogger( EarlToHtmlTransformation.class.getName() )", "var_name": "LOGR"}], "methods": [{"identifier": "earlHtmlReport", "parameters": "( String outputDir )", "modifiers": "public", "return": "void", "signature": "void earlHtmlReport( String outputDir )", "full_signature": "public void earlHtmlReport( String outputDir )", "class_method_signature": "EarlToHtmlTransformation.earlHtmlReport( String outputDir )", "testcase": false, "constructor": false}, {"identifier": "findEarlResultFile", "parameters": "( String outputDir )", "modifiers": "private", "return": "File", "signature": "File findEarlResultFile( String outputDir )", "full_signature": "private File findEarlResultFile( String outputDir )", "class_method_signature": "EarlToHtmlTransformation.findEarlResultFile( String outputDir )", "testcase": false, "constructor": false}], "file": "teamengine-core/src/main/java/com/occamlab/te/html/EarlToHtmlTransformation.java"}, "focal_method": {"identifier": "earlHtmlReport", "parameters": "( String outputDir )", "modifiers": "public", "return": "void", "body": "public void earlHtmlReport( String outputDir ) {\n        ClassLoader cl = Thread.currentThread().getContextClassLoader();\n        String resourceDir = cl.getResource( \"com/occamlab/te/earl/lib\" ).getPath();\n        String earlXsl = cl.getResource( \"com/occamlab/te/earl_html_report.xsl\" ).toString();\n        File htmlOutput = new File( outputDir, \"result\" );\n        htmlOutput.mkdir();\n\n        File earlResult = findEarlResultFile( outputDir );\n        LOGR.log( FINE, \"Try to transform earl result file '\" + earlResult + \"' to directory \" + htmlOutput );\n\n        try {\n            if ( earlResult != null && earlResult.exists() ) {\n                Transformer transformer = TransformerFactory.newInstance().newTransformer( new StreamSource( earlXsl ) );\n                transformer.setParameter( \"outputDir\", htmlOutput );\n                File indexHtml = new File( htmlOutput, \"index.html\" );\n                indexHtml.createNewFile();\n\n                // Fortify Mod: Make sure the FileOutputStream is closed when we are done with it.\n                // transformer.transform( new StreamSource( earlResult ),\n                // new StreamResult( new FileOutputStream( indexHtml ) ) );\n                FileOutputStream fo = new FileOutputStream( indexHtml );\n                transformer.transform( new StreamSource( earlResult ), new StreamResult( fo ) );\n                fo.close();\n                FileUtils.copyDirectory( new File( resourceDir ), htmlOutput );\n            }\n        } catch ( Exception e ) {\n            LOGR.log( SEVERE, \"Transformation of EARL to HTML failed.\", e );\n        }\n    }", "signature": "void earlHtmlReport( String outputDir )", "full_signature": "public void earlHtmlReport( String outputDir )", "class_method_signature": "EarlToHtmlTransformation.earlHtmlReport( String outputDir )", "testcase": false, "constructor": false, "invocations": ["getContextClassLoader", "currentThread", "getPath", "getResource", "toString", "getResource", "mkdir", "findEarlResultFile", "log", "exists", "newTransformer", "newInstance", "setParameter", "createNewFile", "transform", "close", "copyDirectory", "log"]}, "repository": {"repo_id": 13867926, "url": "https://github.com/opengeospatial/teamengine", "language": "Java", "is_fork": false, "fork_count": 38, "stargazer_count": 30, "size": 29307, "license": "licensed"}}