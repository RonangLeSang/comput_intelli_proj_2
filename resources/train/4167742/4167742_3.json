{"test_class": {"identifier": "GraphiteHttpClientTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final ObjectMapper MAPPER = new ObjectMapper();", "modifier": "private static final", "type": "ObjectMapper", "declarator": "MAPPER = new ObjectMapper()", "var_name": "MAPPER"}, {"original_string": "@Rule\n    public ExpectedException thrown = ExpectedException.none();", "modifier": "@Rule\n    public", "type": "ExpectedException", "declarator": "thrown = ExpectedException.none()", "var_name": "thrown"}, {"original_string": "@Rule\n    public ClientDriverRule clientDriver = new ClientDriverRule();", "modifier": "@Rule\n    public", "type": "ClientDriverRule", "declarator": "clientDriver = new ClientDriverRule()", "var_name": "clientDriver"}, {"original_string": "private GraphiteHttpClient graphiteHttpClient;", "modifier": "private", "type": "GraphiteHttpClient", "declarator": "graphiteHttpClient", "var_name": "graphiteHttpClient"}], "file": "seyren-core/src/test/java/com/seyren/core/util/graphite/GraphiteHttpClientTest.java"}, "test_case": {"identifier": "authIsAddedWhenUsernameAndPasswordAreProvided", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void authIsAddedWhenUsernameAndPasswordAreProvided() throws Exception {\n        System.setProperty(\"GRAPHITE_USERNAME\", \"seyren\");\n        System.setProperty(\"GRAPHITE_PASSWORD\", \"s3yr3N\");\n        graphiteHttpClient = new GraphiteHttpClient(seyrenConfig(clientDriver.getBaseUrl()));\n        \n        String response = \"[{\\\"target\\\": \\\"service.error.1MinuteRate\\\", \\\"datapoints\\\": [[0.20, 1337453460],[0.01, 1337453463]]}]\";\n        \n        clientDriver.addExpectation(\n                onRequestTo(\"/render/\")\n                        .withParam(\"from\", \"-11minutes\")\n                        .withParam(\"until\", \"-1minutes\")\n                        .withParam(\"uniq\", Pattern.compile(\"[0-9]+\"))\n                        .withParam(\"format\", \"json\")\n                        .withParam(\"target\", \"service.error.1MinuteRate\")\n                        .withHeader(\"Authorization\", \"Basic c2V5cmVuOnMzeXIzTg==\"),\n                giveResponse(response, \"application/json\"));\n        \n        graphiteHttpClient.getTargetJson(\"service.error.1MinuteRate\");\n        \n        System.clearProperty(\"GRAPHITE_USERNAME\");\n        System.clearProperty(\"GRAPHITE_PASSWORD\");\n    }", "signature": "void authIsAddedWhenUsernameAndPasswordAreProvided()", "full_signature": "@Test public void authIsAddedWhenUsernameAndPasswordAreProvided()", "class_method_signature": "GraphiteHttpClientTest.authIsAddedWhenUsernameAndPasswordAreProvided()", "testcase": true, "constructor": false, "invocations": ["setProperty", "setProperty", "seyrenConfig", "getBaseUrl", "addExpectation", "withHeader", "withParam", "withParam", "withParam", "withParam", "withParam", "onRequestTo", "compile", "giveResponse", "getTargetJson", "clearProperty", "clearProperty"]}, "focal_class": {"identifier": "GraphiteHttpClient", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(GraphiteHttpClient.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(GraphiteHttpClient.class)", "var_name": "LOGGER"}, {"original_string": "private static final String THRESHOLD_TARGET = \"alias(dashed(color(constantLine(%s),\\\"%s\\\")),\\\"%s\\\")\";", "modifier": "private static final", "type": "String", "declarator": "THRESHOLD_TARGET = \"alias(dashed(color(constantLine(%s),\\\"%s\\\")),\\\"%s\\\")\"", "var_name": "THRESHOLD_TARGET"}, {"original_string": "private static final int MAX_CONNECTIONS_PER_ROUTE = 20;", "modifier": "private static final", "type": "int", "declarator": "MAX_CONNECTIONS_PER_ROUTE = 20", "var_name": "MAX_CONNECTIONS_PER_ROUTE"}, {"original_string": "private final JsonNodeResponseHandler jsonNodeHandler = new JsonNodeResponseHandler();", "modifier": "private final", "type": "JsonNodeResponseHandler", "declarator": "jsonNodeHandler = new JsonNodeResponseHandler()", "var_name": "jsonNodeHandler"}, {"original_string": "private final ByteArrayResponseHandler chartBytesHandler = new ByteArrayResponseHandler();", "modifier": "private final", "type": "ByteArrayResponseHandler", "declarator": "chartBytesHandler = new ByteArrayResponseHandler()", "var_name": "chartBytesHandler"}, {"original_string": "private final String graphiteScheme;", "modifier": "private final", "type": "String", "declarator": "graphiteScheme", "var_name": "graphiteScheme"}, {"original_string": "private final String graphiteHost;", "modifier": "private final", "type": "String", "declarator": "graphiteHost", "var_name": "graphiteHost"}, {"original_string": "private final String graphitePath;", "modifier": "private final", "type": "String", "declarator": "graphitePath", "var_name": "graphitePath"}, {"original_string": "private final String graphiteUsername;", "modifier": "private final", "type": "String", "declarator": "graphiteUsername", "var_name": "graphiteUsername"}, {"original_string": "private final String graphitePassword;", "modifier": "private final", "type": "String", "declarator": "graphitePassword", "var_name": "graphitePassword"}, {"original_string": "private final String graphiteKeyStore;", "modifier": "private final", "type": "String", "declarator": "graphiteKeyStore", "var_name": "graphiteKeyStore"}, {"original_string": "private final String graphiteKeyStorePassword;", "modifier": "private final", "type": "String", "declarator": "graphiteKeyStorePassword", "var_name": "graphiteKeyStorePassword"}, {"original_string": "private final String graphiteTrustStore;", "modifier": "private final", "type": "String", "declarator": "graphiteTrustStore", "var_name": "graphiteTrustStore"}, {"original_string": "private final int graphiteConnectionRequestTimeout;", "modifier": "private final", "type": "int", "declarator": "graphiteConnectionRequestTimeout", "var_name": "graphiteConnectionRequestTimeout"}, {"original_string": "private final int graphiteConnectTimeout;", "modifier": "private final", "type": "int", "declarator": "graphiteConnectTimeout", "var_name": "graphiteConnectTimeout"}, {"original_string": "private final int graphiteSocketTimeout;", "modifier": "private final", "type": "int", "declarator": "graphiteSocketTimeout", "var_name": "graphiteSocketTimeout"}, {"original_string": "private final HttpClient client;", "modifier": "private final", "type": "HttpClient", "declarator": "client", "var_name": "client"}, {"original_string": "private final HttpContext context;", "modifier": "private final", "type": "HttpContext", "declarator": "context", "var_name": "context"}], "methods": [{"identifier": "GraphiteHttpClient", "parameters": "(SeyrenConfig seyrenConfig)", "modifiers": "@Inject public", "return": "", "signature": " GraphiteHttpClient(SeyrenConfig seyrenConfig)", "full_signature": "@Inject public  GraphiteHttpClient(SeyrenConfig seyrenConfig)", "class_method_signature": "GraphiteHttpClient.GraphiteHttpClient(SeyrenConfig seyrenConfig)", "testcase": false, "constructor": true}, {"identifier": "getTargetJson", "parameters": "(String target)", "modifiers": "@Deprecated public", "return": "JsonNode", "signature": "JsonNode getTargetJson(String target)", "full_signature": "@Deprecated public JsonNode getTargetJson(String target)", "class_method_signature": "GraphiteHttpClient.getTargetJson(String target)", "testcase": false, "constructor": false}, {"identifier": "getTargetJson", "parameters": "(String target, String from, String until)", "modifiers": "public", "return": "JsonNode", "signature": "JsonNode getTargetJson(String target, String from, String until)", "full_signature": "public JsonNode getTargetJson(String target, String from, String until)", "class_method_signature": "GraphiteHttpClient.getTargetJson(String target, String from, String until)", "testcase": false, "constructor": false}, {"identifier": "getChart", "parameters": "(String target, int width, int height, String from, String to, LegendState legendState, AxesState axesState)", "modifiers": "public", "return": "byte[]", "signature": "byte[] getChart(String target, int width, int height, String from, String to, LegendState legendState, AxesState axesState)", "full_signature": "public byte[] getChart(String target, int width, int height, String from, String to, LegendState legendState, AxesState axesState)", "class_method_signature": "GraphiteHttpClient.getChart(String target, int width, int height, String from, String to, LegendState legendState, AxesState axesState)", "testcase": false, "constructor": false}, {"identifier": "getChart", "parameters": "(String target, int width, int height, String from, String to, LegendState legendState, AxesState axesState,\n            BigDecimal warnThreshold, BigDecimal errorThreshold)", "modifiers": "public", "return": "byte[]", "signature": "byte[] getChart(String target, int width, int height, String from, String to, LegendState legendState, AxesState axesState,\n            BigDecimal warnThreshold, BigDecimal errorThreshold)", "full_signature": "public byte[] getChart(String target, int width, int height, String from, String to, LegendState legendState, AxesState axesState,\n            BigDecimal warnThreshold, BigDecimal errorThreshold)", "class_method_signature": "GraphiteHttpClient.getChart(String target, int width, int height, String from, String to, LegendState legendState, AxesState axesState,\n            BigDecimal warnThreshold, BigDecimal errorThreshold)", "testcase": false, "constructor": false}, {"identifier": "createHttpClient", "parameters": "()", "modifiers": "private", "return": "HttpClient", "signature": "HttpClient createHttpClient()", "full_signature": "private HttpClient createHttpClient()", "class_method_signature": "GraphiteHttpClient.createHttpClient()", "testcase": false, "constructor": false}, {"identifier": "loadKeyStore", "parameters": "(String keyStorePath, String password)", "modifiers": "private", "return": "KeyStore", "signature": "KeyStore loadKeyStore(String keyStorePath, String password)", "full_signature": "private KeyStore loadKeyStore(String keyStorePath, String password)", "class_method_signature": "GraphiteHttpClient.loadKeyStore(String keyStorePath, String password)", "testcase": false, "constructor": false}, {"identifier": "createConnectionManager", "parameters": "()", "modifiers": "private", "return": "HttpClientConnectionManager", "signature": "HttpClientConnectionManager createConnectionManager()", "full_signature": "private HttpClientConnectionManager createConnectionManager()", "class_method_signature": "GraphiteHttpClient.createConnectionManager()", "testcase": false, "constructor": false}], "file": "seyren-core/src/main/java/com/seyren/core/util/graphite/GraphiteHttpClient.java"}, "focal_method": {"identifier": "getTargetJson", "parameters": "(String target)", "modifiers": "@Deprecated public", "return": "JsonNode", "body": "@Deprecated\n    public JsonNode getTargetJson(String target) throws Exception {\n        return getTargetJson(target, null, null);\n    }", "signature": "JsonNode getTargetJson(String target)", "full_signature": "@Deprecated public JsonNode getTargetJson(String target)", "class_method_signature": "GraphiteHttpClient.getTargetJson(String target)", "testcase": false, "constructor": false, "invocations": ["getTargetJson"]}, "repository": {"repo_id": 4167742, "url": "https://github.com/scobal/seyren", "language": "Java", "is_fork": false, "fork_count": 234, "stargazer_count": 869, "size": 1940, "license": "licensed"}}