{"test_class": {"identifier": "ElementTest", "superclass": "extends AbstractCacheTest", "interfaces": "", "fields": [{"original_string": "private static final Logger LOG = Logger.getLogger(ElementTest.class.getName());", "modifier": "private static final", "type": "Logger", "declarator": "LOG = Logger.getLogger(ElementTest.class.getName())", "var_name": "LOG"}], "file": "branches/ehcache-1.7-groups/core/src/test/java/net/sf/ehcache/ElementTest.java"}, "test_case": {"identifier": "testSerializationPerformanceByteArray", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testSerializationPerformanceByteArray() throws CacheException {\n        Serializable key = \"key\";\n\n        ByteArrayOutputStream bout = new ByteArrayOutputStream();\n        for (int j = 0; j < 10000; j++) {\n            try {\n                bout.write(\"abcdefghijklmnopqrstv1234567890\".getBytes());\n            } catch (IOException e) {\n                LOG.severe(\"This should not happen\");\n            }\n        }\n        byte[] value = bout.toByteArray();\n\n        Element element = new Element(key, value);\n        StopWatch stopWatch = new StopWatch();\n        for (int i = 0; i < 100; i++) {\n            element.getSerializedSize();\n        }\n        long elapsed = stopWatch.getElapsedTime() / 100;\n        LOG.info(\"In-memory size in bytes: \" + element.getSerializedSize()\n                + \" time to serialize in ms: \" + elapsed);\n        assertTrue(\"Large object clone takes more than than 100ms\", elapsed < 100);\n    }", "signature": "void testSerializationPerformanceByteArray()", "full_signature": "@Test public void testSerializationPerformanceByteArray()", "class_method_signature": "ElementTest.testSerializationPerformanceByteArray()", "testcase": true, "constructor": false, "invocations": ["write", "getBytes", "severe", "toByteArray", "getSerializedSize", "getElapsedTime", "info", "getSerializedSize", "assertTrue"]}, "focal_class": {"identifier": "Element", "superclass": "", "interfaces": "implements Serializable, Cloneable", "fields": [{"original_string": "private static final long serialVersionUID = 318529397738968752L;", "modifier": "private static final", "type": "long", "declarator": "serialVersionUID = 318529397738968752L", "var_name": "serialVersionUID"}, {"original_string": "private static final Logger LOG = Logger.getLogger(Element.class.getName());", "modifier": "private static final", "type": "Logger", "declarator": "LOG = Logger.getLogger(Element.class.getName())", "var_name": "LOG"}, {"original_string": "private static final long ONE_SECOND = 1000L;", "modifier": "private static final", "type": "long", "declarator": "ONE_SECOND = 1000L", "var_name": "ONE_SECOND"}, {"original_string": "private final Object key;", "modifier": "private final", "type": "Object", "declarator": "key", "var_name": "key"}, {"original_string": "private Object value;", "modifier": "private", "type": "Object", "declarator": "value", "var_name": "value"}, {"original_string": "private long version;", "modifier": "private", "type": "long", "declarator": "version", "var_name": "version"}, {"original_string": "private long creationTime;", "modifier": "private", "type": "long", "declarator": "creationTime", "var_name": "creationTime"}, {"original_string": "private long lastAccessTime;", "modifier": "private", "type": "long", "declarator": "lastAccessTime", "var_name": "lastAccessTime"}, {"original_string": "private long nextToLastAccessTime;", "modifier": "private", "type": "long", "declarator": "nextToLastAccessTime", "var_name": "nextToLastAccessTime"}, {"original_string": "private long hitCount;", "modifier": "private", "type": "long", "declarator": "hitCount", "var_name": "hitCount"}, {"original_string": "private int timeToLive;", "modifier": "private", "type": "int", "declarator": "timeToLive", "var_name": "timeToLive"}, {"original_string": "private int timeToIdle;", "modifier": "private", "type": "int", "declarator": "timeToIdle", "var_name": "timeToIdle"}, {"original_string": "private long lastUpdateTime;", "modifier": "private", "type": "long", "declarator": "lastUpdateTime", "var_name": "lastUpdateTime"}, {"original_string": "private boolean eternal;", "modifier": "private", "type": "boolean", "declarator": "eternal", "var_name": "eternal"}, {"original_string": "private boolean lifespanSet;", "modifier": "private", "type": "boolean", "declarator": "lifespanSet", "var_name": "lifespanSet"}, {"original_string": "private Set groupKeys;", "modifier": "private", "type": "Set", "declarator": "groupKeys", "var_name": "groupKeys"}], "methods": [{"identifier": "Element", "parameters": "(Serializable key, Serializable value, long version)", "modifiers": "public", "return": "", "signature": " Element(Serializable key, Serializable value, long version)", "full_signature": "public  Element(Serializable key, Serializable value, long version)", "class_method_signature": "Element.Element(Serializable key, Serializable value, long version)", "testcase": false, "constructor": true}, {"identifier": "Element", "parameters": "(Object key, Object value, long version)", "modifiers": "public", "return": "", "signature": " Element(Object key, Object value, long version)", "full_signature": "public  Element(Object key, Object value, long version)", "class_method_signature": "Element.Element(Object key, Object value, long version)", "testcase": false, "constructor": true}, {"identifier": "Element", "parameters": "(Object key, Object value, long version,\n                   long creationTime, long lastAccessTime,\n                   long nextToLastAccessTime, long lastUpdateTime,\n                   long hitCount)", "modifiers": "public", "return": "", "signature": " Element(Object key, Object value, long version,\n                   long creationTime, long lastAccessTime,\n                   long nextToLastAccessTime, long lastUpdateTime,\n                   long hitCount)", "full_signature": "public  Element(Object key, Object value, long version,\n                   long creationTime, long lastAccessTime,\n                   long nextToLastAccessTime, long lastUpdateTime,\n                   long hitCount)", "class_method_signature": "Element.Element(Object key, Object value, long version,\n                   long creationTime, long lastAccessTime,\n                   long nextToLastAccessTime, long lastUpdateTime,\n                   long hitCount)", "testcase": false, "constructor": true}, {"identifier": "Element", "parameters": "(Object key, Object value,\n                   Boolean eternal, Integer timeToIdleSeconds, Integer timeToLiveSeconds)", "modifiers": "public", "return": "", "signature": " Element(Object key, Object value,\n                   Boolean eternal, Integer timeToIdleSeconds, Integer timeToLiveSeconds)", "full_signature": "public  Element(Object key, Object value,\n                   Boolean eternal, Integer timeToIdleSeconds, Integer timeToLiveSeconds)", "class_method_signature": "Element.Element(Object key, Object value,\n                   Boolean eternal, Integer timeToIdleSeconds, Integer timeToLiveSeconds)", "testcase": false, "constructor": true}, {"identifier": "Element", "parameters": "(Serializable key, Serializable value)", "modifiers": "public", "return": "", "signature": " Element(Serializable key, Serializable value)", "full_signature": "public  Element(Serializable key, Serializable value)", "class_method_signature": "Element.Element(Serializable key, Serializable value)", "testcase": false, "constructor": true}, {"identifier": "Element", "parameters": "(Object key, Object value)", "modifiers": "public", "return": "", "signature": " Element(Object key, Object value)", "full_signature": "public  Element(Object key, Object value)", "class_method_signature": "Element.Element(Object key, Object value)", "testcase": false, "constructor": true}, {"identifier": "getKey", "parameters": "()", "modifiers": "public final", "return": "Serializable", "signature": "Serializable getKey()", "full_signature": "public final Serializable getKey()", "class_method_signature": "Element.getKey()", "testcase": false, "constructor": false}, {"identifier": "getObjectKey", "parameters": "()", "modifiers": "public final", "return": "Object", "signature": "Object getObjectKey()", "full_signature": "public final Object getObjectKey()", "class_method_signature": "Element.getObjectKey()", "testcase": false, "constructor": false}, {"identifier": "getValue", "parameters": "()", "modifiers": "public final", "return": "Serializable", "signature": "Serializable getValue()", "full_signature": "public final Serializable getValue()", "class_method_signature": "Element.getValue()", "testcase": false, "constructor": false}, {"identifier": "getObjectValue", "parameters": "()", "modifiers": "public final", "return": "Object", "signature": "Object getObjectValue()", "full_signature": "public final Object getObjectValue()", "class_method_signature": "Element.getObjectValue()", "testcase": false, "constructor": false}, {"identifier": "equals", "parameters": "(Object object)", "modifiers": "public final", "return": "boolean", "signature": "boolean equals(Object object)", "full_signature": "public final boolean equals(Object object)", "class_method_signature": "Element.equals(Object object)", "testcase": false, "constructor": false}, {"identifier": "setTimeToLive", "parameters": "(int timeToLiveSeconds)", "modifiers": "public", "return": "void", "signature": "void setTimeToLive(int timeToLiveSeconds)", "full_signature": "public void setTimeToLive(int timeToLiveSeconds)", "class_method_signature": "Element.setTimeToLive(int timeToLiveSeconds)", "testcase": false, "constructor": false}, {"identifier": "setTimeToIdle", "parameters": "(int timeToIdleSeconds)", "modifiers": "public", "return": "void", "signature": "void setTimeToIdle(int timeToIdleSeconds)", "full_signature": "public void setTimeToIdle(int timeToIdleSeconds)", "class_method_signature": "Element.setTimeToIdle(int timeToIdleSeconds)", "testcase": false, "constructor": false}, {"identifier": "hashCode", "parameters": "()", "modifiers": "public final", "return": "int", "signature": "int hashCode()", "full_signature": "public final int hashCode()", "class_method_signature": "Element.hashCode()", "testcase": false, "constructor": false}, {"identifier": "setVersion", "parameters": "(long version)", "modifiers": "public final", "return": "void", "signature": "void setVersion(long version)", "full_signature": "public final void setVersion(long version)", "class_method_signature": "Element.setVersion(long version)", "testcase": false, "constructor": false}, {"identifier": "getCreationTime", "parameters": "()", "modifiers": "public final", "return": "long", "signature": "long getCreationTime()", "full_signature": "public final long getCreationTime()", "class_method_signature": "Element.getCreationTime()", "testcase": false, "constructor": false}, {"identifier": "getLatestOfCreationAndUpdateTime", "parameters": "()", "modifiers": "public final", "return": "long", "signature": "long getLatestOfCreationAndUpdateTime()", "full_signature": "public final long getLatestOfCreationAndUpdateTime()", "class_method_signature": "Element.getLatestOfCreationAndUpdateTime()", "testcase": false, "constructor": false}, {"identifier": "setCreateTime", "parameters": "()", "modifiers": "public final", "return": "void", "signature": "void setCreateTime()", "full_signature": "public final void setCreateTime()", "class_method_signature": "Element.setCreateTime()", "testcase": false, "constructor": false}, {"identifier": "getVersion", "parameters": "()", "modifiers": "public final", "return": "long", "signature": "long getVersion()", "full_signature": "public final long getVersion()", "class_method_signature": "Element.getVersion()", "testcase": false, "constructor": false}, {"identifier": "getLastAccessTime", "parameters": "()", "modifiers": "public final", "return": "long", "signature": "long getLastAccessTime()", "full_signature": "public final long getLastAccessTime()", "class_method_signature": "Element.getLastAccessTime()", "testcase": false, "constructor": false}, {"identifier": "getNextToLastAccessTime", "parameters": "()", "modifiers": "public final", "return": "long", "signature": "long getNextToLastAccessTime()", "full_signature": "public final long getNextToLastAccessTime()", "class_method_signature": "Element.getNextToLastAccessTime()", "testcase": false, "constructor": false}, {"identifier": "getHitCount", "parameters": "()", "modifiers": "public final", "return": "long", "signature": "long getHitCount()", "full_signature": "public final long getHitCount()", "class_method_signature": "Element.getHitCount()", "testcase": false, "constructor": false}, {"identifier": "resetAccessStatistics", "parameters": "()", "modifiers": "public final", "return": "void", "signature": "void resetAccessStatistics()", "full_signature": "public final void resetAccessStatistics()", "class_method_signature": "Element.resetAccessStatistics()", "testcase": false, "constructor": false}, {"identifier": "updateAccessStatistics", "parameters": "()", "modifiers": "public final", "return": "void", "signature": "void updateAccessStatistics()", "full_signature": "public final void updateAccessStatistics()", "class_method_signature": "Element.updateAccessStatistics()", "testcase": false, "constructor": false}, {"identifier": "updateUpdateStatistics", "parameters": "()", "modifiers": "public final", "return": "void", "signature": "void updateUpdateStatistics()", "full_signature": "public final void updateUpdateStatistics()", "class_method_signature": "Element.updateUpdateStatistics()", "testcase": false, "constructor": false}, {"identifier": "toString", "parameters": "()", "modifiers": "public final", "return": "String", "signature": "String toString()", "full_signature": "public final String toString()", "class_method_signature": "Element.toString()", "testcase": false, "constructor": false}, {"identifier": "clone", "parameters": "()", "modifiers": "public final", "return": "Object", "signature": "Object clone()", "full_signature": "public final Object clone()", "class_method_signature": "Element.clone()", "testcase": false, "constructor": false}, {"identifier": "deepCopy", "parameters": "(Object oldValue)", "modifiers": "private", "return": "Object", "signature": "Object deepCopy(Object oldValue)", "full_signature": "private Object deepCopy(Object oldValue)", "class_method_signature": "Element.deepCopy(Object oldValue)", "testcase": false, "constructor": false}, {"identifier": "getSerializedSize", "parameters": "()", "modifiers": "public final", "return": "long", "signature": "long getSerializedSize()", "full_signature": "public final long getSerializedSize()", "class_method_signature": "Element.getSerializedSize()", "testcase": false, "constructor": false}, {"identifier": "isSerializable", "parameters": "()", "modifiers": "public final", "return": "boolean", "signature": "boolean isSerializable()", "full_signature": "public final boolean isSerializable()", "class_method_signature": "Element.isSerializable()", "testcase": false, "constructor": false}, {"identifier": "isKeySerializable", "parameters": "()", "modifiers": "public final", "return": "boolean", "signature": "boolean isKeySerializable()", "full_signature": "public final boolean isKeySerializable()", "class_method_signature": "Element.isKeySerializable()", "testcase": false, "constructor": false}, {"identifier": "getLastUpdateTime", "parameters": "()", "modifiers": "public", "return": "long", "signature": "long getLastUpdateTime()", "full_signature": "public long getLastUpdateTime()", "class_method_signature": "Element.getLastUpdateTime()", "testcase": false, "constructor": false}, {"identifier": "isExpired", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isExpired()", "full_signature": "public boolean isExpired()", "class_method_signature": "Element.isExpired()", "testcase": false, "constructor": false}, {"identifier": "getExpirationTime", "parameters": "()", "modifiers": "public", "return": "long", "signature": "long getExpirationTime()", "full_signature": "public long getExpirationTime()", "class_method_signature": "Element.getExpirationTime()", "testcase": false, "constructor": false}, {"identifier": "isEternal", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isEternal()", "full_signature": "public boolean isEternal()", "class_method_signature": "Element.isEternal()", "testcase": false, "constructor": false}, {"identifier": "setEternal", "parameters": "(boolean eternal)", "modifiers": "public", "return": "void", "signature": "void setEternal(boolean eternal)", "full_signature": "public void setEternal(boolean eternal)", "class_method_signature": "Element.setEternal(boolean eternal)", "testcase": false, "constructor": false}, {"identifier": "isLifespanSet", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isLifespanSet()", "full_signature": "public boolean isLifespanSet()", "class_method_signature": "Element.isLifespanSet()", "testcase": false, "constructor": false}, {"identifier": "getTimeToLive", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int getTimeToLive()", "full_signature": "public int getTimeToLive()", "class_method_signature": "Element.getTimeToLive()", "testcase": false, "constructor": false}, {"identifier": "getTimeToIdle", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int getTimeToIdle()", "full_signature": "public int getTimeToIdle()", "class_method_signature": "Element.getTimeToIdle()", "testcase": false, "constructor": false}, {"identifier": "getGroupKeys", "parameters": "()", "modifiers": "public", "return": "Set", "signature": "Set getGroupKeys()", "full_signature": "public Set getGroupKeys()", "class_method_signature": "Element.getGroupKeys()", "testcase": false, "constructor": false}, {"identifier": "setGroupKeys", "parameters": "(Set groupKeys)", "modifiers": "public", "return": "void", "signature": "void setGroupKeys(Set groupKeys)", "full_signature": "public void setGroupKeys(Set groupKeys)", "class_method_signature": "Element.setGroupKeys(Set groupKeys)", "testcase": false, "constructor": false}, {"identifier": "hasGroupKeys", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean hasGroupKeys()", "full_signature": "public boolean hasGroupKeys()", "class_method_signature": "Element.hasGroupKeys()", "testcase": false, "constructor": false}, {"identifier": "addGroupKey", "parameters": "(Object groupKey)", "modifiers": "public", "return": "boolean", "signature": "boolean addGroupKey(Object groupKey)", "full_signature": "public boolean addGroupKey(Object groupKey)", "class_method_signature": "Element.addGroupKey(Object groupKey)", "testcase": false, "constructor": false}, {"identifier": "removeGroupKey", "parameters": "(Object groupKey)", "modifiers": "public", "return": "boolean", "signature": "boolean removeGroupKey(Object groupKey)", "full_signature": "public boolean removeGroupKey(Object groupKey)", "class_method_signature": "Element.removeGroupKey(Object groupKey)", "testcase": false, "constructor": false}], "file": "branches/ehcache-1.7-groups/core/src/main/java/net/sf/ehcache/Element.java"}, "focal_method": {"identifier": "getSerializedSize", "parameters": "()", "modifiers": "public final", "return": "long", "body": "public final long getSerializedSize() {\n\n        if (!isSerializable()) {\n            return 0;\n        }\n        long size = 0;\n        ByteArrayOutputStream bout = new ByteArrayOutputStream();\n        ObjectOutputStream oos = null;\n        try {\n            oos = new ObjectOutputStream(bout);\n            oos.writeObject(this);\n            size = bout.size();\n            return size;\n        } catch (IOException e) {\n            LOG.fine(\"Error measuring element size for element with key \" + key + \". Cause was: \" + e.getMessage());\n        } finally {\n            try {\n                if (oos != null) {\n                    oos.close();\n                }\n            } catch (Exception e) {\n                LOG.severe(\"Error closing ObjectOutputStream\");\n            }\n        }\n\n        return size;\n    }", "signature": "long getSerializedSize()", "full_signature": "public final long getSerializedSize()", "class_method_signature": "Element.getSerializedSize()", "testcase": false, "constructor": false, "invocations": ["isSerializable", "writeObject", "size", "fine", "getMessage", "close", "severe"]}, "repository": {"repo_id": 10597460, "url": "https://github.com/svn2github/ehcache", "language": "Java", "is_fork": false, "fork_count": 25, "stargazer_count": 12, "size": 128373, "license": "licensed"}}