{"test_class": {"identifier": "DfltSamplerRepositoryServiceV2Test", "superclass": "", "interfaces": "", "fields": [{"original_string": "private DfltSamplerRepositoryServiceV2 repositoryService;", "modifier": "private", "type": "DfltSamplerRepositoryServiceV2", "declarator": "repositoryService", "var_name": "repositoryService"}, {"original_string": "private ClusteredInstanceFactory clusteredInstanceFactory;", "modifier": "private", "type": "ClusteredInstanceFactory", "declarator": "clusteredInstanceFactory", "var_name": "clusteredInstanceFactory"}, {"original_string": "private CacheManager cacheManager;", "modifier": "private", "type": "CacheManager", "declarator": "cacheManager", "var_name": "cacheManager"}], "file": "tags/ehcache-2.10.0-16-pipeline/management-ehcache-impl/management-ehcache-impl-v2/src/test/java/net/sf/ehcache/management/service/impl/DfltSamplerRepositoryServiceV2Test.java"}, "test_case": {"identifier": "testClearCacheDisablesNonStop", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testClearCacheDisablesNonStop() throws Exception {\n    repositoryService.clearCache(\"testCacheManager\", \"testCache1\");\n\n    verify(clusteredInstanceFactory, times(4)).enableNonStopForCurrentThread(anyBoolean());\n  }", "signature": "void testClearCacheDisablesNonStop()", "full_signature": "@Test public void testClearCacheDisablesNonStop()", "class_method_signature": "DfltSamplerRepositoryServiceV2Test.testClearCacheDisablesNonStop()", "testcase": true, "constructor": false, "invocations": ["clearCache", "enableNonStopForCurrentThread", "verify", "times", "anyBoolean"]}, "focal_class": {"identifier": "DfltSamplerRepositoryServiceV2", "superclass": "", "interfaces": "implements SamplerRepositoryServiceV2,\n    EntityResourceFactoryV2, CacheManagerServiceV2, CacheServiceV2, AgentServiceV2,\n    EventServiceV2", "fields": [{"original_string": "public static final String AGENCY = \"Ehcache\";", "modifier": "public static final", "type": "String", "declarator": "AGENCY = \"Ehcache\"", "var_name": "AGENCY"}, {"original_string": "final Set<EventListener> listeners = new CopyOnWriteArraySet<EventListener>();", "modifier": "final", "type": "Set<EventListener>", "declarator": "listeners = new CopyOnWriteArraySet<EventListener>()", "var_name": "listeners"}, {"original_string": "private final Map<String, SamplerRepoEntry> cacheManagerSamplerRepo = new HashMap<String, SamplerRepoEntry>();", "modifier": "private final", "type": "Map<String, SamplerRepoEntry>", "declarator": "cacheManagerSamplerRepo = new HashMap<String, SamplerRepoEntry>()", "var_name": "cacheManagerSamplerRepo"}, {"original_string": "private final ReadWriteLock cacheManagerSamplerRepoLock = new ReentrantReadWriteLock();", "modifier": "private final", "type": "ReadWriteLock", "declarator": "cacheManagerSamplerRepoLock = new ReentrantReadWriteLock()", "var_name": "cacheManagerSamplerRepoLock"}, {"original_string": "protected final ManagementRESTServiceConfiguration configuration;", "modifier": "protected final", "type": "ManagementRESTServiceConfiguration", "declarator": "configuration", "var_name": "configuration"}, {"original_string": "private final Map<String, PropertyChangeListener> configurationChangeListenerMap = new HashMap<String, PropertyChangeListener>();", "modifier": "private final", "type": "Map<String, PropertyChangeListener>", "declarator": "configurationChangeListenerMap = new HashMap<String, PropertyChangeListener>()", "var_name": "configurationChangeListenerMap"}, {"original_string": "private final RemoteAgentEndpointImpl remoteAgentEndpoint;", "modifier": "private final", "type": "RemoteAgentEndpointImpl", "declarator": "remoteAgentEndpoint", "var_name": "remoteAgentEndpoint"}], "methods": [{"identifier": "DfltSamplerRepositoryServiceV2", "parameters": "(ManagementRESTServiceConfiguration configuration,\n      RemoteAgentEndpointImpl remoteAgentEndpoint)", "modifiers": "public", "return": "", "signature": " DfltSamplerRepositoryServiceV2(ManagementRESTServiceConfiguration configuration,\n      RemoteAgentEndpointImpl remoteAgentEndpoint)", "full_signature": "public  DfltSamplerRepositoryServiceV2(ManagementRESTServiceConfiguration configuration,\n      RemoteAgentEndpointImpl remoteAgentEndpoint)", "class_method_signature": "DfltSamplerRepositoryServiceV2.DfltSamplerRepositoryServiceV2(ManagementRESTServiceConfiguration configuration,\n      RemoteAgentEndpointImpl remoteAgentEndpoint)", "testcase": false, "constructor": true}, {"identifier": "enableNonStopFor", "parameters": "(SamplerRepoEntry samplerRepoEntry, boolean enable)", "modifiers": "private static", "return": "void", "signature": "void enableNonStopFor(SamplerRepoEntry samplerRepoEntry, boolean enable)", "full_signature": "private static void enableNonStopFor(SamplerRepoEntry samplerRepoEntry, boolean enable)", "class_method_signature": "DfltSamplerRepositoryServiceV2.enableNonStopFor(SamplerRepoEntry samplerRepoEntry, boolean enable)", "testcase": false, "constructor": false}, {"identifier": "dispose", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void dispose()", "full_signature": "@Override public void dispose()", "class_method_signature": "DfltSamplerRepositoryServiceV2.dispose()", "testcase": false, "constructor": false}, {"identifier": "register", "parameters": "(CacheManager cacheManager)", "modifiers": "@Override public", "return": "void", "signature": "void register(CacheManager cacheManager)", "full_signature": "@Override public void register(CacheManager cacheManager)", "class_method_signature": "DfltSamplerRepositoryServiceV2.register(CacheManager cacheManager)", "testcase": false, "constructor": false}, {"identifier": "unregister", "parameters": "(CacheManager cacheManager)", "modifiers": "@Override public", "return": "void", "signature": "void unregister(CacheManager cacheManager)", "full_signature": "@Override public void unregister(CacheManager cacheManager)", "class_method_signature": "DfltSamplerRepositoryServiceV2.unregister(CacheManager cacheManager)", "testcase": false, "constructor": false}, {"identifier": "hasRegistered", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean hasRegistered()", "full_signature": "@Override public boolean hasRegistered()", "class_method_signature": "DfltSamplerRepositoryServiceV2.hasRegistered()", "testcase": false, "constructor": false}, {"identifier": "createCacheManagerEntities", "parameters": "(Set<String> cacheManagerNames,\n      Set<String> attributes)", "modifiers": "@Override public", "return": "ResponseEntityV2<CacheManagerEntityV2>", "signature": "ResponseEntityV2<CacheManagerEntityV2> createCacheManagerEntities(Set<String> cacheManagerNames,\n      Set<String> attributes)", "full_signature": "@Override public ResponseEntityV2<CacheManagerEntityV2> createCacheManagerEntities(Set<String> cacheManagerNames,\n      Set<String> attributes)", "class_method_signature": "DfltSamplerRepositoryServiceV2.createCacheManagerEntities(Set<String> cacheManagerNames,\n      Set<String> attributes)", "testcase": false, "constructor": false}, {"identifier": "createCacheManagerConfigEntities", "parameters": "(Set<String> cacheManagerNames)", "modifiers": "@Override public", "return": "ResponseEntityV2<CacheManagerConfigEntityV2>", "signature": "ResponseEntityV2<CacheManagerConfigEntityV2> createCacheManagerConfigEntities(Set<String> cacheManagerNames)", "full_signature": "@Override public ResponseEntityV2<CacheManagerConfigEntityV2> createCacheManagerConfigEntities(Set<String> cacheManagerNames)", "class_method_signature": "DfltSamplerRepositoryServiceV2.createCacheManagerConfigEntities(Set<String> cacheManagerNames)", "testcase": false, "constructor": false}, {"identifier": "createCacheEntities", "parameters": "(Set<String> cacheManagerNames,\n      Set<String> cacheNames,\n      Set<String> attributes)", "modifiers": "@Override public", "return": "ResponseEntityV2<CacheEntityV2>", "signature": "ResponseEntityV2<CacheEntityV2> createCacheEntities(Set<String> cacheManagerNames,\n      Set<String> cacheNames,\n      Set<String> attributes)", "full_signature": "@Override public ResponseEntityV2<CacheEntityV2> createCacheEntities(Set<String> cacheManagerNames,\n      Set<String> cacheNames,\n      Set<String> attributes)", "class_method_signature": "DfltSamplerRepositoryServiceV2.createCacheEntities(Set<String> cacheManagerNames,\n      Set<String> cacheNames,\n      Set<String> attributes)", "testcase": false, "constructor": false}, {"identifier": "createCacheConfigEntities", "parameters": "(Set<String> cacheManagerNames,\n      Set<String> cacheNames)", "modifiers": "@Override public", "return": "ResponseEntityV2<CacheConfigEntityV2>", "signature": "ResponseEntityV2<CacheConfigEntityV2> createCacheConfigEntities(Set<String> cacheManagerNames,\n      Set<String> cacheNames)", "full_signature": "@Override public ResponseEntityV2<CacheConfigEntityV2> createCacheConfigEntities(Set<String> cacheManagerNames,\n      Set<String> cacheNames)", "class_method_signature": "DfltSamplerRepositoryServiceV2.createCacheConfigEntities(Set<String> cacheManagerNames,\n      Set<String> cacheNames)", "testcase": false, "constructor": false}, {"identifier": "createCacheStatisticSampleEntity", "parameters": "(Set<String> cacheManagerNames,\n      Set<String> cacheNames,\n      Set<String> sampleNames)", "modifiers": "@Override public", "return": "ResponseEntityV2<CacheStatisticSampleEntityV2>", "signature": "ResponseEntityV2<CacheStatisticSampleEntityV2> createCacheStatisticSampleEntity(Set<String> cacheManagerNames,\n      Set<String> cacheNames,\n      Set<String> sampleNames)", "full_signature": "@Override public ResponseEntityV2<CacheStatisticSampleEntityV2> createCacheStatisticSampleEntity(Set<String> cacheManagerNames,\n      Set<String> cacheNames,\n      Set<String> sampleNames)", "class_method_signature": "DfltSamplerRepositoryServiceV2.createCacheStatisticSampleEntity(Set<String> cacheManagerNames,\n      Set<String> cacheNames,\n      Set<String> sampleNames)", "testcase": false, "constructor": false}, {"identifier": "createOrUpdateCache", "parameters": "(String cacheManagerName, String cacheName, CacheEntityV2 resource)", "modifiers": "@Override public", "return": "void", "signature": "void createOrUpdateCache(String cacheManagerName, String cacheName, CacheEntityV2 resource)", "full_signature": "@Override public void createOrUpdateCache(String cacheManagerName, String cacheName, CacheEntityV2 resource)", "class_method_signature": "DfltSamplerRepositoryServiceV2.createOrUpdateCache(String cacheManagerName, String cacheName, CacheEntityV2 resource)", "testcase": false, "constructor": false}, {"identifier": "clearCache", "parameters": "(String cacheManagerName, String cacheName)", "modifiers": "@Override public", "return": "void", "signature": "void clearCache(String cacheManagerName, String cacheName)", "full_signature": "@Override public void clearCache(String cacheManagerName, String cacheName)", "class_method_signature": "DfltSamplerRepositoryServiceV2.clearCache(String cacheManagerName, String cacheName)", "testcase": false, "constructor": false}, {"identifier": "updateCacheManager", "parameters": "(String cacheManagerName,\n      CacheManagerEntityV2 resource)", "modifiers": "@Override public", "return": "void", "signature": "void updateCacheManager(String cacheManagerName,\n      CacheManagerEntityV2 resource)", "full_signature": "@Override public void updateCacheManager(String cacheManagerName,\n      CacheManagerEntityV2 resource)", "class_method_signature": "DfltSamplerRepositoryServiceV2.updateCacheManager(String cacheManagerName,\n      CacheManagerEntityV2 resource)", "testcase": false, "constructor": false}, {"identifier": "executeQuery", "parameters": "(String cacheManagerName, String queryString)", "modifiers": "@Override public", "return": "ResponseEntityV2<QueryResultsEntityV2>", "signature": "ResponseEntityV2<QueryResultsEntityV2> executeQuery(String cacheManagerName, String queryString)", "full_signature": "@Override public ResponseEntityV2<QueryResultsEntityV2> executeQuery(String cacheManagerName, String queryString)", "class_method_signature": "DfltSamplerRepositoryServiceV2.executeQuery(String cacheManagerName, String queryString)", "testcase": false, "constructor": false}, {"identifier": "buildQueryResultsEntity", "parameters": "(String cacheManagerName, Object[][] data)", "modifiers": "private", "return": "Collection<QueryResultsEntityV2>", "signature": "Collection<QueryResultsEntityV2> buildQueryResultsEntity(String cacheManagerName, Object[][] data)", "full_signature": "private Collection<QueryResultsEntityV2> buildQueryResultsEntity(String cacheManagerName, Object[][] data)", "class_method_signature": "DfltSamplerRepositoryServiceV2.buildQueryResultsEntity(String cacheManagerName, Object[][] data)", "testcase": false, "constructor": false}, {"identifier": "checkForInvalidAttributes", "parameters": "(String cacheManagerName, CacheManagerEntityV2 resource)", "modifiers": "private", "return": "void", "signature": "void checkForInvalidAttributes(String cacheManagerName, CacheManagerEntityV2 resource)", "full_signature": "private void checkForInvalidAttributes(String cacheManagerName, CacheManagerEntityV2 resource)", "class_method_signature": "DfltSamplerRepositoryServiceV2.checkForInvalidAttributes(String cacheManagerName, CacheManagerEntityV2 resource)", "testcase": false, "constructor": false}, {"identifier": "checkForInvalidAttributes", "parameters": "(String cacheName, CacheEntityV2 resource)", "modifiers": "private static", "return": "void", "signature": "void checkForInvalidAttributes(String cacheName, CacheEntityV2 resource)", "full_signature": "private static void checkForInvalidAttributes(String cacheName, CacheEntityV2 resource)", "class_method_signature": "DfltSamplerRepositoryServiceV2.checkForInvalidAttributes(String cacheName, CacheEntityV2 resource)", "testcase": false, "constructor": false}, {"identifier": "getAgents", "parameters": "(Set<String> ids)", "modifiers": "@Override public", "return": "ResponseEntityV2<AgentEntityV2>", "signature": "ResponseEntityV2<AgentEntityV2> getAgents(Set<String> ids)", "full_signature": "@Override public ResponseEntityV2<AgentEntityV2> getAgents(Set<String> ids)", "class_method_signature": "DfltSamplerRepositoryServiceV2.getAgents(Set<String> ids)", "testcase": false, "constructor": false}, {"identifier": "buildAgentEntity", "parameters": "()", "modifiers": "private", "return": "AgentEntityV2", "signature": "AgentEntityV2 buildAgentEntity()", "full_signature": "private AgentEntityV2 buildAgentEntity()", "class_method_signature": "DfltSamplerRepositoryServiceV2.buildAgentEntity()", "testcase": false, "constructor": false}, {"identifier": "getAgentsMetadata", "parameters": "(Set<String> ids)", "modifiers": "@Override public", "return": "ResponseEntityV2<AgentMetadataEntityV2>", "signature": "ResponseEntityV2<AgentMetadataEntityV2> getAgentsMetadata(Set<String> ids)", "full_signature": "@Override public ResponseEntityV2<AgentMetadataEntityV2> getAgentsMetadata(Set<String> ids)", "class_method_signature": "DfltSamplerRepositoryServiceV2.getAgentsMetadata(Set<String> ids)", "testcase": false, "constructor": false}, {"identifier": "buildAgentMetadata", "parameters": "()", "modifiers": "private", "return": "AgentMetadataEntityV2", "signature": "AgentMetadataEntityV2 buildAgentMetadata()", "full_signature": "private AgentMetadataEntityV2 buildAgentMetadata()", "class_method_signature": "DfltSamplerRepositoryServiceV2.buildAgentMetadata()", "testcase": false, "constructor": false}, {"identifier": "isTsaBridged", "parameters": "()", "modifiers": "protected", "return": "boolean", "signature": "boolean isTsaBridged()", "full_signature": "protected boolean isTsaBridged()", "class_method_signature": "DfltSamplerRepositoryServiceV2.isTsaBridged()", "testcase": false, "constructor": false}, {"identifier": "isTsaSecured", "parameters": "()", "modifiers": "protected", "return": "boolean", "signature": "boolean isTsaSecured()", "full_signature": "protected boolean isTsaSecured()", "class_method_signature": "DfltSamplerRepositoryServiceV2.isTsaSecured()", "testcase": false, "constructor": false}, {"identifier": "sendCacheEvent", "parameters": "(Object newValue, String key, Ehcache cache)", "modifiers": "private", "return": "void", "signature": "void sendCacheEvent(Object newValue, String key, Ehcache cache)", "full_signature": "private void sendCacheEvent(Object newValue, String key, Ehcache cache)", "class_method_signature": "DfltSamplerRepositoryServiceV2.sendCacheEvent(Object newValue, String key, Ehcache cache)", "testcase": false, "constructor": false}, {"identifier": "sendCacheEvent", "parameters": "(Map<String, Object> attributes, Ehcache cache)", "modifiers": "private", "return": "void", "signature": "void sendCacheEvent(Map<String, Object> attributes, Ehcache cache)", "full_signature": "private void sendCacheEvent(Map<String, Object> attributes, Ehcache cache)", "class_method_signature": "DfltSamplerRepositoryServiceV2.sendCacheEvent(Map<String, Object> attributes, Ehcache cache)", "testcase": false, "constructor": false}, {"identifier": "sendCacheManagerEvent", "parameters": "(Map<String, Object> attributes, CacheManager cacheManager)", "modifiers": "private", "return": "void", "signature": "void sendCacheManagerEvent(Map<String, Object> attributes, CacheManager cacheManager)", "full_signature": "private void sendCacheManagerEvent(Map<String, Object> attributes, CacheManager cacheManager)", "class_method_signature": "DfltSamplerRepositoryServiceV2.sendCacheManagerEvent(Map<String, Object> attributes, CacheManager cacheManager)", "testcase": false, "constructor": false}, {"identifier": "registerEventListener", "parameters": "(EventListener listener, boolean localOnly)", "modifiers": "@Override public", "return": "void", "signature": "void registerEventListener(EventListener listener, boolean localOnly)", "full_signature": "@Override public void registerEventListener(EventListener listener, boolean localOnly)", "class_method_signature": "DfltSamplerRepositoryServiceV2.registerEventListener(EventListener listener, boolean localOnly)", "testcase": false, "constructor": false}, {"identifier": "unregisterEventListener", "parameters": "(EventListener listener)", "modifiers": "@Override public", "return": "void", "signature": "void unregisterEventListener(EventListener listener)", "full_signature": "@Override public void unregisterEventListener(EventListener listener)", "class_method_signature": "DfltSamplerRepositoryServiceV2.unregisterEventListener(EventListener listener)", "testcase": false, "constructor": false}], "file": "tags/ehcache-2.10.0-16-pipeline/management-ehcache-impl/management-ehcache-impl-v2/src/main/java/net/sf/ehcache/management/service/impl/DfltSamplerRepositoryServiceV2.java"}, "focal_method": {"identifier": "clearCache", "parameters": "(String cacheManagerName, String cacheName)", "modifiers": "@Override public", "return": "void", "body": "@Override\n  public void clearCache(String cacheManagerName, String cacheName) {\n    cacheManagerSamplerRepoLock.readLock().lock();\n\n    SamplerRepoEntry entry = cacheManagerSamplerRepo.get(cacheManagerName);\n    try {\n      enableNonStopFor(entry, false);\n      if (entry != null) {\n        entry.clearCache(cacheName);\n      }\n    } finally {\n      enableNonStopFor(entry, true);\n      cacheManagerSamplerRepoLock.readLock().unlock();\n    }\n  }", "signature": "void clearCache(String cacheManagerName, String cacheName)", "full_signature": "@Override public void clearCache(String cacheManagerName, String cacheName)", "class_method_signature": "DfltSamplerRepositoryServiceV2.clearCache(String cacheManagerName, String cacheName)", "testcase": false, "constructor": false, "invocations": ["lock", "readLock", "get", "enableNonStopFor", "clearCache", "enableNonStopFor", "unlock", "readLock"]}, "repository": {"repo_id": 10597460, "url": "https://github.com/svn2github/ehcache", "language": "Java", "is_fork": false, "fork_count": 25, "stargazer_count": 12, "size": 128373, "license": "licensed"}}