{"test_class": {"identifier": "EscapeLikeParametersFilterTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@InjectMockComponents\n    private EscapeLikeParametersFilter filter;", "modifier": "@InjectMockComponents\n    private", "type": "EscapeLikeParametersFilter", "declarator": "filter", "var_name": "filter"}], "file": "xwiki-platform-core/xwiki-platform-query/xwiki-platform-query-manager/src/test/java/org/xwiki/query/internal/EscapeLikeParametersFilterTest.java"}, "test_case": {"identifier": "filterWithNamedParameterAndNoEscape", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void filterWithNamedParameterAndNoEscape()\n    {\n        Query query = mock(Query.class);\n        when(query.getLanguage()).thenReturn(Query.HQL);\n        when(query.getStatement()).thenReturn(\"select a from b where ref like :reference and doc.space=:space\");\n\n        Map<String, Object> parameters = new LinkedHashMap<>();\n        parameters.put(\"reference\",\n            new DefaultQueryParameter(query).literal(\"wiki:space1.space\\\\.2.space!3.\").anyChars());\n        parameters.put(\"space\", \"wiki:space1.space\\\\.2.space!3.WebHome\");\n        when(query.getNamedParameters()).thenReturn(parameters);\n\n        Query filteredQuery = this.filter.filterQuery(query);\n        assertEquals(\"SELECT a FROM b WHERE ref LIKE :reference ESCAPE '!' AND doc.space = :space\",\n            filteredQuery.getStatement());\n        assertEquals(\"wiki:space1.space\\\\.2.space!!3.%\", filteredQuery.getNamedParameters().get(\"reference\"));\n        assertEquals(\"wiki:space1.space\\\\.2.space!3.WebHome\", filteredQuery.getNamedParameters().get(\"space\"));\n    }", "signature": "void filterWithNamedParameterAndNoEscape()", "full_signature": "@Test public void filterWithNamedParameterAndNoEscape()", "class_method_signature": "EscapeLikeParametersFilterTest.filterWithNamedParameterAndNoEscape()", "testcase": true, "constructor": false, "invocations": ["mock", "thenReturn", "when", "getLanguage", "thenReturn", "when", "getStatement", "put", "anyChars", "literal", "put", "thenReturn", "when", "getNamedParameters", "filterQuery", "assertEquals", "getStatement", "assertEquals", "get", "getNamedParameters", "assertEquals", "get", "getNamedParameters"]}, "focal_class": {"identifier": "EscapeLikeParametersFilter", "superclass": "", "interfaces": "implements QueryFilter", "fields": [], "methods": [{"identifier": "filterQuery", "parameters": "(Query query)", "modifiers": "@Override public", "return": "Query", "signature": "Query filterQuery(Query query)", "full_signature": "@Override public Query filterQuery(Query query)", "class_method_signature": "EscapeLikeParametersFilter.filterQuery(Query query)", "testcase": false, "constructor": false}, {"identifier": "filterStatement", "parameters": "(String statement, String language)", "modifiers": "@Override public", "return": "String", "signature": "String filterStatement(String statement, String language)", "full_signature": "@Override public String filterStatement(String statement, String language)", "class_method_signature": "EscapeLikeParametersFilter.filterStatement(String statement, String language)", "testcase": false, "constructor": false}, {"identifier": "filterResults", "parameters": "(List results)", "modifiers": "@Override public", "return": "List", "signature": "List filterResults(List results)", "full_signature": "@Override public List filterResults(List results)", "class_method_signature": "EscapeLikeParametersFilter.filterResults(List results)", "testcase": false, "constructor": false}], "file": "xwiki-platform-core/xwiki-platform-query/xwiki-platform-query-manager/src/main/java/org/xwiki/query/internal/EscapeLikeParametersFilter.java"}, "focal_method": {"identifier": "filterQuery", "parameters": "(Query query)", "modifiers": "@Override public", "return": "Query", "body": "@Override\n    public Query filterQuery(Query query)\n    {\n        return new EscapeLikeParametersQuery(query);\n    }", "signature": "Query filterQuery(Query query)", "full_signature": "@Override public Query filterQuery(Query query)", "class_method_signature": "EscapeLikeParametersFilter.filterQuery(Query query)", "testcase": false, "constructor": false, "invocations": []}, "repository": {"repo_id": 1463490, "url": "https://github.com/xwiki/xwiki-platform", "stars": 495, "created": "3/10/2011 1:26:41 PM +00:00", "updates": "2020-01-27T14:12:16+00:00", "fork": "False", "license": "licensed"}}