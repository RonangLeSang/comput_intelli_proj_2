{"test_class": {"identifier": "DefaultIconSetLoaderTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@InjectMockComponents\n    private DefaultIconSetLoader iconSetLoader;", "modifier": "@InjectMockComponents\n    private", "type": "DefaultIconSetLoader", "declarator": "iconSetLoader", "var_name": "iconSetLoader"}, {"original_string": "@MockComponent\n    private DocumentAccessBridge documentAccessBridge;", "modifier": "@MockComponent\n    private", "type": "DocumentAccessBridge", "declarator": "documentAccessBridge", "var_name": "documentAccessBridge"}, {"original_string": "@MockComponent\n    private WikiDescriptorManager wikiDescriptorManager;", "modifier": "@MockComponent\n    private", "type": "WikiDescriptorManager", "declarator": "wikiDescriptorManager", "var_name": "wikiDescriptorManager"}], "file": "xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-default/src/test/java/org/xwiki/icon/internal/DefaultIconSetLoaderTest.java"}, "test_case": {"identifier": "loadIconSetFromWikiDocumentWithException", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void loadIconSetFromWikiDocumentWithException() throws Exception\n    {\n        Exception exception = new Exception(\"test\");\n        when(documentAccessBridge.getDocumentInstance(any(DocumentReference.class))).thenThrow(exception);\n\n        // Test\n        Exception caughException = null;\n        try {\n            iconSetLoader.loadIconSet(new DocumentReference(\"a\", \"b\", \"c\"));\n        } catch (IconException e) {\n            caughException = e;\n        }\n\n        assertNotNull(caughException);\n        assert (caughException instanceof IconException);\n        assertEquals(exception, caughException.getCause());\n        assertEquals(\"Failed to load the IconSet [a:b.c].\", caughException.getMessage());\n    }", "signature": "void loadIconSetFromWikiDocumentWithException()", "full_signature": "@Test public void loadIconSetFromWikiDocumentWithException()", "class_method_signature": "DefaultIconSetLoaderTest.loadIconSetFromWikiDocumentWithException()", "testcase": true, "constructor": false, "invocations": ["thenThrow", "when", "getDocumentInstance", "any", "loadIconSet", "assertNotNull", "assertEquals", "getCause", "assertEquals", "getMessage"]}, "focal_class": {"identifier": "DefaultIconSetLoader", "superclass": "", "interfaces": "implements IconSetLoader", "fields": [{"original_string": "private static final String CSS_PROPERTY_NAME = \"xwiki.iconset.css\";", "modifier": "private static final", "type": "String", "declarator": "CSS_PROPERTY_NAME = \"xwiki.iconset.css\"", "var_name": "CSS_PROPERTY_NAME"}, {"original_string": "private static final String SSX_PROPERTY_NAME = \"xwiki.iconset.ssx\";", "modifier": "private static final", "type": "String", "declarator": "SSX_PROPERTY_NAME = \"xwiki.iconset.ssx\"", "var_name": "SSX_PROPERTY_NAME"}, {"original_string": "private static final String JSX_PROPERTY_NAME = \"xwiki.iconset.jsx\";", "modifier": "private static final", "type": "String", "declarator": "JSX_PROPERTY_NAME = \"xwiki.iconset.jsx\"", "var_name": "JSX_PROPERTY_NAME"}, {"original_string": "private static final String RENDER_WIKI_PROPERTY_NAME = \"xwiki.iconset.render.wiki\";", "modifier": "private static final", "type": "String", "declarator": "RENDER_WIKI_PROPERTY_NAME = \"xwiki.iconset.render.wiki\"", "var_name": "RENDER_WIKI_PROPERTY_NAME"}, {"original_string": "private static final String RENDER_HTML_PROPERTY_NAME = \"xwiki.iconset.render.html\";", "modifier": "private static final", "type": "String", "declarator": "RENDER_HTML_PROPERTY_NAME = \"xwiki.iconset.render.html\"", "var_name": "RENDER_HTML_PROPERTY_NAME"}, {"original_string": "private static final String ICON_TYPE_PROPERTY_NAME = \"xwiki.iconset.type\";", "modifier": "private static final", "type": "String", "declarator": "ICON_TYPE_PROPERTY_NAME = \"xwiki.iconset.type\"", "var_name": "ICON_TYPE_PROPERTY_NAME"}, {"original_string": "private static final String ICON_URL_PROPERTY_NAME = \"xwiki.iconset.icon.url\";", "modifier": "private static final", "type": "String", "declarator": "ICON_URL_PROPERTY_NAME = \"xwiki.iconset.icon.url\"", "var_name": "ICON_URL_PROPERTY_NAME"}, {"original_string": "private static final String ICON_CSS_CLASS_PROPERTY_NAME = \"xwiki.iconset.icon.cssClass\";", "modifier": "private static final", "type": "String", "declarator": "ICON_CSS_CLASS_PROPERTY_NAME = \"xwiki.iconset.icon.cssClass\"", "var_name": "ICON_CSS_CLASS_PROPERTY_NAME"}, {"original_string": "private static final String ERROR_MSG = \"Failed to load the IconSet [%s].\";", "modifier": "private static final", "type": "String", "declarator": "ERROR_MSG = \"Failed to load the IconSet [%s].\"", "var_name": "ERROR_MSG"}, {"original_string": "@Inject\n    private DocumentAccessBridge documentAccessBridge;", "modifier": "@Inject\n    private", "type": "DocumentAccessBridge", "declarator": "documentAccessBridge", "var_name": "documentAccessBridge"}, {"original_string": "@Inject\n    private WikiDescriptorManager wikiDescriptorManager;", "modifier": "@Inject\n    private", "type": "WikiDescriptorManager", "declarator": "wikiDescriptorManager", "var_name": "wikiDescriptorManager"}], "methods": [{"identifier": "loadIconSet", "parameters": "(DocumentReference iconSetReference)", "modifiers": "@Override public", "return": "IconSet", "signature": "IconSet loadIconSet(DocumentReference iconSetReference)", "full_signature": "@Override public IconSet loadIconSet(DocumentReference iconSetReference)", "class_method_signature": "DefaultIconSetLoader.loadIconSet(DocumentReference iconSetReference)", "testcase": false, "constructor": false}, {"identifier": "loadIconSet", "parameters": "(Reader input, String name)", "modifiers": "@Override public", "return": "IconSet", "signature": "IconSet loadIconSet(Reader input, String name)", "full_signature": "@Override public IconSet loadIconSet(Reader input, String name)", "class_method_signature": "DefaultIconSetLoader.loadIconSet(Reader input, String name)", "testcase": false, "constructor": false}, {"identifier": "setIconSetProperty", "parameters": "(IconSet iconSet, String key, String value)", "modifiers": "private", "return": "void", "signature": "void setIconSetProperty(IconSet iconSet, String key, String value)", "full_signature": "private void setIconSetProperty(IconSet iconSet, String key, String value)", "class_method_signature": "DefaultIconSetLoader.setIconSetProperty(IconSet iconSet, String key, String value)", "testcase": false, "constructor": false}], "file": "xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-default/src/main/java/org/xwiki/icon/internal/DefaultIconSetLoader.java"}, "focal_method": {"identifier": "loadIconSet", "parameters": "(DocumentReference iconSetReference)", "modifiers": "@Override public", "return": "IconSet", "body": "@Override\n    public IconSet loadIconSet(DocumentReference iconSetReference) throws IconException\n    {\n        try {\n            // Get the document\n            DocumentModelBridge doc = documentAccessBridge.getDocumentInstance(iconSetReference);\n            String content = doc.getContent();\n            // The name of the icon set is stored in the IconThemesCode.IconThemeClass XObject of the document\n            DocumentReference iconClassRef = new DocumentReference(wikiDescriptorManager.getCurrentWikiId(),\n                \"IconThemesCode\", \"IconThemeClass\");\n            String name = (String) documentAccessBridge.getProperty(iconSetReference, iconClassRef, \"name\");\n            // Load the icon set\n            return loadIconSet(new StringReader(content), name);\n        } catch (Exception e) {\n            throw new IconException(String.format(ERROR_MSG, iconSetReference), e);\n        }\n    }", "signature": "IconSet loadIconSet(DocumentReference iconSetReference)", "full_signature": "@Override public IconSet loadIconSet(DocumentReference iconSetReference)", "class_method_signature": "DefaultIconSetLoader.loadIconSet(DocumentReference iconSetReference)", "testcase": false, "constructor": false, "invocations": ["getDocumentInstance", "getContent", "getCurrentWikiId", "getProperty", "loadIconSet", "format"]}, "repository": {"repo_id": 1463490, "url": "https://github.com/xwiki/xwiki-platform", "stars": 495, "created": "3/10/2011 1:26:41 PM +00:00", "updates": "2020-01-27T14:12:16+00:00", "fork": "False", "license": "licensed"}}