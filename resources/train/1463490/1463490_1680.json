{"test_class": {"identifier": "AttachmentQueryFilterTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@InjectMockComponents\n    private AttachmentQueryFilter queryFilter;", "modifier": "@InjectMockComponents\n    private", "type": "AttachmentQueryFilter", "declarator": "queryFilter", "var_name": "queryFilter"}, {"original_string": "@MockComponent\n    @Named(\"current\")\n    private DocumentReferenceResolver<String> resolver;", "modifier": "@MockComponent\n    @Named(\"current\")\n    private", "type": "DocumentReferenceResolver<String>", "declarator": "resolver", "var_name": "resolver"}], "file": "xwiki-platform-core/xwiki-platform-query/xwiki-platform-query-manager/src/test/java/org/xwiki/query/internal/AttachmentQueryFilterTest.java"}, "test_case": {"identifier": "filterResultsWithOneColumn", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void filterResultsWithOneColumn()\n    {\n        List<Object> results = Arrays.asList(13, 27);\n        assertSame(results, this.queryFilter.filterResults(results));\n    }", "signature": "void filterResultsWithOneColumn()", "full_signature": "@Test public void filterResultsWithOneColumn()", "class_method_signature": "AttachmentQueryFilterTest.filterResultsWithOneColumn()", "testcase": true, "constructor": false, "invocations": ["asList", "assertSame", "filterResults"]}, "focal_class": {"identifier": "AttachmentQueryFilter", "superclass": "extends AbstractWhereQueryFilter", "interfaces": "", "fields": [{"original_string": "private static final String FROM_DOC_TABLE = \" XWikiDocument doc\";", "modifier": "private static final", "type": "String", "declarator": "FROM_DOC_TABLE = \" XWikiDocument doc\"", "var_name": "FROM_DOC_TABLE"}, {"original_string": "@Inject\n    @Named(\"current\")\n    private DocumentReferenceResolver<String> documentReferenceResolver;", "modifier": "@Inject\n    @Named(\"current\")\n    private", "type": "DocumentReferenceResolver<String>", "declarator": "documentReferenceResolver", "var_name": "documentReferenceResolver"}], "methods": [{"identifier": "filterStatement", "parameters": "(String statement, String language)", "modifiers": "@Override public", "return": "String", "signature": "String filterStatement(String statement, String language)", "full_signature": "@Override public String filterStatement(String statement, String language)", "class_method_signature": "AttachmentQueryFilter.filterStatement(String statement, String language)", "testcase": false, "constructor": false}, {"identifier": "filterResults", "parameters": "(List results)", "modifiers": "@Override public", "return": "List", "signature": "List filterResults(List results)", "full_signature": "@Override public List filterResults(List results)", "class_method_signature": "AttachmentQueryFilter.filterResults(List results)", "testcase": false, "constructor": false}], "file": "xwiki-platform-core/xwiki-platform-query/xwiki-platform-query-manager/src/main/java/org/xwiki/query/internal/AttachmentQueryFilter.java"}, "focal_method": {"identifier": "filterResults", "parameters": "(List results)", "modifiers": "@Override public", "return": "List", "body": "@Override\n    public List filterResults(List results)\n    {\n        // We need at least 2 columns in the select: the document full name and the attachment file name.\n        if (results.size() > 0 && results.get(0).getClass().isArray()) {\n            List<AttachmentReference> attachmentReferences = new ArrayList<>();\n            for (Object result : results) {\n                Object[] actualResult = (Object[]) result;\n                String documentFullName = String.valueOf(actualResult[0]);\n                String attachmentFileName = String.valueOf(actualResult[1]);\n                DocumentReference documentReference = this.documentReferenceResolver.resolve(documentFullName);\n                attachmentReferences.add(new AttachmentReference(attachmentFileName, documentReference));\n            }\n            return attachmentReferences;\n        }\n\n        return results;\n    }", "signature": "List filterResults(List results)", "full_signature": "@Override public List filterResults(List results)", "class_method_signature": "AttachmentQueryFilter.filterResults(List results)", "testcase": false, "constructor": false, "invocations": ["size", "isArray", "getClass", "get", "valueOf", "valueOf", "resolve", "add"]}, "repository": {"repo_id": 1463490, "url": "https://github.com/xwiki/xwiki-platform", "stars": 495, "created": "3/10/2011 1:26:41 PM +00:00", "updates": "2020-01-27T14:12:16+00:00", "fork": "False", "license": "licensed"}}