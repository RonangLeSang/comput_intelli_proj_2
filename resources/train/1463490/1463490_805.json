{"test_class": {"identifier": "RefactoringScriptServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@InjectMockComponents\n    private RefactoringScriptService refactoringScriptService;", "modifier": "@InjectMockComponents\n    private", "type": "RefactoringScriptService", "declarator": "refactoringScriptService", "var_name": "refactoringScriptService"}, {"original_string": "@MockComponent\n    private JobExecutor jobExecutor;", "modifier": "@MockComponent\n    private", "type": "JobExecutor", "declarator": "jobExecutor", "var_name": "jobExecutor"}, {"original_string": "@MockComponent\n    private RequestFactory requestFactory;", "modifier": "@MockComponent\n    private", "type": "RequestFactory", "declarator": "requestFactory", "var_name": "requestFactory"}, {"original_string": "@MockComponent\n    private EntityReferenceProvider defaultEntityReferenceProvider;", "modifier": "@MockComponent\n    private", "type": "EntityReferenceProvider", "declarator": "defaultEntityReferenceProvider", "var_name": "defaultEntityReferenceProvider"}, {"original_string": "@MockComponent\n    private Execution execution;", "modifier": "@MockComponent\n    private", "type": "Execution", "declarator": "execution", "var_name": "execution"}, {"original_string": "@MockComponent\n    private ContextualAuthorizationManager authorization;", "modifier": "@MockComponent\n    private", "type": "ContextualAuthorizationManager", "declarator": "authorization", "var_name": "authorization"}, {"original_string": "@MockComponent\n    private DocumentAccessBridge documentAccessBridge;", "modifier": "@MockComponent\n    private", "type": "DocumentAccessBridge", "declarator": "documentAccessBridge", "var_name": "documentAccessBridge"}, {"original_string": "@MockComponent\n    private RefactoringConfiguration configuration;", "modifier": "@MockComponent\n    private", "type": "RefactoringConfiguration", "declarator": "configuration", "var_name": "configuration"}, {"original_string": "private final ExecutionContext executionContext = new ExecutionContext();", "modifier": "private final", "type": "ExecutionContext", "declarator": "executionContext = new ExecutionContext()", "var_name": "executionContext"}], "file": "xwiki-platform-core/xwiki-platform-refactoring/xwiki-platform-refactoring-api/src/test/java/org/xwiki/refactoring/script/RefactoringScriptServiceTest.java"}, "test_case": {"identifier": "permanentlyDelete", "parameters": "()", "modifiers": "@Test", "return": "void", "body": "@Test\n    void permanentlyDelete() throws Exception\n    {\n        List<Long> documentIds = Arrays.asList(1L, 2L, 3L);\n        PermanentlyDeleteRequest permanentlyDeleteRequest = new PermanentlyDeleteRequest();\n        permanentlyDeleteRequest.setDeletedDocumentIds(documentIds);\n        when(this.requestFactory.createPermanentlyDeleteRequest(documentIds)).thenReturn(permanentlyDeleteRequest);\n\n        this.refactoringScriptService.permanentlyDelete(documentIds);\n        verify(this.requestFactory).createPermanentlyDeleteRequest(documentIds);\n        verify(this.jobExecutor).execute(RefactoringJobs.PERMANENTLY_DELETE, permanentlyDeleteRequest);\n    }", "signature": "void permanentlyDelete()", "full_signature": "@Test void permanentlyDelete()", "class_method_signature": "RefactoringScriptServiceTest.permanentlyDelete()", "testcase": true, "constructor": false, "invocations": ["asList", "setDeletedDocumentIds", "thenReturn", "when", "createPermanentlyDeleteRequest", "permanentlyDelete", "createPermanentlyDeleteRequest", "verify", "execute", "verify"]}, "focal_class": {"identifier": "RefactoringScriptService", "superclass": "", "interfaces": "implements ScriptService", "fields": [{"original_string": "private static final String REFACTORING_ERROR_KEY = String.format(\"scriptservice.%s.error\", RefactoringJobs.GROUP);", "modifier": "private static final", "type": "String", "declarator": "REFACTORING_ERROR_KEY = String.format(\"scriptservice.%s.error\", RefactoringJobs.GROUP)", "var_name": "REFACTORING_ERROR_KEY"}, {"original_string": "@Inject\n    private Execution execution;", "modifier": "@Inject\n    private", "type": "Execution", "declarator": "execution", "var_name": "execution"}, {"original_string": "@Inject\n    private JobExecutor jobExecutor;", "modifier": "@Inject\n    private", "type": "JobExecutor", "declarator": "jobExecutor", "var_name": "jobExecutor"}, {"original_string": "@Inject\n    private RefactoringConfiguration configuration;", "modifier": "@Inject\n    private", "type": "RefactoringConfiguration", "declarator": "configuration", "var_name": "configuration"}, {"original_string": "@Inject\n    private ContextualAuthorizationManager authorization;", "modifier": "@Inject\n    private", "type": "ContextualAuthorizationManager", "declarator": "authorization", "var_name": "authorization"}, {"original_string": "@Inject\n    private EntityReferenceProvider defaultEntityReferenceProvider;", "modifier": "@Inject\n    private", "type": "EntityReferenceProvider", "declarator": "defaultEntityReferenceProvider", "var_name": "defaultEntityReferenceProvider"}, {"original_string": "@Inject\n    private RequestFactory requestFactory;", "modifier": "@Inject\n    private", "type": "RequestFactory", "declarator": "requestFactory", "var_name": "requestFactory"}, {"original_string": "@Inject\n    private DocumentAccessBridge documentAccessBridge;", "modifier": "@Inject\n    private", "type": "DocumentAccessBridge", "declarator": "documentAccessBridge", "var_name": "documentAccessBridge"}], "methods": [{"identifier": "getRequestFactory", "parameters": "()", "modifiers": "public", "return": "RequestFactory", "signature": "RequestFactory getRequestFactory()", "full_signature": "public RequestFactory getRequestFactory()", "class_method_signature": "RefactoringScriptService.getRequestFactory()", "testcase": false, "constructor": false}, {"identifier": "move", "parameters": "(MoveRequest request)", "modifiers": "public", "return": "Job", "signature": "Job move(MoveRequest request)", "full_signature": "public Job move(MoveRequest request)", "class_method_signature": "RefactoringScriptService.move(MoveRequest request)", "testcase": false, "constructor": false}, {"identifier": "move", "parameters": "(Collection<EntityReference> sources, EntityReference destination)", "modifiers": "public", "return": "Job", "signature": "Job move(Collection<EntityReference> sources, EntityReference destination)", "full_signature": "public Job move(Collection<EntityReference> sources, EntityReference destination)", "class_method_signature": "RefactoringScriptService.move(Collection<EntityReference> sources, EntityReference destination)", "testcase": false, "constructor": false}, {"identifier": "move", "parameters": "(EntityReference source, EntityReference destination)", "modifiers": "public", "return": "Job", "signature": "Job move(EntityReference source, EntityReference destination)", "full_signature": "public Job move(EntityReference source, EntityReference destination)", "class_method_signature": "RefactoringScriptService.move(EntityReference source, EntityReference destination)", "testcase": false, "constructor": false}, {"identifier": "rename", "parameters": "(MoveRequest request)", "modifiers": "public", "return": "Job", "signature": "Job rename(MoveRequest request)", "full_signature": "public Job rename(MoveRequest request)", "class_method_signature": "RefactoringScriptService.rename(MoveRequest request)", "testcase": false, "constructor": false}, {"identifier": "rename", "parameters": "(EntityReference oldReference, EntityReference newReference)", "modifiers": "public", "return": "Job", "signature": "Job rename(EntityReference oldReference, EntityReference newReference)", "full_signature": "public Job rename(EntityReference oldReference, EntityReference newReference)", "class_method_signature": "RefactoringScriptService.rename(EntityReference oldReference, EntityReference newReference)", "testcase": false, "constructor": false}, {"identifier": "rename", "parameters": "(EntityReference reference, String newName)", "modifiers": "public", "return": "Job", "signature": "Job rename(EntityReference reference, String newName)", "full_signature": "public Job rename(EntityReference reference, String newName)", "class_method_signature": "RefactoringScriptService.rename(EntityReference reference, String newName)", "testcase": false, "constructor": false}, {"identifier": "convertToNestedDocument", "parameters": "(DocumentReference documentReference)", "modifiers": "public", "return": "Job", "signature": "Job convertToNestedDocument(DocumentReference documentReference)", "full_signature": "public Job convertToNestedDocument(DocumentReference documentReference)", "class_method_signature": "RefactoringScriptService.convertToNestedDocument(DocumentReference documentReference)", "testcase": false, "constructor": false}, {"identifier": "convertToTerminalDocument", "parameters": "(DocumentReference documentReference)", "modifiers": "public", "return": "Job", "signature": "Job convertToTerminalDocument(DocumentReference documentReference)", "full_signature": "public Job convertToTerminalDocument(DocumentReference documentReference)", "class_method_signature": "RefactoringScriptService.convertToTerminalDocument(DocumentReference documentReference)", "testcase": false, "constructor": false}, {"identifier": "copy", "parameters": "(CopyRequest request)", "modifiers": "public", "return": "Job", "signature": "Job copy(CopyRequest request)", "full_signature": "public Job copy(CopyRequest request)", "class_method_signature": "RefactoringScriptService.copy(CopyRequest request)", "testcase": false, "constructor": false}, {"identifier": "copy", "parameters": "(Collection<EntityReference> sources, EntityReference destination)", "modifiers": "public", "return": "Job", "signature": "Job copy(Collection<EntityReference> sources, EntityReference destination)", "full_signature": "public Job copy(Collection<EntityReference> sources, EntityReference destination)", "class_method_signature": "RefactoringScriptService.copy(Collection<EntityReference> sources, EntityReference destination)", "testcase": false, "constructor": false}, {"identifier": "copy", "parameters": "(EntityReference source, EntityReference destination)", "modifiers": "public", "return": "Job", "signature": "Job copy(EntityReference source, EntityReference destination)", "full_signature": "public Job copy(EntityReference source, EntityReference destination)", "class_method_signature": "RefactoringScriptService.copy(EntityReference source, EntityReference destination)", "testcase": false, "constructor": false}, {"identifier": "copyAs", "parameters": "(CopyRequest request)", "modifiers": "public", "return": "Job", "signature": "Job copyAs(CopyRequest request)", "full_signature": "public Job copyAs(CopyRequest request)", "class_method_signature": "RefactoringScriptService.copyAs(CopyRequest request)", "testcase": false, "constructor": false}, {"identifier": "copyAs", "parameters": "(EntityReference sourceReference, EntityReference copyReference)", "modifiers": "public", "return": "Job", "signature": "Job copyAs(EntityReference sourceReference, EntityReference copyReference)", "full_signature": "public Job copyAs(EntityReference sourceReference, EntityReference copyReference)", "class_method_signature": "RefactoringScriptService.copyAs(EntityReference sourceReference, EntityReference copyReference)", "testcase": false, "constructor": false}, {"identifier": "copyAs", "parameters": "(EntityReference reference, String copyName)", "modifiers": "public", "return": "Job", "signature": "Job copyAs(EntityReference reference, String copyName)", "full_signature": "public Job copyAs(EntityReference reference, String copyName)", "class_method_signature": "RefactoringScriptService.copyAs(EntityReference reference, String copyName)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(EntityRequest request)", "modifiers": "public", "return": "Job", "signature": "Job delete(EntityRequest request)", "full_signature": "public Job delete(EntityRequest request)", "class_method_signature": "RefactoringScriptService.delete(EntityRequest request)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(Collection<EntityReference> entityReferences)", "modifiers": "public", "return": "Job", "signature": "Job delete(Collection<EntityReference> entityReferences)", "full_signature": "public Job delete(Collection<EntityReference> entityReferences)", "class_method_signature": "RefactoringScriptService.delete(Collection<EntityReference> entityReferences)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(EntityReference entityReference)", "modifiers": "public", "return": "Job", "signature": "Job delete(EntityReference entityReference)", "full_signature": "public Job delete(EntityReference entityReference)", "class_method_signature": "RefactoringScriptService.delete(EntityReference entityReference)", "testcase": false, "constructor": false}, {"identifier": "create", "parameters": "(CreateRequest request)", "modifiers": "public", "return": "Job", "signature": "Job create(CreateRequest request)", "full_signature": "public Job create(CreateRequest request)", "class_method_signature": "RefactoringScriptService.create(CreateRequest request)", "testcase": false, "constructor": false}, {"identifier": "create", "parameters": "(Collection<EntityReference> entityReferences)", "modifiers": "public", "return": "Job", "signature": "Job create(Collection<EntityReference> entityReferences)", "full_signature": "public Job create(Collection<EntityReference> entityReferences)", "class_method_signature": "RefactoringScriptService.create(Collection<EntityReference> entityReferences)", "testcase": false, "constructor": false}, {"identifier": "create", "parameters": "(EntityReference entityReference)", "modifiers": "public", "return": "Job", "signature": "Job create(EntityReference entityReference)", "full_signature": "public Job create(EntityReference entityReference)", "class_method_signature": "RefactoringScriptService.create(EntityReference entityReference)", "testcase": false, "constructor": false}, {"identifier": "execute", "parameters": "(String type, AbstractCheckRightsRequest request)", "modifiers": "private", "return": "Job", "signature": "Job execute(String type, AbstractCheckRightsRequest request)", "full_signature": "private Job execute(String type, AbstractCheckRightsRequest request)", "class_method_signature": "RefactoringScriptService.execute(String type, AbstractCheckRightsRequest request)", "testcase": false, "constructor": false}, {"identifier": "getLastError", "parameters": "()", "modifiers": "public", "return": "Exception", "signature": "Exception getLastError()", "full_signature": "public Exception getLastError()", "class_method_signature": "RefactoringScriptService.getLastError()", "testcase": false, "constructor": false}, {"identifier": "setError", "parameters": "(Exception e)", "modifiers": "private", "return": "void", "signature": "void setError(Exception e)", "full_signature": "private void setError(Exception e)", "class_method_signature": "RefactoringScriptService.setError(Exception e)", "testcase": false, "constructor": false}, {"identifier": "restore", "parameters": "(RestoreRequest restoreRequest)", "modifiers": "public", "return": "Job", "signature": "Job restore(RestoreRequest restoreRequest)", "full_signature": "public Job restore(RestoreRequest restoreRequest)", "class_method_signature": "RefactoringScriptService.restore(RestoreRequest restoreRequest)", "testcase": false, "constructor": false}, {"identifier": "restore", "parameters": "(String batchId)", "modifiers": "public", "return": "Job", "signature": "Job restore(String batchId)", "full_signature": "public Job restore(String batchId)", "class_method_signature": "RefactoringScriptService.restore(String batchId)", "testcase": false, "constructor": false}, {"identifier": "restore", "parameters": "(List<Long> deletedDocumentIds)", "modifiers": "public", "return": "Job", "signature": "Job restore(List<Long> deletedDocumentIds)", "full_signature": "public Job restore(List<Long> deletedDocumentIds)", "class_method_signature": "RefactoringScriptService.restore(List<Long> deletedDocumentIds)", "testcase": false, "constructor": false}, {"identifier": "permanentlyDelete", "parameters": "(PermanentlyDeleteRequest request)", "modifiers": "public", "return": "Job", "signature": "Job permanentlyDelete(PermanentlyDeleteRequest request)", "full_signature": "public Job permanentlyDelete(PermanentlyDeleteRequest request)", "class_method_signature": "RefactoringScriptService.permanentlyDelete(PermanentlyDeleteRequest request)", "testcase": false, "constructor": false}, {"identifier": "permanentlyDelete", "parameters": "(String batchId)", "modifiers": "public", "return": "Job", "signature": "Job permanentlyDelete(String batchId)", "full_signature": "public Job permanentlyDelete(String batchId)", "class_method_signature": "RefactoringScriptService.permanentlyDelete(String batchId)", "testcase": false, "constructor": false}, {"identifier": "permanentlyDelete", "parameters": "(List<Long> deletedDocumentIds)", "modifiers": "public", "return": "Job", "signature": "Job permanentlyDelete(List<Long> deletedDocumentIds)", "full_signature": "public Job permanentlyDelete(List<Long> deletedDocumentIds)", "class_method_signature": "RefactoringScriptService.permanentlyDelete(List<Long> deletedDocumentIds)", "testcase": false, "constructor": false}, {"identifier": "changeDocumentAuthor", "parameters": "(DocumentReference oldAuthorReference, DocumentReference newAuthorReference)", "modifiers": "@Unstable public", "return": "Job", "signature": "Job changeDocumentAuthor(DocumentReference oldAuthorReference, DocumentReference newAuthorReference)", "full_signature": "@Unstable public Job changeDocumentAuthor(DocumentReference oldAuthorReference, DocumentReference newAuthorReference)", "class_method_signature": "RefactoringScriptService.changeDocumentAuthor(DocumentReference oldAuthorReference, DocumentReference newAuthorReference)", "testcase": false, "constructor": false}, {"identifier": "replaceUser", "parameters": "(ReplaceUserRequest request)", "modifiers": "@Unstable public", "return": "Job", "signature": "Job replaceUser(ReplaceUserRequest request)", "full_signature": "@Unstable public Job replaceUser(ReplaceUserRequest request)", "class_method_signature": "RefactoringScriptService.replaceUser(ReplaceUserRequest request)", "testcase": false, "constructor": false}, {"identifier": "isRecycleBinSkippingAllowed", "parameters": "()", "modifiers": "@Unstable public", "return": "boolean", "signature": "boolean isRecycleBinSkippingAllowed()", "full_signature": "@Unstable public boolean isRecycleBinSkippingAllowed()", "class_method_signature": "RefactoringScriptService.isRecycleBinSkippingAllowed()", "testcase": false, "constructor": false}], "file": "xwiki-platform-core/xwiki-platform-refactoring/xwiki-platform-refactoring-api/src/main/java/org/xwiki/refactoring/script/RefactoringScriptService.java"}, "focal_method": {"identifier": "permanentlyDelete", "parameters": "(PermanentlyDeleteRequest request)", "modifiers": "public", "return": "Job", "body": "public Job permanentlyDelete(PermanentlyDeleteRequest request)\n    {\n        return this.execute(RefactoringJobs.PERMANENTLY_DELETE, request);\n    }", "signature": "Job permanentlyDelete(PermanentlyDeleteRequest request)", "full_signature": "public Job permanentlyDelete(PermanentlyDeleteRequest request)", "class_method_signature": "RefactoringScriptService.permanentlyDelete(PermanentlyDeleteRequest request)", "testcase": false, "constructor": false, "invocations": ["execute"]}, "repository": {"repo_id": 1463490, "url": "https://github.com/xwiki/xwiki-platform", "stars": 495, "created": "3/10/2011 1:26:41 PM +00:00", "updates": "2020-01-27T14:12:16+00:00", "fork": "False", "license": "licensed"}}