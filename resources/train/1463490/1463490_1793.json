{"test_class": {"identifier": "XWikiAttachmentArchiveTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private XWikiAttachmentArchive archive = new XWikiAttachmentArchive();", "modifier": "private", "type": "XWikiAttachmentArchive", "declarator": "archive = new XWikiAttachmentArchive()", "var_name": "archive"}, {"original_string": "private XWikiAttachment attachment = mock(XWikiAttachment.class);", "modifier": "private", "type": "XWikiAttachment", "declarator": "attachment = mock(XWikiAttachment.class)", "var_name": "attachment"}], "file": "xwiki-platform-core/xwiki-platform-oldcore/src/test/java/com/xpn/xwiki/doc/XWikiAttachmentArchiveTest.java"}, "test_case": {"identifier": "getVersionsWhenThereIsNoHistory", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void getVersionsWhenThereIsNoHistory()\n    {\n        Version version = new Version(3, 4);\n        when(attachment.getRCSVersion()).thenReturn(version);\n\n        assertArrayEquals(new Version[] {version}, archive.getVersions());\n    }", "signature": "void getVersionsWhenThereIsNoHistory()", "full_signature": "@Test public void getVersionsWhenThereIsNoHistory()", "class_method_signature": "XWikiAttachmentArchiveTest.getVersionsWhenThereIsNoHistory()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "getRCSVersion", "assertArrayEquals", "getVersions"]}, "focal_class": {"identifier": "XWikiAttachmentArchive", "superclass": "", "interfaces": "implements Cloneable", "fields": [{"original_string": "private static final String GENERIC_EXCEPTION_MESSAGE =\n        \"Exception while manipulating the archive for attachment {0}\";", "modifier": "private static final", "type": "String", "declarator": "GENERIC_EXCEPTION_MESSAGE =\n        \"Exception while manipulating the archive for attachment {0}\"", "var_name": "GENERIC_EXCEPTION_MESSAGE"}, {"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(XWikiAttachmentArchive.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(XWikiAttachmentArchive.class)", "var_name": "LOGGER"}, {"original_string": "private XWikiAttachment attachment;", "modifier": "private", "type": "XWikiAttachment", "declarator": "attachment", "var_name": "attachment"}, {"original_string": "private Archive archive;", "modifier": "private", "type": "Archive", "declarator": "archive", "var_name": "archive"}], "methods": [{"identifier": "getId", "parameters": "()", "modifiers": "public", "return": "long", "signature": "long getId()", "full_signature": "public long getId()", "class_method_signature": "XWikiAttachmentArchive.getId()", "testcase": false, "constructor": false}, {"identifier": "setId", "parameters": "(final long id)", "modifiers": "public", "return": "void", "signature": "void setId(final long id)", "full_signature": "public void setId(final long id)", "class_method_signature": "XWikiAttachmentArchive.setId(final long id)", "testcase": false, "constructor": false}, {"identifier": "clone", "parameters": "()", "modifiers": "@Override public", "return": "Object", "signature": "Object clone()", "full_signature": "@Override public Object clone()", "class_method_signature": "XWikiAttachmentArchive.clone()", "testcase": false, "constructor": false}, {"identifier": "getRCSArchive", "parameters": "()", "modifiers": "@Deprecated public", "return": "Archive", "signature": "Archive getRCSArchive()", "full_signature": "@Deprecated public Archive getRCSArchive()", "class_method_signature": "XWikiAttachmentArchive.getRCSArchive()", "testcase": false, "constructor": false}, {"identifier": "setRCSArchive", "parameters": "(final Archive archive)", "modifiers": "@Deprecated public", "return": "void", "signature": "void setRCSArchive(final Archive archive)", "full_signature": "@Deprecated public void setRCSArchive(final Archive archive)", "class_method_signature": "XWikiAttachmentArchive.setRCSArchive(final Archive archive)", "testcase": false, "constructor": false}, {"identifier": "getArchiveAsString", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getArchiveAsString()", "full_signature": "public String getArchiveAsString()", "class_method_signature": "XWikiAttachmentArchive.getArchiveAsString()", "testcase": false, "constructor": false}, {"identifier": "getArchiveAsString", "parameters": "(final XWikiContext context)", "modifiers": "public", "return": "String", "signature": "String getArchiveAsString(final XWikiContext context)", "full_signature": "public String getArchiveAsString(final XWikiContext context)", "class_method_signature": "XWikiAttachmentArchive.getArchiveAsString(final XWikiContext context)", "testcase": false, "constructor": false}, {"identifier": "getArchive", "parameters": "()", "modifiers": "public", "return": "byte[]", "signature": "byte[] getArchive()", "full_signature": "public byte[] getArchive()", "class_method_signature": "XWikiAttachmentArchive.getArchive()", "testcase": false, "constructor": false}, {"identifier": "getArchive", "parameters": "(final XWikiContext context)", "modifiers": "public", "return": "byte[]", "signature": "byte[] getArchive(final XWikiContext context)", "full_signature": "public byte[] getArchive(final XWikiContext context)", "class_method_signature": "XWikiAttachmentArchive.getArchive(final XWikiContext context)", "testcase": false, "constructor": false}, {"identifier": "setArchive", "parameters": "(final byte[] data)", "modifiers": "public", "return": "void", "signature": "void setArchive(final byte[] data)", "full_signature": "public void setArchive(final byte[] data)", "class_method_signature": "XWikiAttachmentArchive.setArchive(final byte[] data)", "testcase": false, "constructor": false}, {"identifier": "setArchive", "parameters": "(final String data)", "modifiers": "public", "return": "void", "signature": "void setArchive(final String data)", "full_signature": "public void setArchive(final String data)", "class_method_signature": "XWikiAttachmentArchive.setArchive(final String data)", "testcase": false, "constructor": false}, {"identifier": "updateArchive", "parameters": "(final byte[] data, final XWikiContext context)", "modifiers": "@Deprecated public", "return": "void", "signature": "void updateArchive(final byte[] data, final XWikiContext context)", "full_signature": "@Deprecated public void updateArchive(final byte[] data, final XWikiContext context)", "class_method_signature": "XWikiAttachmentArchive.updateArchive(final byte[] data, final XWikiContext context)", "testcase": false, "constructor": false}, {"identifier": "updateArchive", "parameters": "(final XWikiContext context)", "modifiers": "public", "return": "void", "signature": "void updateArchive(final XWikiContext context)", "full_signature": "public void updateArchive(final XWikiContext context)", "class_method_signature": "XWikiAttachmentArchive.updateArchive(final XWikiContext context)", "testcase": false, "constructor": false}, {"identifier": "getAttachment", "parameters": "()", "modifiers": "public", "return": "XWikiAttachment", "signature": "XWikiAttachment getAttachment()", "full_signature": "public XWikiAttachment getAttachment()", "class_method_signature": "XWikiAttachmentArchive.getAttachment()", "testcase": false, "constructor": false}, {"identifier": "setAttachment", "parameters": "(final XWikiAttachment attachment)", "modifiers": "public", "return": "void", "signature": "void setAttachment(final XWikiAttachment attachment)", "full_signature": "public void setAttachment(final XWikiAttachment attachment)", "class_method_signature": "XWikiAttachmentArchive.setAttachment(final XWikiAttachment attachment)", "testcase": false, "constructor": false}, {"identifier": "getVersions", "parameters": "()", "modifiers": "public", "return": "Version[]", "signature": "Version[] getVersions()", "full_signature": "public Version[] getVersions()", "class_method_signature": "XWikiAttachmentArchive.getVersions()", "testcase": false, "constructor": false}, {"identifier": "getRevision", "parameters": "(final XWikiAttachment attachment, final String rev, final XWikiContext context)", "modifiers": "public", "return": "XWikiAttachment", "signature": "XWikiAttachment getRevision(final XWikiAttachment attachment, final String rev, final XWikiContext context)", "full_signature": "public XWikiAttachment getRevision(final XWikiAttachment attachment, final String rev, final XWikiContext context)", "class_method_signature": "XWikiAttachmentArchive.getRevision(final XWikiAttachment attachment, final String rev, final XWikiContext context)", "testcase": false, "constructor": false}], "file": "xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/doc/XWikiAttachmentArchive.java"}, "focal_method": {"identifier": "getVersions", "parameters": "()", "modifiers": "public", "return": "Version[]", "body": "public Version[] getVersions()\n    {\n        final Archive rcsArchive = getRCSArchive();\n\n        Version[] versions;\n        if (rcsArchive != null) {\n            final Node[] nodes = rcsArchive.changeLog();\n            versions = new Version[nodes.length];\n            for (int i = 0; i < nodes.length; i++) {\n                versions[i] = nodes[i].getVersion();\n            }\n        } else {\n            // No archive means there is no history and only the current version\n            versions = new Version[] { this.attachment.getRCSVersion() };\n        }\n\n        return versions;\n    }", "signature": "Version[] getVersions()", "full_signature": "public Version[] getVersions()", "class_method_signature": "XWikiAttachmentArchive.getVersions()", "testcase": false, "constructor": false, "invocations": ["getRCSArchive", "changeLog", "getVersion", "getRCSVersion"]}, "repository": {"repo_id": 1463490, "url": "https://github.com/xwiki/xwiki-platform", "stars": 495, "created": "3/10/2011 1:26:41 PM +00:00", "updates": "2020-01-27T14:12:16+00:00", "fork": "False", "license": "licensed"}}