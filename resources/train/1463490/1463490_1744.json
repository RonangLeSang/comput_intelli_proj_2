{"test_class": {"identifier": "ContextAndActionURLNormalizerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@InjectMockComponents\n    private ContextAndActionURLNormalizer normalizer;", "modifier": "@InjectMockComponents\n    private", "type": "ContextAndActionURLNormalizer", "declarator": "normalizer", "var_name": "normalizer"}, {"original_string": "@MockComponent\n    private Container container;", "modifier": "@MockComponent\n    private", "type": "Container", "declarator": "container", "var_name": "container"}, {"original_string": "private ServletEnvironment environment;", "modifier": "private", "type": "ServletEnvironment", "declarator": "environment", "var_name": "environment"}, {"original_string": "private ServletContext servletContext;", "modifier": "private", "type": "ServletContext", "declarator": "servletContext", "var_name": "servletContext"}, {"original_string": "private ExtendedURL testURL = new ExtendedURL(Arrays.asList(\"one\", \"two\"));", "modifier": "private", "type": "ExtendedURL", "declarator": "testURL = new ExtendedURL(Arrays.asList(\"one\", \"two\"))", "var_name": "testURL"}], "file": "xwiki-platform-core/xwiki-platform-url/xwiki-platform-url-container/src/test/java/org/xwiki/url/internal/container/ContextAndActionURLNormalizerTest.java"}, "test_case": {"identifier": "normalizeWithNoKnownContextPathThrowsException", "parameters": "()", "modifiers": "@Test", "return": "void", "body": "@Test\n    void normalizeWithNoKnownContextPathThrowsException()\n    {\n        Throwable expected = assertThrows(RuntimeException.class, () -> this.normalizer.normalize(this.testURL));\n        assertEquals(\"Failed to normalize the URL [/one/two] since the application's Servlet context couldn't be \"\n            + \"computed.\", expected.getMessage());\n    }", "signature": "void normalizeWithNoKnownContextPathThrowsException()", "full_signature": "@Test void normalizeWithNoKnownContextPathThrowsException()", "class_method_signature": "ContextAndActionURLNormalizerTest.normalizeWithNoKnownContextPathThrowsException()", "testcase": true, "constructor": false, "invocations": ["assertThrows", "normalize", "assertEquals", "getMessage"]}, "focal_class": {"identifier": "ContextAndActionURLNormalizer", "superclass": "", "interfaces": "implements URLNormalizer<ExtendedURL>, Initializable", "fields": [{"original_string": "private static final String URL_SEGMENT_DELIMITER = \"/\";", "modifier": "private static final", "type": "String", "declarator": "URL_SEGMENT_DELIMITER = \"/\"", "var_name": "URL_SEGMENT_DELIMITER"}, {"original_string": "private static final String IGNORED_MAPPING_CHARACTERS = \"/*\";", "modifier": "private static final", "type": "String", "declarator": "IGNORED_MAPPING_CHARACTERS = \"/*\"", "var_name": "IGNORED_MAPPING_CHARACTERS"}, {"original_string": "@Inject\n    private Container container;", "modifier": "@Inject\n    private", "type": "Container", "declarator": "container", "var_name": "container"}, {"original_string": "@Inject\n    private Environment environment;", "modifier": "@Inject\n    private", "type": "Environment", "declarator": "environment", "var_name": "environment"}, {"original_string": "private String defaultServletMapping = \"bin\";", "modifier": "private", "type": "String", "declarator": "defaultServletMapping = \"bin\"", "var_name": "defaultServletMapping"}, {"original_string": "private Collection<String> validServletMappings = new LinkedHashSet<>();", "modifier": "private", "type": "Collection<String>", "declarator": "validServletMappings = new LinkedHashSet<>()", "var_name": "validServletMappings"}], "methods": [{"identifier": "initialize", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void initialize()", "full_signature": "@Override public void initialize()", "class_method_signature": "ContextAndActionURLNormalizer.initialize()", "testcase": false, "constructor": false}, {"identifier": "normalize", "parameters": "(ExtendedURL partialURL)", "modifiers": "@Override public", "return": "ExtendedURL", "signature": "ExtendedURL normalize(ExtendedURL partialURL)", "full_signature": "@Override public ExtendedURL normalize(ExtendedURL partialURL)", "class_method_signature": "ContextAndActionURLNormalizer.normalize(ExtendedURL partialURL)", "testcase": false, "constructor": false}, {"identifier": "getContextPath", "parameters": "()", "modifiers": "protected", "return": "String", "signature": "String getContextPath()", "full_signature": "protected String getContextPath()", "class_method_signature": "ContextAndActionURLNormalizer.getContextPath()", "testcase": false, "constructor": false}, {"identifier": "getActionServletMapping", "parameters": "()", "modifiers": "protected", "return": "String", "signature": "String getActionServletMapping()", "full_signature": "protected String getActionServletMapping()", "class_method_signature": "ContextAndActionURLNormalizer.getActionServletMapping()", "testcase": false, "constructor": false}], "file": "xwiki-platform-core/xwiki-platform-url/xwiki-platform-url-container/src/main/java/org/xwiki/url/internal/container/ContextAndActionURLNormalizer.java"}, "focal_method": {"identifier": "normalize", "parameters": "(ExtendedURL partialURL)", "modifiers": "@Override public", "return": "ExtendedURL", "body": "@Override\n    public ExtendedURL normalize(ExtendedURL partialURL)\n    {\n        String contextPath = StringUtils.strip(getContextPath(), URL_SEGMENT_DELIMITER);\n        if (contextPath == null) {\n            throw new RuntimeException(String.format(\"Failed to normalize the URL [%s] since the \"\n                + \"application's Servlet context couldn't be computed.\", partialURL));\n        }\n        List<String> segments = new ArrayList<>();\n        if (StringUtils.isNotEmpty(contextPath)) {\n            segments.add(contextPath);\n        }\n\n        String servletPath = getActionServletMapping();\n        if (StringUtils.isNotEmpty(servletPath)) {\n            segments.add(servletPath);\n        }\n\n        segments.addAll(partialURL.getSegments());\n\n        return new ExtendedURL(segments, partialURL.getParameters());\n    }", "signature": "ExtendedURL normalize(ExtendedURL partialURL)", "full_signature": "@Override public ExtendedURL normalize(ExtendedURL partialURL)", "class_method_signature": "ContextAndActionURLNormalizer.normalize(ExtendedURL partialURL)", "testcase": false, "constructor": false, "invocations": ["strip", "getContextPath", "format", "isNotEmpty", "add", "getActionServletMapping", "isNotEmpty", "add", "addAll", "getSegments", "getParameters"]}, "repository": {"repo_id": 1463490, "url": "https://github.com/xwiki/xwiki-platform", "stars": 495, "created": "3/10/2011 1:26:41 PM +00:00", "updates": "2020-01-27T14:12:16+00:00", "fork": "False", "license": "licensed"}}