{"test_class": {"identifier": "DefaultSyncContextTest", "superclass": "extends AbstractExternalAuthTest", "interfaces": "", "fields": [{"original_string": "private UserManager userManager;", "modifier": "private", "type": "UserManager", "declarator": "userManager", "var_name": "userManager"}, {"original_string": "private ValueFactory valueFactory;", "modifier": "private", "type": "ValueFactory", "declarator": "valueFactory", "var_name": "valueFactory"}, {"original_string": "private DefaultSyncContext syncCtx;", "modifier": "private", "type": "DefaultSyncContext", "declarator": "syncCtx", "var_name": "syncCtx"}], "file": "oak-auth-external/src/test/java/org/apache/jackrabbit/oak/spi/security/authentication/external/basic/DefaultSyncContextTest.java"}, "test_case": {"identifier": "testIsSameIDPLocalUser", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testIsSameIDPLocalUser() throws Exception {\n        assertFalse(syncCtx.isSameIDP(getTestUser()));\n    }", "signature": "void testIsSameIDPLocalUser()", "full_signature": "@Test public void testIsSameIDPLocalUser()", "class_method_signature": "DefaultSyncContextTest.testIsSameIDPLocalUser()", "testcase": true, "constructor": false, "invocations": ["assertFalse", "isSameIDP", "getTestUser"]}, "focal_class": {"identifier": "DefaultSyncContext", "superclass": "", "interfaces": "implements SyncContext", "fields": [{"original_string": "private static final Logger log = LoggerFactory.getLogger(DefaultSyncContext.class);", "modifier": "private static final", "type": "Logger", "declarator": "log = LoggerFactory.getLogger(DefaultSyncContext.class)", "var_name": "log"}, {"original_string": "public static final String REP_EXTERNAL_ID = \"rep:externalId\";", "modifier": "public static final", "type": "String", "declarator": "REP_EXTERNAL_ID = \"rep:externalId\"", "var_name": "REP_EXTERNAL_ID"}, {"original_string": "public static final String REP_LAST_SYNCED = \"rep:lastSynced\";", "modifier": "public static final", "type": "String", "declarator": "REP_LAST_SYNCED = \"rep:lastSynced\"", "var_name": "REP_LAST_SYNCED"}, {"original_string": "protected final DefaultSyncConfig config;", "modifier": "protected final", "type": "DefaultSyncConfig", "declarator": "config", "var_name": "config"}, {"original_string": "protected final ExternalIdentityProvider idp;", "modifier": "protected final", "type": "ExternalIdentityProvider", "declarator": "idp", "var_name": "idp"}, {"original_string": "protected final UserManager userManager;", "modifier": "protected final", "type": "UserManager", "declarator": "userManager", "var_name": "userManager"}, {"original_string": "protected final ValueFactory valueFactory;", "modifier": "protected final", "type": "ValueFactory", "declarator": "valueFactory", "var_name": "valueFactory"}, {"original_string": "protected boolean keepMissing;", "modifier": "protected", "type": "boolean", "declarator": "keepMissing", "var_name": "keepMissing"}, {"original_string": "protected boolean forceUserSync;", "modifier": "protected", "type": "boolean", "declarator": "forceUserSync", "var_name": "forceUserSync"}, {"original_string": "protected boolean forceGroupSync;", "modifier": "protected", "type": "boolean", "declarator": "forceGroupSync", "var_name": "forceGroupSync"}, {"original_string": "protected final long now;", "modifier": "protected final", "type": "long", "declarator": "now", "var_name": "now"}, {"original_string": "protected final Value nowValue;", "modifier": "protected final", "type": "Value", "declarator": "nowValue", "var_name": "nowValue"}], "methods": [{"identifier": "DefaultSyncContext", "parameters": "(@NotNull DefaultSyncConfig config, @NotNull ExternalIdentityProvider idp, @NotNull UserManager userManager, @NotNull ValueFactory valueFactory)", "modifiers": "public", "return": "", "signature": " DefaultSyncContext(@NotNull DefaultSyncConfig config, @NotNull ExternalIdentityProvider idp, @NotNull UserManager userManager, @NotNull ValueFactory valueFactory)", "full_signature": "public  DefaultSyncContext(@NotNull DefaultSyncConfig config, @NotNull ExternalIdentityProvider idp, @NotNull UserManager userManager, @NotNull ValueFactory valueFactory)", "class_method_signature": "DefaultSyncContext.DefaultSyncContext(@NotNull DefaultSyncConfig config, @NotNull ExternalIdentityProvider idp, @NotNull UserManager userManager, @NotNull ValueFactory valueFactory)", "testcase": false, "constructor": true}, {"identifier": "createSyncedIdentity", "parameters": "(@Nullable Authorizable auth)", "modifiers": "@Nullable public static", "return": "DefaultSyncedIdentity", "signature": "DefaultSyncedIdentity createSyncedIdentity(@Nullable Authorizable auth)", "full_signature": "@Nullable public static DefaultSyncedIdentity createSyncedIdentity(@Nullable Authorizable auth)", "class_method_signature": "DefaultSyncContext.createSyncedIdentity(@Nullable Authorizable auth)", "testcase": false, "constructor": false}, {"identifier": "getIdentityRef", "parameters": "(@Nullable Authorizable auth)", "modifiers": "@Nullable public static", "return": "ExternalIdentityRef", "signature": "ExternalIdentityRef getIdentityRef(@Nullable Authorizable auth)", "full_signature": "@Nullable public static ExternalIdentityRef getIdentityRef(@Nullable Authorizable auth)", "class_method_signature": "DefaultSyncContext.getIdentityRef(@Nullable Authorizable auth)", "testcase": false, "constructor": false}, {"identifier": "joinPaths", "parameters": "(String... paths)", "modifiers": "public static", "return": "String", "signature": "String joinPaths(String... paths)", "full_signature": "public static String joinPaths(String... paths)", "class_method_signature": "DefaultSyncContext.joinPaths(String... paths)", "testcase": false, "constructor": false}, {"identifier": "close", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void close()", "full_signature": "@Override public void close()", "class_method_signature": "DefaultSyncContext.close()", "testcase": false, "constructor": false}, {"identifier": "isKeepMissing", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean isKeepMissing()", "full_signature": "@Override public boolean isKeepMissing()", "class_method_signature": "DefaultSyncContext.isKeepMissing()", "testcase": false, "constructor": false}, {"identifier": "setKeepMissing", "parameters": "(boolean keepMissing)", "modifiers": "@NotNull @Override public", "return": "SyncContext", "signature": "SyncContext setKeepMissing(boolean keepMissing)", "full_signature": "@NotNull @Override public SyncContext setKeepMissing(boolean keepMissing)", "class_method_signature": "DefaultSyncContext.setKeepMissing(boolean keepMissing)", "testcase": false, "constructor": false}, {"identifier": "isForceUserSync", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean isForceUserSync()", "full_signature": "@Override public boolean isForceUserSync()", "class_method_signature": "DefaultSyncContext.isForceUserSync()", "testcase": false, "constructor": false}, {"identifier": "setForceUserSync", "parameters": "(boolean forceUserSync)", "modifiers": "@NotNull @Override public", "return": "SyncContext", "signature": "SyncContext setForceUserSync(boolean forceUserSync)", "full_signature": "@NotNull @Override public SyncContext setForceUserSync(boolean forceUserSync)", "class_method_signature": "DefaultSyncContext.setForceUserSync(boolean forceUserSync)", "testcase": false, "constructor": false}, {"identifier": "isForceGroupSync", "parameters": "()", "modifiers": "@Override public", "return": "boolean", "signature": "boolean isForceGroupSync()", "full_signature": "@Override public boolean isForceGroupSync()", "class_method_signature": "DefaultSyncContext.isForceGroupSync()", "testcase": false, "constructor": false}, {"identifier": "setForceGroupSync", "parameters": "(boolean forceGroupSync)", "modifiers": "@Override @NotNull public", "return": "SyncContext", "signature": "SyncContext setForceGroupSync(boolean forceGroupSync)", "full_signature": "@Override @NotNull public SyncContext setForceGroupSync(boolean forceGroupSync)", "class_method_signature": "DefaultSyncContext.setForceGroupSync(boolean forceGroupSync)", "testcase": false, "constructor": false}, {"identifier": "sync", "parameters": "(@NotNull ExternalIdentity identity)", "modifiers": "@NotNull @Override public", "return": "SyncResult", "signature": "SyncResult sync(@NotNull ExternalIdentity identity)", "full_signature": "@NotNull @Override public SyncResult sync(@NotNull ExternalIdentity identity)", "class_method_signature": "DefaultSyncContext.sync(@NotNull ExternalIdentity identity)", "testcase": false, "constructor": false}, {"identifier": "sync", "parameters": "(@NotNull String id)", "modifiers": "@NotNull @Override public", "return": "SyncResult", "signature": "SyncResult sync(@NotNull String id)", "full_signature": "@NotNull @Override public SyncResult sync(@NotNull String id)", "class_method_signature": "DefaultSyncContext.sync(@NotNull String id)", "testcase": false, "constructor": false}, {"identifier": "handleMissingIdentity", "parameters": "(@NotNull String id,\n                                                        @NotNull Authorizable authorizable,\n                                                        @NotNull DebugTimer timer)", "modifiers": "private", "return": "DefaultSyncResultImpl", "signature": "DefaultSyncResultImpl handleMissingIdentity(@NotNull String id,\n                                                        @NotNull Authorizable authorizable,\n                                                        @NotNull DebugTimer timer)", "full_signature": "private DefaultSyncResultImpl handleMissingIdentity(@NotNull String id,\n                                                        @NotNull Authorizable authorizable,\n                                                        @NotNull DebugTimer timer)", "class_method_signature": "DefaultSyncContext.handleMissingIdentity(@NotNull String id,\n                                                        @NotNull Authorizable authorizable,\n                                                        @NotNull DebugTimer timer)", "testcase": false, "constructor": false}, {"identifier": "getAuthorizable", "parameters": "(@NotNull ExternalIdentity external, @NotNull Class<T> type)", "modifiers": "@Nullable protected", "return": "T", "signature": "T getAuthorizable(@NotNull ExternalIdentity external, @NotNull Class<T> type)", "full_signature": "@Nullable protected T getAuthorizable(@NotNull ExternalIdentity external, @NotNull Class<T> type)", "class_method_signature": "DefaultSyncContext.getAuthorizable(@NotNull ExternalIdentity external, @NotNull Class<T> type)", "testcase": false, "constructor": false}, {"identifier": "createUser", "parameters": "(@NotNull ExternalUser externalUser)", "modifiers": "@NotNull protected", "return": "User", "signature": "User createUser(@NotNull ExternalUser externalUser)", "full_signature": "@NotNull protected User createUser(@NotNull ExternalUser externalUser)", "class_method_signature": "DefaultSyncContext.createUser(@NotNull ExternalUser externalUser)", "testcase": false, "constructor": false}, {"identifier": "createGroup", "parameters": "(@NotNull ExternalGroup externalGroup)", "modifiers": "@NotNull protected", "return": "Group", "signature": "Group createGroup(@NotNull ExternalGroup externalGroup)", "full_signature": "@NotNull protected Group createGroup(@NotNull ExternalGroup externalGroup)", "class_method_signature": "DefaultSyncContext.createGroup(@NotNull ExternalGroup externalGroup)", "testcase": false, "constructor": false}, {"identifier": "setExternalId", "parameters": "(@NotNull Authorizable authorizable, @NotNull ExternalIdentity externalIdentity)", "modifiers": "private", "return": "void", "signature": "void setExternalId(@NotNull Authorizable authorizable, @NotNull ExternalIdentity externalIdentity)", "full_signature": "private void setExternalId(@NotNull Authorizable authorizable, @NotNull ExternalIdentity externalIdentity)", "class_method_signature": "DefaultSyncContext.setExternalId(@NotNull Authorizable authorizable, @NotNull ExternalIdentity externalIdentity)", "testcase": false, "constructor": false}, {"identifier": "syncUser", "parameters": "(@NotNull ExternalUser external, @NotNull User user)", "modifiers": "@NotNull protected", "return": "DefaultSyncResultImpl", "signature": "DefaultSyncResultImpl syncUser(@NotNull ExternalUser external, @NotNull User user)", "full_signature": "@NotNull protected DefaultSyncResultImpl syncUser(@NotNull ExternalUser external, @NotNull User user)", "class_method_signature": "DefaultSyncContext.syncUser(@NotNull ExternalUser external, @NotNull User user)", "testcase": false, "constructor": false}, {"identifier": "syncGroup", "parameters": "(@NotNull ExternalGroup external, @NotNull Group group)", "modifiers": "@NotNull protected", "return": "DefaultSyncResultImpl", "signature": "DefaultSyncResultImpl syncGroup(@NotNull ExternalGroup external, @NotNull Group group)", "full_signature": "@NotNull protected DefaultSyncResultImpl syncGroup(@NotNull ExternalGroup external, @NotNull Group group)", "class_method_signature": "DefaultSyncContext.syncGroup(@NotNull ExternalGroup external, @NotNull Group group)", "testcase": false, "constructor": false}, {"identifier": "syncExternalIdentity", "parameters": "(@NotNull ExternalIdentity external,\n                                      @NotNull Authorizable authorizable,\n                                      @NotNull DefaultSyncConfig.Authorizable config)", "modifiers": "private", "return": "void", "signature": "void syncExternalIdentity(@NotNull ExternalIdentity external,\n                                      @NotNull Authorizable authorizable,\n                                      @NotNull DefaultSyncConfig.Authorizable config)", "full_signature": "private void syncExternalIdentity(@NotNull ExternalIdentity external,\n                                      @NotNull Authorizable authorizable,\n                                      @NotNull DefaultSyncConfig.Authorizable config)", "class_method_signature": "DefaultSyncContext.syncExternalIdentity(@NotNull ExternalIdentity external,\n                                      @NotNull Authorizable authorizable,\n                                      @NotNull DefaultSyncConfig.Authorizable config)", "testcase": false, "constructor": false}, {"identifier": "syncMembership", "parameters": "(@NotNull ExternalIdentity external, @NotNull Authorizable auth, long depth)", "modifiers": "protected", "return": "void", "signature": "void syncMembership(@NotNull ExternalIdentity external, @NotNull Authorizable auth, long depth)", "full_signature": "protected void syncMembership(@NotNull ExternalIdentity external, @NotNull Authorizable auth, long depth)", "class_method_signature": "DefaultSyncContext.syncMembership(@NotNull ExternalIdentity external, @NotNull Authorizable auth, long depth)", "testcase": false, "constructor": false}, {"identifier": "applyMembership", "parameters": "(@NotNull Authorizable member, @NotNull Set<String> groups)", "modifiers": "protected", "return": "void", "signature": "void applyMembership(@NotNull Authorizable member, @NotNull Set<String> groups)", "full_signature": "protected void applyMembership(@NotNull Authorizable member, @NotNull Set<String> groups)", "class_method_signature": "DefaultSyncContext.applyMembership(@NotNull Authorizable member, @NotNull Set<String> groups)", "testcase": false, "constructor": false}, {"identifier": "syncProperties", "parameters": "(@NotNull ExternalIdentity ext, @NotNull Authorizable auth, @NotNull Map<String, String> mapping)", "modifiers": "protected", "return": "void", "signature": "void syncProperties(@NotNull ExternalIdentity ext, @NotNull Authorizable auth, @NotNull Map<String, String> mapping)", "full_signature": "protected void syncProperties(@NotNull ExternalIdentity ext, @NotNull Authorizable auth, @NotNull Map<String, String> mapping)", "class_method_signature": "DefaultSyncContext.syncProperties(@NotNull ExternalIdentity ext, @NotNull Authorizable auth, @NotNull Map<String, String> mapping)", "testcase": false, "constructor": false}, {"identifier": "isExpired", "parameters": "(@NotNull Authorizable authorizable)", "modifiers": "private", "return": "boolean", "signature": "boolean isExpired(@NotNull Authorizable authorizable)", "full_signature": "private boolean isExpired(@NotNull Authorizable authorizable)", "class_method_signature": "DefaultSyncContext.isExpired(@NotNull Authorizable authorizable)", "testcase": false, "constructor": false}, {"identifier": "isExpired", "parameters": "(@NotNull Authorizable auth, long expirationTime, @NotNull String type)", "modifiers": "protected", "return": "boolean", "signature": "boolean isExpired(@NotNull Authorizable auth, long expirationTime, @NotNull String type)", "full_signature": "protected boolean isExpired(@NotNull Authorizable auth, long expirationTime, @NotNull String type)", "class_method_signature": "DefaultSyncContext.isExpired(@NotNull Authorizable auth, long expirationTime, @NotNull String type)", "testcase": false, "constructor": false}, {"identifier": "createValue", "parameters": "(@Nullable Object v)", "modifiers": "@Nullable protected", "return": "Value", "signature": "Value createValue(@Nullable Object v)", "full_signature": "@Nullable protected Value createValue(@Nullable Object v)", "class_method_signature": "DefaultSyncContext.createValue(@Nullable Object v)", "testcase": false, "constructor": false}, {"identifier": "createValues", "parameters": "(@NotNull Collection<?> propValues)", "modifiers": "@Nullable protected", "return": "Value[]", "signature": "Value[] createValues(@NotNull Collection<?> propValues)", "full_signature": "@Nullable protected Value[] createValues(@NotNull Collection<?> propValues)", "class_method_signature": "DefaultSyncContext.createValues(@NotNull Collection<?> propValues)", "testcase": false, "constructor": false}, {"identifier": "isSameIDP", "parameters": "(@Nullable Authorizable auth)", "modifiers": "protected", "return": "boolean", "signature": "boolean isSameIDP(@Nullable Authorizable auth)", "full_signature": "protected boolean isSameIDP(@Nullable Authorizable auth)", "class_method_signature": "DefaultSyncContext.isSameIDP(@Nullable Authorizable auth)", "testcase": false, "constructor": false}, {"identifier": "isSameIDP", "parameters": "(@NotNull ExternalIdentityRef ref)", "modifiers": "protected", "return": "boolean", "signature": "boolean isSameIDP(@NotNull ExternalIdentityRef ref)", "full_signature": "protected boolean isSameIDP(@NotNull ExternalIdentityRef ref)", "class_method_signature": "DefaultSyncContext.isSameIDP(@NotNull ExternalIdentityRef ref)", "testcase": false, "constructor": false}, {"identifier": "debug", "parameters": "(@NotNull String mgs, @NotNull Object... objects)", "modifiers": "private static", "return": "void", "signature": "void debug(@NotNull String mgs, @NotNull Object... objects)", "full_signature": "private static void debug(@NotNull String mgs, @NotNull Object... objects)", "class_method_signature": "DefaultSyncContext.debug(@NotNull String mgs, @NotNull Object... objects)", "testcase": false, "constructor": false}], "file": "oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/basic/DefaultSyncContext.java"}, "focal_method": {"identifier": "isSameIDP", "parameters": "(@Nullable Authorizable auth)", "modifiers": "protected", "return": "boolean", "body": "protected boolean isSameIDP(@Nullable Authorizable auth) throws RepositoryException {\n        ExternalIdentityRef ref = getIdentityRef(auth);\n        return ref != null && idp.getName().equals(ref.getProviderName());\n    }", "signature": "boolean isSameIDP(@Nullable Authorizable auth)", "full_signature": "protected boolean isSameIDP(@Nullable Authorizable auth)", "class_method_signature": "DefaultSyncContext.isSameIDP(@Nullable Authorizable auth)", "testcase": false, "constructor": false, "invocations": ["getIdentityRef", "equals", "getName", "getProviderName"]}, "repository": {"repo_id": 3657930, "url": "https://github.com/apache/jackrabbit-oak", "stars": 291, "created": "3/8/2012 8:00:14 AM +00:00", "updates": "2020-01-27T10:53:13+00:00", "fork": "False", "license": "licensed"}}