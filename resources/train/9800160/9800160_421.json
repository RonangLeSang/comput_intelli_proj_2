{"test_class": {"identifier": "FileServiceClientTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Rule\n    public Recorder recorder = new Recorder();", "modifier": "@Rule\n    public", "type": "Recorder", "declarator": "recorder = new Recorder()", "var_name": "recorder"}, {"original_string": "private static final String BASE_URL_ISTI = \"http://ecloud.eanadev.org:8080/ecloud-service-mcs-rest-0.2-SNAPSHOT/\";", "modifier": "private static final", "type": "String", "declarator": "BASE_URL_ISTI = \"http://ecloud.eanadev.org:8080/ecloud-service-mcs-rest-0.2-SNAPSHOT/\"", "var_name": "BASE_URL_ISTI"}, {"original_string": "private static final String BASE_URL_LOCALHOST = \"http://localhost:8080/ecloud-service-mcs-rest-0.2-SNAPSHOT\";", "modifier": "private static final", "type": "String", "declarator": "BASE_URL_LOCALHOST = \"http://localhost:8080/ecloud-service-mcs-rest-0.2-SNAPSHOT\"", "var_name": "BASE_URL_LOCALHOST"}, {"original_string": "private static final String baseUrl = BASE_URL_ISTI;", "modifier": "private static final", "type": "String", "declarator": "baseUrl = BASE_URL_ISTI", "var_name": "baseUrl"}, {"original_string": "private static final String mediaType = \"text/plain\";", "modifier": "private static final", "type": "String", "declarator": "mediaType = \"text/plain\"", "var_name": "mediaType"}, {"original_string": "private static final String cloudId = \"7MZWQJF8P84\";", "modifier": "private static final", "type": "String", "declarator": "cloudId = \"7MZWQJF8P84\"", "var_name": "cloudId"}, {"original_string": "private static final String representationName = \"schema_000001\";", "modifier": "private static final", "type": "String", "declarator": "representationName = \"schema_000001\"", "var_name": "representationName"}, {"original_string": "private static final String version = \"de084210-a393-11e3-8614-50e549e85271\";", "modifier": "private static final", "type": "String", "declarator": "version = \"de084210-a393-11e3-8614-50e549e85271\"", "var_name": "version"}, {"original_string": "private static final String unmovableFileName = \"9007c26f-e29d-4924-9c49-8ff064484264\";", "modifier": "private static final", "type": "String", "declarator": "unmovableFileName = \"9007c26f-e29d-4924-9c49-8ff064484264\"", "var_name": "unmovableFileName"}, {"original_string": "private static final String deletedFileName = \"d64b423b-1018-4526-ab4b-3539261ff067\";", "modifier": "private static final", "type": "String", "declarator": "deletedFileName = \"d64b423b-1018-4526-ab4b-3539261ff067\"", "var_name": "deletedFileName"}, {"original_string": "private static final String modyfiedFileName = \"12c068c9-461d-484e-878f-099c5fca447f\";", "modifier": "private static final", "type": "String", "declarator": "modyfiedFileName = \"12c068c9-461d-484e-878f-099c5fca447f\"", "var_name": "modyfiedFileName"}, {"original_string": "private static final String UPLOADED_FILE_CONTENTS = \"Test_123456789_\";", "modifier": "private static final", "type": "String", "declarator": "UPLOADED_FILE_CONTENTS = \"Test_123456789_\"", "var_name": "UPLOADED_FILE_CONTENTS"}, {"original_string": "private static final String MODIFIED_FILE_CONTENTS = \"Test_123456789_123456\";", "modifier": "private static final", "type": "String", "declarator": "MODIFIED_FILE_CONTENTS = \"Test_123456789_123456\"", "var_name": "MODIFIED_FILE_CONTENTS"}, {"original_string": "private static final String TEST_CLOUD_ID = \"W3KBLNZDKNQ\";", "modifier": "private static final", "type": "String", "declarator": "TEST_CLOUD_ID = \"W3KBLNZDKNQ\"", "var_name": "TEST_CLOUD_ID"}, {"original_string": "private static final String PROVIDER_ID = \"Provider001\";", "modifier": "private static final", "type": "String", "declarator": "PROVIDER_ID = \"Provider001\"", "var_name": "PROVIDER_ID"}, {"original_string": "private static final String TEST_REPRESENTATION_NAME = \"schema66\";", "modifier": "private static final", "type": "String", "declarator": "TEST_REPRESENTATION_NAME = \"schema66\"", "var_name": "TEST_REPRESENTATION_NAME"}, {"original_string": "private static final String UPLOADED_FILE_NAME = \"9007c26f-e29d-4924-9c49-8ff064484264\";", "modifier": "private static final", "type": "String", "declarator": "UPLOADED_FILE_NAME = \"9007c26f-e29d-4924-9c49-8ff064484264\"", "var_name": "UPLOADED_FILE_NAME"}, {"original_string": "private static final String MODIFIED_FILE_NAME = \"06abeac8-6221-4399-be68-5be5ae8d1473\";", "modifier": "private static final", "type": "String", "declarator": "MODIFIED_FILE_NAME = \"06abeac8-6221-4399-be68-5be5ae8d1473\"", "var_name": "MODIFIED_FILE_NAME"}, {"original_string": "private static final String DELETED_FILE_NAME = \"b32b56e9-94d7-44b8-9010-7a1795ee7f95\";", "modifier": "private static final", "type": "String", "declarator": "DELETED_FILE_NAME = \"b32b56e9-94d7-44b8-9010-7a1795ee7f95\"", "var_name": "DELETED_FILE_NAME"}, {"original_string": "private static final String TEST_VERSION = \"e91d6300-431c-11e4-8576-00163eefc9c8\";", "modifier": "private static final", "type": "String", "declarator": "TEST_VERSION = \"e91d6300-431c-11e4-8576-00163eefc9c8\"", "var_name": "TEST_VERSION"}, {"original_string": "private static final String PERSISTED_VERSION = \"881c5c00-4259-11e4-9c35-00163eefc9c8\";", "modifier": "private static final", "type": "String", "declarator": "PERSISTED_VERSION = \"881c5c00-4259-11e4-9c35-00163eefc9c8\"", "var_name": "PERSISTED_VERSION"}, {"original_string": "private static Client client;", "modifier": "private static", "type": "Client", "declarator": "client", "var_name": "client"}, {"original_string": "private static final String filesPath = \"records/{\" + CLOUD_ID + \"}/representations/{\"\n            + REPRESENTATION_NAME + \"}/versions/{\" + VERSION + \"}/files\";", "modifier": "private static final", "type": "String", "declarator": "filesPath = \"records/{\" + CLOUD_ID + \"}/representations/{\"\n            + REPRESENTATION_NAME + \"}/versions/{\" + VERSION + \"}/files\"", "var_name": "filesPath"}, {"original_string": "private static final String filePath = filesPath + \"/{\" + FILE_NAME + \"}\";", "modifier": "private static final", "type": "String", "declarator": "filePath = filesPath + \"/{\" + FILE_NAME + \"}\"", "var_name": "filePath"}, {"original_string": "private static final String username = \"Cristiano\";", "modifier": "private static final", "type": "String", "declarator": "username = \"Cristiano\"", "var_name": "username"}, {"original_string": "private static final String password = \"Ronaldo\";", "modifier": "private static final", "type": "String", "declarator": "password = \"Ronaldo\"", "var_name": "password"}], "file": "service/mcs/driver/src/test/java/eu/europeana/cloud/mcs/driver/FileServiceClientTest.java"}, "test_case": {"identifier": "shouldThrowCannotModifyPersistentRepresentationExceptionForDeleteFile", "parameters": "()", "modifiers": "@Betamax(tape = \"files/shouldThrowCannotModifyPersistentRepresentationExceptionForDeleteFile\") @Test(expected = CannotModifyPersistentRepresentationException.class) public", "return": "void", "body": "@Betamax(tape = \"files/shouldThrowCannotModifyPersistentRepresentationExceptionForDeleteFile\")\n    @Test(expected = CannotModifyPersistentRepresentationException.class)\n    public void shouldThrowCannotModifyPersistentRepresentationExceptionForDeleteFile()\n            throws MCSException, UnsupportedEncodingException {\n\n        FileServiceClient instance = new FileServiceClient(baseUrl, username, password);\n\n        instance.deleteFile(TEST_CLOUD_ID, TEST_REPRESENTATION_NAME, \"eb5c0a60-4306-11e4-8576-00163eefc9c8\", DELETED_FILE_NAME);\n    }", "signature": "void shouldThrowCannotModifyPersistentRepresentationExceptionForDeleteFile()", "full_signature": "@Betamax(tape = \"files/shouldThrowCannotModifyPersistentRepresentationExceptionForDeleteFile\") @Test(expected = CannotModifyPersistentRepresentationException.class) public void shouldThrowCannotModifyPersistentRepresentationExceptionForDeleteFile()", "class_method_signature": "FileServiceClientTest.shouldThrowCannotModifyPersistentRepresentationExceptionForDeleteFile()", "testcase": true, "constructor": false, "invocations": ["deleteFile"]}, "focal_class": {"identifier": "FileServiceClient", "superclass": "extends MCSClient", "interfaces": "", "fields": [{"original_string": "private final Client client = ClientBuilder.newBuilder()\n            .register(JacksonFeature.class)\n            .register(MultiPartFeature.class)\n            .build();", "modifier": "private final", "type": "Client", "declarator": "client = ClientBuilder.newBuilder()\n            .register(JacksonFeature.class)\n            .register(MultiPartFeature.class)\n            .build()", "var_name": "client"}], "methods": [{"identifier": "FileServiceClient", "parameters": "(String baseUrl)", "modifiers": "public", "return": "", "signature": " FileServiceClient(String baseUrl)", "full_signature": "public  FileServiceClient(String baseUrl)", "class_method_signature": "FileServiceClient.FileServiceClient(String baseUrl)", "testcase": false, "constructor": true}, {"identifier": "FileServiceClient", "parameters": "(String baseUrl, final String username, final String password)", "modifiers": "public", "return": "", "signature": " FileServiceClient(String baseUrl, final String username, final String password)", "full_signature": "public  FileServiceClient(String baseUrl, final String username, final String password)", "class_method_signature": "FileServiceClient.FileServiceClient(String baseUrl, final String username, final String password)", "testcase": false, "constructor": true}, {"identifier": "FileServiceClient", "parameters": "(String baseUrl, final String authorizationHeader)", "modifiers": "public", "return": "", "signature": " FileServiceClient(String baseUrl, final String authorizationHeader)", "full_signature": "public  FileServiceClient(String baseUrl, final String authorizationHeader)", "class_method_signature": "FileServiceClient.FileServiceClient(String baseUrl, final String authorizationHeader)", "testcase": false, "constructor": true}, {"identifier": "FileServiceClient", "parameters": "(String baseUrl, final String authorizationHeader,\n                             final String username,  final String password,\n                             final int connectTimeoutInMillis, final int readTimeoutInMillis)", "modifiers": "public", "return": "", "signature": " FileServiceClient(String baseUrl, final String authorizationHeader,\n                             final String username,  final String password,\n                             final int connectTimeoutInMillis, final int readTimeoutInMillis)", "full_signature": "public  FileServiceClient(String baseUrl, final String authorizationHeader,\n                             final String username,  final String password,\n                             final int connectTimeoutInMillis, final int readTimeoutInMillis)", "class_method_signature": "FileServiceClient.FileServiceClient(String baseUrl, final String authorizationHeader,\n                             final String username,  final String password,\n                             final int connectTimeoutInMillis, final int readTimeoutInMillis)", "testcase": false, "constructor": true}, {"identifier": "getFile", "parameters": "(String cloudId, String representationName,\n                               String version, String fileName)", "modifiers": "public", "return": "InputStream", "signature": "InputStream getFile(String cloudId, String representationName,\n                               String version, String fileName)", "full_signature": "public InputStream getFile(String cloudId, String representationName,\n                               String version, String fileName)", "class_method_signature": "FileServiceClient.getFile(String cloudId, String representationName,\n                               String version, String fileName)", "testcase": false, "constructor": false}, {"identifier": "getFile", "parameters": "(String cloudId, String representationName, String version,\n                               String fileName, String range)", "modifiers": "public", "return": "InputStream", "signature": "InputStream getFile(String cloudId, String representationName, String version,\n                               String fileName, String range)", "full_signature": "public InputStream getFile(String cloudId, String representationName, String version,\n                               String fileName, String range)", "class_method_signature": "FileServiceClient.getFile(String cloudId, String representationName, String version,\n                               String fileName, String range)", "testcase": false, "constructor": false}, {"identifier": "getFile", "parameters": "(String fileUrl)", "modifiers": "public", "return": "InputStream", "signature": "InputStream getFile(String fileUrl)", "full_signature": "public InputStream getFile(String fileUrl)", "class_method_signature": "FileServiceClient.getFile(String fileUrl)", "testcase": false, "constructor": false}, {"identifier": "getFile", "parameters": "(String fileUrl,String key,String value)", "modifiers": "public", "return": "InputStream", "signature": "InputStream getFile(String fileUrl,String key,String value)", "full_signature": "public InputStream getFile(String fileUrl,String key,String value)", "class_method_signature": "FileServiceClient.getFile(String fileUrl,String key,String value)", "testcase": false, "constructor": false}, {"identifier": "uploadFile", "parameters": "(String cloudId, String representationName, String version,\n                          InputStream data, String mediaType, String expectedMd5)", "modifiers": "public", "return": "URI", "signature": "URI uploadFile(String cloudId, String representationName, String version,\n                          InputStream data, String mediaType, String expectedMd5)", "full_signature": "public URI uploadFile(String cloudId, String representationName, String version,\n                          InputStream data, String mediaType, String expectedMd5)", "class_method_signature": "FileServiceClient.uploadFile(String cloudId, String representationName, String version,\n                          InputStream data, String mediaType, String expectedMd5)", "testcase": false, "constructor": false}, {"identifier": "uploadFile", "parameters": "(String cloudId, String representationName, String version,\n                          InputStream data, String mediaType)", "modifiers": "public", "return": "URI", "signature": "URI uploadFile(String cloudId, String representationName, String version,\n                          InputStream data, String mediaType)", "full_signature": "public URI uploadFile(String cloudId, String representationName, String version,\n                          InputStream data, String mediaType)", "class_method_signature": "FileServiceClient.uploadFile(String cloudId, String representationName, String version,\n                          InputStream data, String mediaType)", "testcase": false, "constructor": false}, {"identifier": "uploadFile", "parameters": "(String cloudId, String representationName, String version, String fileName,\n                                InputStream data, String mediaType)", "modifiers": "public", "return": "URI", "signature": "URI uploadFile(String cloudId, String representationName, String version, String fileName,\n                                InputStream data, String mediaType)", "full_signature": "public URI uploadFile(String cloudId, String representationName, String version, String fileName,\n                                InputStream data, String mediaType)", "class_method_signature": "FileServiceClient.uploadFile(String cloudId, String representationName, String version, String fileName,\n                                InputStream data, String mediaType)", "testcase": false, "constructor": false}, {"identifier": "uploadFile", "parameters": "(String versionUrl, InputStream data, String mediaType)", "modifiers": "@Deprecated public", "return": "URI", "signature": "URI uploadFile(String versionUrl, InputStream data, String mediaType)", "full_signature": "@Deprecated public URI uploadFile(String versionUrl, InputStream data, String mediaType)", "class_method_signature": "FileServiceClient.uploadFile(String versionUrl, InputStream data, String mediaType)", "testcase": false, "constructor": false}, {"identifier": "modyfiyFile", "parameters": "(String cloudId, String representationName, String version,\n                           InputStream data, String mediaType, String fileName, String expectedMd5)", "modifiers": "public", "return": "URI", "signature": "URI modyfiyFile(String cloudId, String representationName, String version,\n                           InputStream data, String mediaType, String fileName, String expectedMd5)", "full_signature": "public URI modyfiyFile(String cloudId, String representationName, String version,\n                           InputStream data, String mediaType, String fileName, String expectedMd5)", "class_method_signature": "FileServiceClient.modyfiyFile(String cloudId, String representationName, String version,\n                           InputStream data, String mediaType, String fileName, String expectedMd5)", "testcase": false, "constructor": false}, {"identifier": "modifyFile", "parameters": "(String fileUrl, InputStream data, String mediaType)", "modifiers": "public", "return": "URI", "signature": "URI modifyFile(String fileUrl, InputStream data, String mediaType)", "full_signature": "public URI modifyFile(String fileUrl, InputStream data, String mediaType)", "class_method_signature": "FileServiceClient.modifyFile(String fileUrl, InputStream data, String mediaType)", "testcase": false, "constructor": false}, {"identifier": "deleteFile", "parameters": "(String cloudId, String representationName, String version, String fileName)", "modifiers": "public", "return": "void", "signature": "void deleteFile(String cloudId, String representationName, String version, String fileName)", "full_signature": "public void deleteFile(String cloudId, String representationName, String version, String fileName)", "class_method_signature": "FileServiceClient.deleteFile(String cloudId, String representationName, String version, String fileName)", "testcase": false, "constructor": false}, {"identifier": "getFileUri", "parameters": "(String cloudId, String representationName, String version, String fileName)", "modifiers": "public", "return": "URI", "signature": "URI getFileUri(String cloudId, String representationName, String version, String fileName)", "full_signature": "public URI getFileUri(String cloudId, String representationName, String version, String fileName)", "class_method_signature": "FileServiceClient.getFileUri(String cloudId, String representationName, String version, String fileName)", "testcase": false, "constructor": false}, {"identifier": "parseFileUri", "parameters": "(String uri)", "modifiers": "public static", "return": "Map<String, String>", "signature": "Map<String, String> parseFileUri(String uri)", "full_signature": "public static Map<String, String> parseFileUri(String uri)", "class_method_signature": "FileServiceClient.parseFileUri(String uri)", "testcase": false, "constructor": false}, {"identifier": "useAuthorizationHeader", "parameters": "(final String authorizationHeader)", "modifiers": "public", "return": "void", "signature": "void useAuthorizationHeader(final String authorizationHeader)", "full_signature": "public void useAuthorizationHeader(final String authorizationHeader)", "class_method_signature": "FileServiceClient.useAuthorizationHeader(final String authorizationHeader)", "testcase": false, "constructor": false}, {"identifier": "close", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void close()", "full_signature": "public void close()", "class_method_signature": "FileServiceClient.close()", "testcase": false, "constructor": false}, {"identifier": "closeResponse", "parameters": "(Response response)", "modifiers": "private", "return": "void", "signature": "void closeResponse(Response response)", "full_signature": "private void closeResponse(Response response)", "class_method_signature": "FileServiceClient.closeResponse(Response response)", "testcase": false, "constructor": false}, {"identifier": "closeOpenResources", "parameters": "(InputStream data, FormDataMultiPart multipart, Response response)", "modifiers": "private", "return": "void", "signature": "void closeOpenResources(InputStream data, FormDataMultiPart multipart, Response response)", "full_signature": "private void closeOpenResources(InputStream data, FormDataMultiPart multipart, Response response)", "class_method_signature": "FileServiceClient.closeOpenResources(InputStream data, FormDataMultiPart multipart, Response response)", "testcase": false, "constructor": false}, {"identifier": "handleResponse", "parameters": "(String expectedMd5, Response response, int expectedStatusCode)", "modifiers": "private", "return": "URI", "signature": "URI handleResponse(String expectedMd5, Response response, int expectedStatusCode)", "full_signature": "private URI handleResponse(String expectedMd5, Response response, int expectedStatusCode)", "class_method_signature": "FileServiceClient.handleResponse(String expectedMd5, Response response, int expectedStatusCode)", "testcase": false, "constructor": false}, {"identifier": "handleReadFileResponse", "parameters": "(Response response)", "modifiers": "private", "return": "InputStream", "signature": "InputStream handleReadFileResponse(Response response)", "full_signature": "private InputStream handleReadFileResponse(Response response)", "class_method_signature": "FileServiceClient.handleReadFileResponse(Response response)", "testcase": false, "constructor": false}, {"identifier": "copiedInputStream", "parameters": "(InputStream originIS)", "modifiers": "private", "return": "InputStream", "signature": "InputStream copiedInputStream(InputStream originIS)", "full_signature": "private InputStream copiedInputStream(InputStream originIS)", "class_method_signature": "FileServiceClient.copiedInputStream(InputStream originIS)", "testcase": false, "constructor": false}], "file": "service/mcs/driver/src/main/java/eu/europeana/cloud/mcs/driver/FileServiceClient.java"}, "focal_method": {"identifier": "deleteFile", "parameters": "(String cloudId, String representationName, String version, String fileName)", "modifiers": "public", "return": "void", "body": "public void deleteFile(String cloudId, String representationName, String version, String fileName) throws MCSException {\n\n        WebTarget target = client\n                .target(baseUrl)\n                .path(FILE_RESOURCE)\n                .resolveTemplate(CLOUD_ID, cloudId)\n                .resolveTemplate(REPRESENTATION_NAME, representationName)\n                .resolveTemplate(VERSION, version)\n                .resolveTemplate(FILE_NAME, fileName);\n\n        Response response = null;\n        try {\n            response = target.request().delete();\n            if (response.getStatus() != Response.Status.NO_CONTENT.getStatusCode()) {\n                ErrorInfo errorInfo = response.readEntity(ErrorInfo.class);\n                throw MCSExceptionProvider.generateException(errorInfo);\n            }\n        } finally {\n            closeResponse(response);\n        }\n    }", "signature": "void deleteFile(String cloudId, String representationName, String version, String fileName)", "full_signature": "public void deleteFile(String cloudId, String representationName, String version, String fileName)", "class_method_signature": "FileServiceClient.deleteFile(String cloudId, String representationName, String version, String fileName)", "testcase": false, "constructor": false, "invocations": ["resolveTemplate", "resolveTemplate", "resolveTemplate", "resolveTemplate", "path", "target", "delete", "request", "getStatus", "getStatusCode", "readEntity", "generateException", "closeResponse"]}, "repository": {"repo_id": 9800160, "url": "https://github.com/europeana/Europeana-Cloud", "stars": 13, "created": "5/1/2013 9:10:46 PM +00:00", "updates": "2020-01-24T10:33:33+00:00", "fork": "False", "license": "licensed"}}