{"test_class": {"identifier": "FormSubmissionRouterTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Mock\n    private AllFormSubmissions formSubmissionsRepository;", "modifier": "@Mock\n    private", "type": "AllFormSubmissions", "declarator": "formSubmissionsRepository", "var_name": "formSubmissionsRepository"}, {"original_string": "@Mock\n    private ECRegistrationHandler ecRegistrationHandler;", "modifier": "@Mock\n    private", "type": "ECRegistrationHandler", "declarator": "ecRegistrationHandler", "var_name": "ecRegistrationHandler"}, {"original_string": "@Mock\n    private FPComplicationsHandler fpComplicationsHandler;", "modifier": "@Mock\n    private", "type": "FPComplicationsHandler", "declarator": "fpComplicationsHandler", "var_name": "fpComplicationsHandler"}, {"original_string": "@Mock\n    private FPChangeHandler fpChangeHandler;", "modifier": "@Mock\n    private", "type": "FPChangeHandler", "declarator": "fpChangeHandler", "var_name": "fpChangeHandler"}, {"original_string": "@Mock\n    private RenewFPProductHandler renewFPProductHandler;", "modifier": "@Mock\n    private", "type": "RenewFPProductHandler", "declarator": "renewFPProductHandler", "var_name": "renewFPProductHandler"}, {"original_string": "@Mock\n    private FPFollowupHandler fpFollowupHandler;", "modifier": "@Mock\n    private", "type": "FPFollowupHandler", "declarator": "fpFollowupHandler", "var_name": "fpFollowupHandler"}, {"original_string": "@Mock\n    private FPReferralFollowupHandler fpReferralFollowupHandler;", "modifier": "@Mock\n    private", "type": "FPReferralFollowupHandler", "declarator": "fpReferralFollowupHandler", "var_name": "fpReferralFollowupHandler"}, {"original_string": "@Mock\n    private ECCloseHandler ecCloseHandler;", "modifier": "@Mock\n    private", "type": "ECCloseHandler", "declarator": "ecCloseHandler", "var_name": "ecCloseHandler"}, {"original_string": "@Mock\n    private ANCRegistrationHandler ancRegistrationHandler;", "modifier": "@Mock\n    private", "type": "ANCRegistrationHandler", "declarator": "ancRegistrationHandler", "var_name": "ancRegistrationHandler"}, {"original_string": "@Mock\n    private ANCRegistrationOAHandler ancRegistrationOAHandler;", "modifier": "@Mock\n    private", "type": "ANCRegistrationOAHandler", "declarator": "ancRegistrationOAHandler", "var_name": "ancRegistrationOAHandler"}, {"original_string": "@Mock\n    private ANCVisitHandler ancVisitHandler;", "modifier": "@Mock\n    private", "type": "ANCVisitHandler", "declarator": "ancVisitHandler", "var_name": "ancVisitHandler"}, {"original_string": "@Mock\n    private ANCCloseHandler ancCloseHandler;", "modifier": "@Mock\n    private", "type": "ANCCloseHandler", "declarator": "ancCloseHandler", "var_name": "ancCloseHandler"}, {"original_string": "@Mock\n    private TTHandler ttHandler;", "modifier": "@Mock\n    private", "type": "TTHandler", "declarator": "ttHandler", "var_name": "ttHandler"}, {"original_string": "@Mock\n    private IFAHandler ifaHandler;", "modifier": "@Mock\n    private", "type": "IFAHandler", "declarator": "ifaHandler", "var_name": "ifaHandler"}, {"original_string": "@Mock\n    private HbTestHandler hbTestHandler;", "modifier": "@Mock\n    private", "type": "HbTestHandler", "declarator": "hbTestHandler", "var_name": "hbTestHandler"}, {"original_string": "@Mock\n    private DeliveryOutcomeHandler deliveryOutcomeHandler;", "modifier": "@Mock\n    private", "type": "DeliveryOutcomeHandler", "declarator": "deliveryOutcomeHandler", "var_name": "deliveryOutcomeHandler"}, {"original_string": "@Mock\n    private PNCRegistrationOAHandler pncRegistrationOAHandler;", "modifier": "@Mock\n    private", "type": "PNCRegistrationOAHandler", "declarator": "pncRegistrationOAHandler", "var_name": "pncRegistrationOAHandler"}, {"original_string": "@Mock\n    private PNCCloseHandler pncCloseHandler;", "modifier": "@Mock\n    private", "type": "PNCCloseHandler", "declarator": "pncCloseHandler", "var_name": "pncCloseHandler"}, {"original_string": "@Mock\n    private PNCVisitHandler pncVisitHandler;", "modifier": "@Mock\n    private", "type": "PNCVisitHandler", "declarator": "pncVisitHandler", "var_name": "pncVisitHandler"}, {"original_string": "@Mock\n    private ChildRegistrationECHandler childRegistrationECHandler;", "modifier": "@Mock\n    private", "type": "ChildRegistrationECHandler", "declarator": "childRegistrationECHandler", "var_name": "childRegistrationECHandler"}, {"original_string": "@Mock\n    private ChildImmunizationsHandler childImmunizationsHandler;", "modifier": "@Mock\n    private", "type": "ChildImmunizationsHandler", "declarator": "childImmunizationsHandler", "var_name": "childImmunizationsHandler"}, {"original_string": "@Mock\n    private ChildCloseHandler childCloseHandler;", "modifier": "@Mock\n    private", "type": "ChildCloseHandler", "declarator": "childCloseHandler", "var_name": "childCloseHandler"}, {"original_string": "@Mock\n    private ChildRegistrationOAHandler childRegistrationOAHandler;", "modifier": "@Mock\n    private", "type": "ChildRegistrationOAHandler", "declarator": "childRegistrationOAHandler", "var_name": "childRegistrationOAHandler"}, {"original_string": "@Mock\n    private ChildIllnessHandler childIllnessHandler;", "modifier": "@Mock\n    private", "type": "ChildIllnessHandler", "declarator": "childIllnessHandler", "var_name": "childIllnessHandler"}, {"original_string": "@Mock\n    private VitaminAHandler vitaminAHandler;", "modifier": "@Mock\n    private", "type": "VitaminAHandler", "declarator": "vitaminAHandler", "var_name": "vitaminAHandler"}, {"original_string": "@Mock\n    private DeliveryPlanHandler deliveryPlanHandler;", "modifier": "@Mock\n    private", "type": "DeliveryPlanHandler", "declarator": "deliveryPlanHandler", "var_name": "deliveryPlanHandler"}, {"original_string": "@Mock\n    private PostpartumFamilyPlanningHandler postpartumFamilyPlanningHandler;", "modifier": "@Mock\n    private", "type": "PostpartumFamilyPlanningHandler", "declarator": "postpartumFamilyPlanningHandler", "var_name": "postpartumFamilyPlanningHandler"}, {"original_string": "@Mock\n    private RecordECPsHandler recordECPsHandler;", "modifier": "@Mock\n    private", "type": "RecordECPsHandler", "declarator": "recordECPsHandler", "var_name": "recordECPsHandler"}, {"original_string": "@Mock\n    private ECEditHandler ecEditHandler;", "modifier": "@Mock\n    private", "type": "ECEditHandler", "declarator": "ecEditHandler", "var_name": "ecEditHandler"}, {"original_string": "@Mock\n    private ANCInvestigationsHandler ancInvestigationsHandler;", "modifier": "@Mock\n    private", "type": "ANCInvestigationsHandler", "declarator": "ancInvestigationsHandler", "var_name": "ancInvestigationsHandler"}, {"original_string": "@Mock\n    private FormSubmissionReportService formSubmissionReportService;", "modifier": "@Mock\n    private", "type": "FormSubmissionReportService", "declarator": "formSubmissionReportService", "var_name": "formSubmissionReportService"}, {"original_string": "@Mock\n    private MCTSReportService mctsReportService;", "modifier": "@Mock\n    private", "type": "MCTSReportService", "declarator": "mctsReportService", "var_name": "mctsReportService"}, {"original_string": "private FormSubmissionRouter router;", "modifier": "private", "type": "FormSubmissionRouter", "declarator": "router", "var_name": "router"}], "file": "drishti-mother-child/src/test/java/org/ei/drishti/service/formSubmission/FormSubmissionRouterTest.java"}, "test_case": {"identifier": "shouldDelegateECEditFormSubmissionHandlingToECEditHandler", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void shouldDelegateECEditFormSubmissionHandlingToECEditHandler() throws Exception {\n        FormSubmission formSubmission = new FormSubmission(\"anm id 1\", \"instance id 1\", \"ec_edit\", \"entity id 1\", 0L, \"1\", null, 0L);\n        when(formSubmissionsRepository.findByInstanceId(\"instance id 1\")).thenReturn(formSubmission);\n\n        router.route(\"instance id 1\");\n\n        verify(ecEditHandler).handle(formSubmission);\n        verify(formSubmissionReportService).reportFor(formSubmission);\n    }", "signature": "void shouldDelegateECEditFormSubmissionHandlingToECEditHandler()", "full_signature": "@Test public void shouldDelegateECEditFormSubmissionHandlingToECEditHandler()", "class_method_signature": "FormSubmissionRouterTest.shouldDelegateECEditFormSubmissionHandlingToECEditHandler()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "findByInstanceId", "route", "handle", "verify", "reportFor", "verify"]}, "focal_class": {"identifier": "FormSubmissionRouter", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static Logger logger = LoggerFactory.getLogger(FormSubmissionRouter.class.toString());", "modifier": "private static", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(FormSubmissionRouter.class.toString())", "var_name": "logger"}, {"original_string": "private AllFormSubmissions formSubmissionsRepository;", "modifier": "private", "type": "AllFormSubmissions", "declarator": "formSubmissionsRepository", "var_name": "formSubmissionsRepository"}, {"original_string": "private final Map<String, FormSubmissionHandler> handlerMap;", "modifier": "private final", "type": "Map<String, FormSubmissionHandler>", "declarator": "handlerMap", "var_name": "handlerMap"}, {"original_string": "private FormSubmissionReportService formSubmissionReportService;", "modifier": "private", "type": "FormSubmissionReportService", "declarator": "formSubmissionReportService", "var_name": "formSubmissionReportService"}, {"original_string": "private MCTSReportService mctsReportService;", "modifier": "private", "type": "MCTSReportService", "declarator": "mctsReportService", "var_name": "mctsReportService"}], "methods": [{"identifier": "FormSubmissionRouter", "parameters": "(AllFormSubmissions formSubmissionsRepository,\n                                ECRegistrationHandler ecRegistrationHandler,\n                                FPComplicationsHandler fpComplicationsHandler,\n                                FPChangeHandler fpChangeHandler,\n                                RenewFPProductHandler renewFPProductHandler,\n                                FPFollowupHandler fpFollowupHandler,\n                                FPReferralFollowupHandler fpReferralFollowupHandler,\n                                ECCloseHandler ecCloseHandler,\n                                ANCRegistrationHandler ancRegistrationHandler,\n                                ANCRegistrationOAHandler ancRegistrationOAHandler,\n                                ANCVisitHandler ancVisitHandler,\n                                ANCCloseHandler ancCloseHandler,\n                                TTHandler ttHandler,\n                                IFAHandler ifaHandler,\n                                HbTestHandler hbTestHandler,\n                                DeliveryOutcomeHandler deliveryOutcomeHandler,\n                                PNCRegistrationOAHandler pncRegistrationOAHandler,\n                                PNCCloseHandler pncCloseHandler,\n                                PNCVisitHandler pncVisitHandler,\n                                ChildRegistrationECHandler childRegistrationECHandler,\n                                ChildRegistrationOAHandler childRegistrationOAHandler,\n                                VitaminAHandler vitaminAHandler,\n                                ChildImmunizationsHandler childImmunizationsHandler,\n                                ChildIllnessHandler childIllnessHandler,\n                                ChildCloseHandler childCloseHandler,\n                                DeliveryPlanHandler deliveryPlanHandler,\n                                PostpartumFamilyPlanningHandler postpartumFamilyPlanningHandler,\n                                RecordECPsHandler recordECPsHandler,\n                                ECEditHandler ecEditHandler,\n                                ANCInvestigationsHandler ancInvestigationsHandler,\n                                FormSubmissionReportService formSubmissionReportService,\n                                MCTSReportService mctsReportService)", "modifiers": "@Autowired public", "return": "", "signature": " FormSubmissionRouter(AllFormSubmissions formSubmissionsRepository,\n                                ECRegistrationHandler ecRegistrationHandler,\n                                FPComplicationsHandler fpComplicationsHandler,\n                                FPChangeHandler fpChangeHandler,\n                                RenewFPProductHandler renewFPProductHandler,\n                                FPFollowupHandler fpFollowupHandler,\n                                FPReferralFollowupHandler fpReferralFollowupHandler,\n                                ECCloseHandler ecCloseHandler,\n                                ANCRegistrationHandler ancRegistrationHandler,\n                                ANCRegistrationOAHandler ancRegistrationOAHandler,\n                                ANCVisitHandler ancVisitHandler,\n                                ANCCloseHandler ancCloseHandler,\n                                TTHandler ttHandler,\n                                IFAHandler ifaHandler,\n                                HbTestHandler hbTestHandler,\n                                DeliveryOutcomeHandler deliveryOutcomeHandler,\n                                PNCRegistrationOAHandler pncRegistrationOAHandler,\n                                PNCCloseHandler pncCloseHandler,\n                                PNCVisitHandler pncVisitHandler,\n                                ChildRegistrationECHandler childRegistrationECHandler,\n                                ChildRegistrationOAHandler childRegistrationOAHandler,\n                                VitaminAHandler vitaminAHandler,\n                                ChildImmunizationsHandler childImmunizationsHandler,\n                                ChildIllnessHandler childIllnessHandler,\n                                ChildCloseHandler childCloseHandler,\n                                DeliveryPlanHandler deliveryPlanHandler,\n                                PostpartumFamilyPlanningHandler postpartumFamilyPlanningHandler,\n                                RecordECPsHandler recordECPsHandler,\n                                ECEditHandler ecEditHandler,\n                                ANCInvestigationsHandler ancInvestigationsHandler,\n                                FormSubmissionReportService formSubmissionReportService,\n                                MCTSReportService mctsReportService)", "full_signature": "@Autowired public  FormSubmissionRouter(AllFormSubmissions formSubmissionsRepository,\n                                ECRegistrationHandler ecRegistrationHandler,\n                                FPComplicationsHandler fpComplicationsHandler,\n                                FPChangeHandler fpChangeHandler,\n                                RenewFPProductHandler renewFPProductHandler,\n                                FPFollowupHandler fpFollowupHandler,\n                                FPReferralFollowupHandler fpReferralFollowupHandler,\n                                ECCloseHandler ecCloseHandler,\n                                ANCRegistrationHandler ancRegistrationHandler,\n                                ANCRegistrationOAHandler ancRegistrationOAHandler,\n                                ANCVisitHandler ancVisitHandler,\n                                ANCCloseHandler ancCloseHandler,\n                                TTHandler ttHandler,\n                                IFAHandler ifaHandler,\n                                HbTestHandler hbTestHandler,\n                                DeliveryOutcomeHandler deliveryOutcomeHandler,\n                                PNCRegistrationOAHandler pncRegistrationOAHandler,\n                                PNCCloseHandler pncCloseHandler,\n                                PNCVisitHandler pncVisitHandler,\n                                ChildRegistrationECHandler childRegistrationECHandler,\n                                ChildRegistrationOAHandler childRegistrationOAHandler,\n                                VitaminAHandler vitaminAHandler,\n                                ChildImmunizationsHandler childImmunizationsHandler,\n                                ChildIllnessHandler childIllnessHandler,\n                                ChildCloseHandler childCloseHandler,\n                                DeliveryPlanHandler deliveryPlanHandler,\n                                PostpartumFamilyPlanningHandler postpartumFamilyPlanningHandler,\n                                RecordECPsHandler recordECPsHandler,\n                                ECEditHandler ecEditHandler,\n                                ANCInvestigationsHandler ancInvestigationsHandler,\n                                FormSubmissionReportService formSubmissionReportService,\n                                MCTSReportService mctsReportService)", "class_method_signature": "FormSubmissionRouter.FormSubmissionRouter(AllFormSubmissions formSubmissionsRepository,\n                                ECRegistrationHandler ecRegistrationHandler,\n                                FPComplicationsHandler fpComplicationsHandler,\n                                FPChangeHandler fpChangeHandler,\n                                RenewFPProductHandler renewFPProductHandler,\n                                FPFollowupHandler fpFollowupHandler,\n                                FPReferralFollowupHandler fpReferralFollowupHandler,\n                                ECCloseHandler ecCloseHandler,\n                                ANCRegistrationHandler ancRegistrationHandler,\n                                ANCRegistrationOAHandler ancRegistrationOAHandler,\n                                ANCVisitHandler ancVisitHandler,\n                                ANCCloseHandler ancCloseHandler,\n                                TTHandler ttHandler,\n                                IFAHandler ifaHandler,\n                                HbTestHandler hbTestHandler,\n                                DeliveryOutcomeHandler deliveryOutcomeHandler,\n                                PNCRegistrationOAHandler pncRegistrationOAHandler,\n                                PNCCloseHandler pncCloseHandler,\n                                PNCVisitHandler pncVisitHandler,\n                                ChildRegistrationECHandler childRegistrationECHandler,\n                                ChildRegistrationOAHandler childRegistrationOAHandler,\n                                VitaminAHandler vitaminAHandler,\n                                ChildImmunizationsHandler childImmunizationsHandler,\n                                ChildIllnessHandler childIllnessHandler,\n                                ChildCloseHandler childCloseHandler,\n                                DeliveryPlanHandler deliveryPlanHandler,\n                                PostpartumFamilyPlanningHandler postpartumFamilyPlanningHandler,\n                                RecordECPsHandler recordECPsHandler,\n                                ECEditHandler ecEditHandler,\n                                ANCInvestigationsHandler ancInvestigationsHandler,\n                                FormSubmissionReportService formSubmissionReportService,\n                                MCTSReportService mctsReportService)", "testcase": false, "constructor": true}, {"identifier": "route", "parameters": "(String instanceId)", "modifiers": "public", "return": "void", "signature": "void route(String instanceId)", "full_signature": "public void route(String instanceId)", "class_method_signature": "FormSubmissionRouter.route(String instanceId)", "testcase": false, "constructor": false}], "file": "drishti-mother-child/src/main/java/org/ei/drishti/service/formSubmission/FormSubmissionRouter.java"}, "focal_method": {"identifier": "route", "parameters": "(String instanceId)", "modifiers": "public", "return": "void", "body": "public void route(String instanceId) throws Exception {\n        FormSubmission submission = formSubmissionsRepository.findByInstanceId(instanceId);\n        FormSubmissionHandler handler = handlerMap.get(submission.formName());\n        if (handler == null) {\n            logger.warn(\"Could not find a handler due to unknown form submission: \" + submission);\n            return;\n        }\n        logger.info(format(\"Handling {0} form submission with instance Id: {1} for entity: {2}\", submission.formName(),\n                submission.instanceId(), submission.entityId()));\n        try {\n            handler.handle(submission);\n            formSubmissionReportService.reportFor(submission);\n            mctsReportService.reportFor(submission);\n        } catch (Exception e) {\n            logger.error(format(\"Handling {0} form submission with instance Id: {1} for entity: {2} failed with exception : {3}\",\n                    submission.formName(), submission.instanceId(), submission.entityId(), getFullStackTrace(e)));\n            throw e;\n        }\n    }", "signature": "void route(String instanceId)", "full_signature": "public void route(String instanceId)", "class_method_signature": "FormSubmissionRouter.route(String instanceId)", "testcase": false, "constructor": false, "invocations": ["findByInstanceId", "get", "formName", "warn", "info", "format", "formName", "instanceId", "entityId", "handle", "reportFor", "reportFor", "error", "format", "formName", "instanceId", "entityId", "getFullStackTrace"]}, "repository": {"repo_id": 3263787, "url": "https://github.com/SEL-Columbia/dristhi", "language": "Java", "is_fork": false, "fork_count": 56, "stargazer_count": 15, "size": 19905, "license": "licensed"}}