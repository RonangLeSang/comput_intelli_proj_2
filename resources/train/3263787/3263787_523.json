{"test_class": {"identifier": "MotherReportingServiceTest", "superclass": "extends BaseUnitTest", "interfaces": "", "fields": [{"original_string": "@Mock\n    private ReportingService reportingService;", "modifier": "@Mock\n    private", "type": "ReportingService", "declarator": "reportingService", "var_name": "reportingService"}, {"original_string": "@Mock\n    private AllMothers allMothers;", "modifier": "@Mock\n    private", "type": "AllMothers", "declarator": "allMothers", "var_name": "allMothers"}, {"original_string": "@Mock\n    private AllEligibleCouples allEligibleCouples;", "modifier": "@Mock\n    private", "type": "AllEligibleCouples", "declarator": "allEligibleCouples", "var_name": "allEligibleCouples"}, {"original_string": "@Mock\n    private ReportMonth reportMonth;", "modifier": "@Mock\n    private", "type": "ReportMonth", "declarator": "reportMonth", "var_name": "reportMonth"}, {"original_string": "private MotherReportingService service;", "modifier": "private", "type": "MotherReportingService", "declarator": "service", "var_name": "service"}, {"original_string": "private final Mother MOTHER = new Mother(\"CASE-1\", \"EC-CASE-1\", \"TC 1\")\n            .withAnm(\"ANM X\")\n            .withLMP(parse(\"2012-01-01\"));", "modifier": "private final", "type": "Mother", "declarator": "MOTHER = new Mother(\"CASE-1\", \"EC-CASE-1\", \"TC 1\")\n            .withAnm(\"ANM X\")\n            .withLMP(parse(\"2012-01-01\"))", "var_name": "MOTHER"}], "file": "drishti-mother-child/src/test/java/org/ei/drishti/service/reporting/MotherReportingServiceTest.java"}, "test_case": {"identifier": "shouldReportCesareanPrivateFacilityWhenDeliveryOutcomeIsHandledAndDeliveryTypeIsCesareanAndDeliveryPlaceIsPrivateFacility", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void shouldReportCesareanPrivateFacilityWhenDeliveryOutcomeIsHandledAndDeliveryTypeIsCesareanAndDeliveryPlaceIsPrivateFacility() {\n        when(allMothers.findByCaseId(\"CASE-1\")).thenReturn(MOTHER);\n        when(allEligibleCouples.findByCaseId(\"EC-CASE-1\")).thenReturn(new EligibleCouple().withLocation(\"bherya\", \"Sub Center\", \"PHC X\"));\n        when(reportMonth.areDatesBelongToSameReportingMonth(parse(\"2012-01-01\"), parse(\"2012-01-02\"))).thenReturn(true);\n\n        Map<String, String> reportData = create(\"id\", \"CASE-1\")\n                .put(\"didWomanSurvive\", \"yes\")\n                .put(\"didMotherSurvive\", \"yes\")\n                .put(\"deliveryOutcome\", \"live_birth\")\n                .put(\"referenceDate\", \"2012-01-01\")\n                .put(\"deliveryPlace\", \"private_facility\")\n                .put(\"deliveryType\", \"cesarean\")\n                .put(\"submissionDate\", \"2012-01-02\")\n                .map();\n        service.deliveryOutcome(new SafeMap(reportData));\n\n        verifyBothReportingCalls(CESAREAN_PRIVATE_FACILITY, \"2012-01-01\", \"CASE-1\");\n    }", "signature": "void shouldReportCesareanPrivateFacilityWhenDeliveryOutcomeIsHandledAndDeliveryTypeIsCesareanAndDeliveryPlaceIsPrivateFacility()", "full_signature": "@Test public void shouldReportCesareanPrivateFacilityWhenDeliveryOutcomeIsHandledAndDeliveryTypeIsCesareanAndDeliveryPlaceIsPrivateFacility()", "class_method_signature": "MotherReportingServiceTest.shouldReportCesareanPrivateFacilityWhenDeliveryOutcomeIsHandledAndDeliveryTypeIsCesareanAndDeliveryPlaceIsPrivateFacility()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "findByCaseId", "thenReturn", "when", "findByCaseId", "withLocation", "thenReturn", "when", "areDatesBelongToSameReportingMonth", "parse", "parse", "map", "put", "put", "put", "put", "put", "put", "put", "create", "deliveryOutcome", "verifyBothReportingCalls"]}, "focal_class": {"identifier": "MotherReportingService", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static org.slf4j.Logger logger = LoggerFactory.getLogger(MotherReportingService.class.toString());", "modifier": "private static", "type": "org.slf4j.Logger", "declarator": "logger = LoggerFactory.getLogger(MotherReportingService.class.toString())", "var_name": "logger"}, {"original_string": "public static final int NUMBER_OF_DAYS_IN_12_WEEKS = 84;", "modifier": "public static final", "type": "int", "declarator": "NUMBER_OF_DAYS_IN_12_WEEKS = 84", "var_name": "NUMBER_OF_DAYS_IN_12_WEEKS"}, {"original_string": "public static final int NUMBER_OF_DAYS_IN_PNC_PERIOD = 42;", "modifier": "public static final", "type": "int", "declarator": "NUMBER_OF_DAYS_IN_PNC_PERIOD = 42", "var_name": "NUMBER_OF_DAYS_IN_PNC_PERIOD"}, {"original_string": "private ReportingService reportingService;", "modifier": "private", "type": "ReportingService", "declarator": "reportingService", "var_name": "reportingService"}, {"original_string": "private AllMothers allMothers;", "modifier": "private", "type": "AllMothers", "declarator": "allMothers", "var_name": "allMothers"}, {"original_string": "private AllEligibleCouples allEligibleCouples;", "modifier": "private", "type": "AllEligibleCouples", "declarator": "allEligibleCouples", "var_name": "allEligibleCouples"}, {"original_string": "private final ReportMonth reportMonth;", "modifier": "private final", "type": "ReportMonth", "declarator": "reportMonth", "var_name": "reportMonth"}, {"original_string": "private final Map<String, Indicator> placeOfDeliveryToIndicator;", "modifier": "private final", "type": "Map<String, Indicator>", "declarator": "placeOfDeliveryToIndicator", "var_name": "placeOfDeliveryToIndicator"}], "methods": [{"identifier": "MotherReportingService", "parameters": "(ReportingService reportingService, AllMothers allMothers, AllEligibleCouples allEligibleCouples, ReportMonth reportMonth)", "modifiers": "@Autowired public", "return": "", "signature": " MotherReportingService(ReportingService reportingService, AllMothers allMothers, AllEligibleCouples allEligibleCouples, ReportMonth reportMonth)", "full_signature": "@Autowired public  MotherReportingService(ReportingService reportingService, AllMothers allMothers, AllEligibleCouples allEligibleCouples, ReportMonth reportMonth)", "class_method_signature": "MotherReportingService.MotherReportingService(ReportingService reportingService, AllMothers allMothers, AllEligibleCouples allEligibleCouples, ReportMonth reportMonth)", "testcase": false, "constructor": true}, {"identifier": "registerANC", "parameters": "(SafeMap reportData)", "modifiers": "public", "return": "void", "signature": "void registerANC(SafeMap reportData)", "full_signature": "public void registerANC(SafeMap reportData)", "class_method_signature": "MotherReportingService.registerANC(SafeMap reportData)", "testcase": false, "constructor": false}, {"identifier": "ancVisit", "parameters": "(SafeMap reportData)", "modifiers": "public", "return": "void", "signature": "void ancVisit(SafeMap reportData)", "full_signature": "public void ancVisit(SafeMap reportData)", "class_method_signature": "MotherReportingService.ancVisit(SafeMap reportData)", "testcase": false, "constructor": false}, {"identifier": "ttProvided", "parameters": "(SafeMap reportData)", "modifiers": "public", "return": "void", "signature": "void ttProvided(SafeMap reportData)", "full_signature": "public void ttProvided(SafeMap reportData)", "class_method_signature": "MotherReportingService.ttProvided(SafeMap reportData)", "testcase": false, "constructor": false}, {"identifier": "deliveryOutcome", "parameters": "(SafeMap reportData)", "modifiers": "public", "return": "void", "signature": "void deliveryOutcome(SafeMap reportData)", "full_signature": "public void deliveryOutcome(SafeMap reportData)", "class_method_signature": "MotherReportingService.deliveryOutcome(SafeMap reportData)", "testcase": false, "constructor": false}, {"identifier": "reportCesareans", "parameters": "(SafeMap reportData, Mother mother, Location location)", "modifiers": "private", "return": "void", "signature": "void reportCesareans(SafeMap reportData, Mother mother, Location location)", "full_signature": "private void reportCesareans(SafeMap reportData, Mother mother, Location location)", "class_method_signature": "MotherReportingService.reportCesareans(SafeMap reportData, Mother mother, Location location)", "testcase": false, "constructor": false}, {"identifier": "pncVisitHappened", "parameters": "(SafeMap reportData)", "modifiers": "public", "return": "void", "signature": "void pncVisitHappened(SafeMap reportData)", "full_signature": "public void pncVisitHappened(SafeMap reportData)", "class_method_signature": "MotherReportingService.pncVisitHappened(SafeMap reportData)", "testcase": false, "constructor": false}, {"identifier": "closeANC", "parameters": "(SafeMap reportData)", "modifiers": "public", "return": "void", "signature": "void closeANC(SafeMap reportData)", "full_signature": "public void closeANC(SafeMap reportData)", "class_method_signature": "MotherReportingService.closeANC(SafeMap reportData)", "testcase": false, "constructor": false}, {"identifier": "closePNC", "parameters": "(SafeMap reportData)", "modifiers": "public", "return": "void", "signature": "void closePNC(SafeMap reportData)", "full_signature": "public void closePNC(SafeMap reportData)", "class_method_signature": "MotherReportingService.closePNC(SafeMap reportData)", "testcase": false, "constructor": false}, {"identifier": "loadLocationFromEC", "parameters": "(Mother mother)", "modifiers": "private", "return": "Location", "signature": "Location loadLocationFromEC(Mother mother)", "full_signature": "private Location loadLocationFromEC(Mother mother)", "class_method_signature": "MotherReportingService.loadLocationFromEC(Mother mother)", "testcase": false, "constructor": false}, {"identifier": "reportIfInstitutionalDelivery", "parameters": "(SafeMap reportData, Mother mother, Location location)", "modifiers": "private", "return": "void", "signature": "void reportIfInstitutionalDelivery(SafeMap reportData, Mother mother, Location location)", "full_signature": "private void reportIfInstitutionalDelivery(SafeMap reportData, Mother mother, Location location)", "class_method_signature": "MotherReportingService.reportIfInstitutionalDelivery(SafeMap reportData, Mother mother, Location location)", "testcase": false, "constructor": false}, {"identifier": "reportPregnancyOutcome", "parameters": "(SafeMap reportData, Mother mother, Location location)", "modifiers": "private", "return": "void", "signature": "void reportPregnancyOutcome(SafeMap reportData, Mother mother, Location location)", "full_signature": "private void reportPregnancyOutcome(SafeMap reportData, Mother mother, Location location)", "class_method_signature": "MotherReportingService.reportPregnancyOutcome(SafeMap reportData, Mother mother, Location location)", "testcase": false, "constructor": false}, {"identifier": "reportMotherMortality", "parameters": "(SafeMap reportData, Mother mother, Location location)", "modifiers": "private", "return": "void", "signature": "void reportMotherMortality(SafeMap reportData, Mother mother, Location location)", "full_signature": "private void reportMotherMortality(SafeMap reportData, Mother mother, Location location)", "class_method_signature": "MotherReportingService.reportMotherMortality(SafeMap reportData, Mother mother, Location location)", "testcase": false, "constructor": false}, {"identifier": "reportPlaceOfDelivery", "parameters": "(SafeMap reportData, Mother mother, Location location)", "modifiers": "private", "return": "void", "signature": "void reportPlaceOfDelivery(SafeMap reportData, Mother mother, Location location)", "full_signature": "private void reportPlaceOfDelivery(SafeMap reportData, Mother mother, Location location)", "class_method_signature": "MotherReportingService.reportPlaceOfDelivery(SafeMap reportData, Mother mother, Location location)", "testcase": false, "constructor": false}, {"identifier": "reportDeath", "parameters": "(Mother mother, Indicator indicator, String deathDate, String submissionDate, Location location)", "modifiers": "private", "return": "void", "signature": "void reportDeath(Mother mother, Indicator indicator, String deathDate, String submissionDate, Location location)", "full_signature": "private void reportDeath(Mother mother, Indicator indicator, String deathDate, String submissionDate, Location location)", "class_method_signature": "MotherReportingService.reportDeath(Mother mother, Indicator indicator, String deathDate, String submissionDate, Location location)", "testcase": false, "constructor": false}, {"identifier": "reportAbortion", "parameters": "(SafeMap reportData, Mother mother, Location location)", "modifiers": "private", "return": "void", "signature": "void reportAbortion(SafeMap reportData, Mother mother, Location location)", "full_signature": "private void reportAbortion(SafeMap reportData, Mother mother, Location location)", "class_method_signature": "MotherReportingService.reportAbortion(SafeMap reportData, Mother mother, Location location)", "testcase": false, "constructor": false}, {"identifier": "reportANC4Visit", "parameters": "(SafeMap reportData, Mother mother, Location location)", "modifiers": "private", "return": "void", "signature": "void reportANC4Visit(SafeMap reportData, Mother mother, Location location)", "full_signature": "private void reportANC4Visit(SafeMap reportData, Mother mother, Location location)", "class_method_signature": "MotherReportingService.reportANC4Visit(SafeMap reportData, Mother mother, Location location)", "testcase": false, "constructor": false}, {"identifier": "getFourthAncVisitDate", "parameters": "(List<Map<String, String>> ancVisits)", "modifiers": "private", "return": "String", "signature": "String getFourthAncVisitDate(List<Map<String, String>> ancVisits)", "full_signature": "private String getFourthAncVisitDate(List<Map<String, String>> ancVisits)", "class_method_signature": "MotherReportingService.getFourthAncVisitDate(List<Map<String, String>> ancVisits)", "testcase": false, "constructor": false}, {"identifier": "reportTTVisit", "parameters": "(String ttDose, String ttDate, String submissionDate, Mother mother, Location location)", "modifiers": "private", "return": "void", "signature": "void reportTTVisit(String ttDose, String ttDate, String submissionDate, Mother mother, Location location)", "full_signature": "private void reportTTVisit(String ttDose, String ttDate, String submissionDate, Mother mother, Location location)", "class_method_signature": "MotherReportingService.reportTTVisit(String ttDose, String ttDate, String submissionDate, Mother mother, Location location)", "testcase": false, "constructor": false}, {"identifier": "reportToBoth", "parameters": "(Mother mother, Indicator indicator, String date, String submissionDate, Location location)", "modifiers": "public", "return": "void", "signature": "void reportToBoth(Mother mother, Indicator indicator, String date, String submissionDate, Location location)", "full_signature": "public void reportToBoth(Mother mother, Indicator indicator, String date, String submissionDate, Location location)", "class_method_signature": "MotherReportingService.reportToBoth(Mother mother, Indicator indicator, String date, String submissionDate, Location location)", "testcase": false, "constructor": false}, {"identifier": "report", "parameters": "(Mother mother, Indicator indicator, String date, Location location)", "modifiers": "private", "return": "void", "signature": "void report(Mother mother, Indicator indicator, String date, Location location)", "full_signature": "private void report(Mother mother, Indicator indicator, String date, Location location)", "class_method_signature": "MotherReportingService.report(Mother mother, Indicator indicator, String date, Location location)", "testcase": false, "constructor": false}, {"identifier": "pncRegistrationOA", "parameters": "(SafeMap reportData)", "modifiers": "public", "return": "void", "signature": "void pncRegistrationOA(SafeMap reportData)", "full_signature": "public void pncRegistrationOA(SafeMap reportData)", "class_method_signature": "MotherReportingService.pncRegistrationOA(SafeMap reportData)", "testcase": false, "constructor": false}, {"identifier": "deleteReports", "parameters": "(String motherCaseId)", "modifiers": "public", "return": "void", "signature": "void deleteReports(String motherCaseId)", "full_signature": "public void deleteReports(String motherCaseId)", "class_method_signature": "MotherReportingService.deleteReports(String motherCaseId)", "testcase": false, "constructor": false}], "file": "drishti-mother-child/src/main/java/org/ei/drishti/service/reporting/MotherReportingService.java"}, "focal_method": {"identifier": "deliveryOutcome", "parameters": "(SafeMap reportData)", "modifiers": "public", "return": "void", "body": "public void deliveryOutcome(SafeMap reportData) {\n        Mother mother = allMothers.findByCaseId(reportData.get(AllConstants.CommonFormFields.ID));\n        Location location = loadLocationFromEC(mother);\n        reportPregnancyOutcome(reportData, mother, location);\n        reportIfInstitutionalDelivery(reportData, mother, location);\n        reportToBoth(mother, DELIVERY, reportData.get(REFERENCE_DATE), reportData.get(SUBMISSION_DATE_FIELD_NAME), location);\n        reportMotherMortality(reportData, mother, location);\n        reportPlaceOfDelivery(reportData, mother, location);\n        reportCesareans(reportData, mother, location);\n    }", "signature": "void deliveryOutcome(SafeMap reportData)", "full_signature": "public void deliveryOutcome(SafeMap reportData)", "class_method_signature": "MotherReportingService.deliveryOutcome(SafeMap reportData)", "testcase": false, "constructor": false, "invocations": ["findByCaseId", "get", "loadLocationFromEC", "reportPregnancyOutcome", "reportIfInstitutionalDelivery", "reportToBoth", "get", "get", "reportMotherMortality", "reportPlaceOfDelivery", "reportCesareans"]}, "repository": {"repo_id": 3263787, "url": "https://github.com/SEL-Columbia/dristhi", "language": "Java", "is_fork": false, "fork_count": 56, "stargazer_count": 15, "size": 19905, "license": "licensed"}}