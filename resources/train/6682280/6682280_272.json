{"test_class": {"identifier": "TestHBaseKijiResult", "superclass": "extends KijiClientTest", "interfaces": "", "fields": [{"original_string": "private static final String PRIMITIVE_FAMILY = \"primitive\";", "modifier": "private static final", "type": "String", "declarator": "PRIMITIVE_FAMILY = \"primitive\"", "var_name": "PRIMITIVE_FAMILY"}, {"original_string": "private static final String STRING_MAP_FAMILY = \"string_map\";", "modifier": "private static final", "type": "String", "declarator": "STRING_MAP_FAMILY = \"string_map\"", "var_name": "STRING_MAP_FAMILY"}, {"original_string": "private static final KijiColumnName PRIMITIVE_STRING =\n      KijiColumnName.create(PRIMITIVE_FAMILY, \"string_column\");", "modifier": "private static final", "type": "KijiColumnName", "declarator": "PRIMITIVE_STRING =\n      KijiColumnName.create(PRIMITIVE_FAMILY, \"string_column\")", "var_name": "PRIMITIVE_STRING"}, {"original_string": "private static final KijiColumnName PRIMITIVE_DOUBLE =\n      KijiColumnName.create(PRIMITIVE_FAMILY, \"double_column\");", "modifier": "private static final", "type": "KijiColumnName", "declarator": "PRIMITIVE_DOUBLE =\n      KijiColumnName.create(PRIMITIVE_FAMILY, \"double_column\")", "var_name": "PRIMITIVE_DOUBLE"}, {"original_string": "private static final KijiColumnName PRIMITIVE_LONG =\n      KijiColumnName.create(PRIMITIVE_FAMILY, \"long_column\");", "modifier": "private static final", "type": "KijiColumnName", "declarator": "PRIMITIVE_LONG =\n      KijiColumnName.create(PRIMITIVE_FAMILY, \"long_column\")", "var_name": "PRIMITIVE_LONG"}, {"original_string": "private static final KijiColumnName STRING_MAP_1 =\n      KijiColumnName.create(STRING_MAP_FAMILY, \"smap_1\");", "modifier": "private static final", "type": "KijiColumnName", "declarator": "STRING_MAP_1 =\n      KijiColumnName.create(STRING_MAP_FAMILY, \"smap_1\")", "var_name": "STRING_MAP_1"}, {"original_string": "private static final KijiColumnName STRING_MAP_2 =\n      KijiColumnName.create(STRING_MAP_FAMILY, \"smap_2\");", "modifier": "private static final", "type": "KijiColumnName", "declarator": "STRING_MAP_2 =\n      KijiColumnName.create(STRING_MAP_FAMILY, \"smap_2\")", "var_name": "STRING_MAP_2"}, {"original_string": "private static final Integer ROW = 1;", "modifier": "private static final", "type": "Integer", "declarator": "ROW = 1", "var_name": "ROW"}, {"original_string": "private static final NavigableMap<KijiColumnName, NavigableMap<Long, ?>>\n      ROW_DATA = ImmutableSortedMap.<KijiColumnName, NavigableMap<Long, ?>>naturalOrder()\n          .put(PRIMITIVE_STRING, ImmutableSortedMap.<Long, Utf8>reverseOrder()\n              .put(10L, new Utf8(\"ten\"))\n              .put(5L, new Utf8(\"five\"))\n              .put(4L, new Utf8(\"four\"))\n              .put(3L, new Utf8(\"three\"))\n              .put(2L, new Utf8(\"two\"))\n              .put(1L, new Utf8(\"one\"))\n              .build())\n          .put(PRIMITIVE_DOUBLE, ImmutableSortedMap.<Long, Double>reverseOrder()\n              .put(10L, 10.0)\n              .put(5L, 5.0)\n              .put(4L, 4.0)\n              .put(3L, 3.0)\n              .put(2L, 2.0)\n              .put(1L, 1.0)\n              .build())\n          .put(KijiColumnName.create(PRIMITIVE_FAMILY, \"long_column\"),\n                  ImmutableSortedMap.<Long, Double>reverseOrder()\n              .build())\n          .put(STRING_MAP_1, ImmutableSortedMap.<Long, Utf8>reverseOrder()\n              .put(10L, new Utf8(\"sm1-ten\"))\n              .put(5L, new Utf8(\"sm1-five\"))\n              .put(4L, new Utf8(\"sm1-four\"))\n              .put(3L, new Utf8(\"sm1-three\"))\n              .put(2L, new Utf8(\"sm1-two\"))\n              .put(1L, new Utf8(\"sm1-one\"))\n              .build())\n          .put(STRING_MAP_2, ImmutableSortedMap.<Long, Utf8>reverseOrder()\n              .put(10L, new Utf8(\"sm2-ten\"))\n              .put(5L, new Utf8(\"sm2-five\"))\n              .put(4L, new Utf8(\"sm2-four\"))\n              .put(3L, new Utf8(\"sm2-three\"))\n              .put(2L, new Utf8(\"sm2-two\"))\n              .put(1L, new Utf8(\"sm2-one\"))\n              .build())\n          .build();", "modifier": "private static final", "type": "NavigableMap<KijiColumnName, NavigableMap<Long, ?>>", "declarator": "ROW_DATA = ImmutableSortedMap.<KijiColumnName, NavigableMap<Long, ?>>naturalOrder()\n          .put(PRIMITIVE_STRING, ImmutableSortedMap.<Long, Utf8>reverseOrder()\n              .put(10L, new Utf8(\"ten\"))\n              .put(5L, new Utf8(\"five\"))\n              .put(4L, new Utf8(\"four\"))\n              .put(3L, new Utf8(\"three\"))\n              .put(2L, new Utf8(\"two\"))\n              .put(1L, new Utf8(\"one\"))\n              .build())\n          .put(PRIMITIVE_DOUBLE, ImmutableSortedMap.<Long, Double>reverseOrder()\n              .put(10L, 10.0)\n              .put(5L, 5.0)\n              .put(4L, 4.0)\n              .put(3L, 3.0)\n              .put(2L, 2.0)\n              .put(1L, 1.0)\n              .build())\n          .put(KijiColumnName.create(PRIMITIVE_FAMILY, \"long_column\"),\n                  ImmutableSortedMap.<Long, Double>reverseOrder()\n              .build())\n          .put(STRING_MAP_1, ImmutableSortedMap.<Long, Utf8>reverseOrder()\n              .put(10L, new Utf8(\"sm1-ten\"))\n              .put(5L, new Utf8(\"sm1-five\"))\n              .put(4L, new Utf8(\"sm1-four\"))\n              .put(3L, new Utf8(\"sm1-three\"))\n              .put(2L, new Utf8(\"sm1-two\"))\n              .put(1L, new Utf8(\"sm1-one\"))\n              .build())\n          .put(STRING_MAP_2, ImmutableSortedMap.<Long, Utf8>reverseOrder()\n              .put(10L, new Utf8(\"sm2-ten\"))\n              .put(5L, new Utf8(\"sm2-five\"))\n              .put(4L, new Utf8(\"sm2-four\"))\n              .put(3L, new Utf8(\"sm2-three\"))\n              .put(2L, new Utf8(\"sm2-two\"))\n              .put(1L, new Utf8(\"sm2-one\"))\n              .build())\n          .build()", "var_name": "ROW_DATA"}, {"original_string": "private HBaseKijiTable mTable;", "modifier": "private", "type": "HBaseKijiTable", "declarator": "mTable", "var_name": "mTable"}, {"original_string": "private HBaseKijiTableReader mReader;", "modifier": "private", "type": "HBaseKijiTableReader", "declarator": "mReader", "var_name": "mReader"}], "file": "kiji-schema/src/test/java/org/kiji/schema/impl/hbase/TestHBaseKijiResult.java"}, "test_case": {"identifier": "testGetMultipleFullyQualifiedColumns", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testGetMultipleFullyQualifiedColumns() throws Exception {\n    final KijiColumnName column1 = PRIMITIVE_STRING;\n    final KijiColumnName column2 = STRING_MAP_1;\n\n    for (int pageSize : ImmutableList.of(0, 1, 2, 10)) {\n\n      { // Single version | no timerange\n        final KijiDataRequest request = KijiDataRequest\n            .builder()\n            .addColumns(\n                ColumnsDef.create()\n                    .withPageSize(pageSize)\n                    .add(column1.getFamily(), column1.getQualifier())\n                    .add(column2.getFamily(), column2.getQualifier()))\n            .build();\n\n        final Iterable<? extends Entry<Long, ?>> column1Entries =\n            Iterables.limit(ROW_DATA.get(column1).entrySet(), 1);\n        final Iterable<? extends Entry<Long, ?>> column2Entries =\n            Iterables.limit(ROW_DATA.get(column2).entrySet(), 1);\n\n        testViewGet(request, Iterables.concat(column1Entries, column2Entries));\n      }\n\n      { // Single version | timerange\n        final KijiDataRequest request = KijiDataRequest\n            .builder()\n            .addColumns(\n                ColumnsDef.create()\n                    .withPageSize(pageSize)\n                    .add(column1.getFamily(), column1.getQualifier())\n                    .add(column2.getFamily(), column2.getQualifier()))\n            .withTimeRange(4, 6)\n            .build();\n\n        final Iterable<? extends Entry<Long, ?>> column1Entries =\n            Iterables.limit(ROW_DATA.get(column1).subMap(6L, false, 4L, true).entrySet(), 1);\n        final Iterable<? extends Entry<Long, ?>> column2Entries =\n            Iterables.limit(ROW_DATA.get(column2).subMap(6L, false, 4L, true).entrySet(), 1);\n\n        testViewGet(request, Iterables.concat(column1Entries, column2Entries));\n      }\n\n      { // Multiple versions | no timerange\n        final KijiDataRequest request = KijiDataRequest\n            .builder()\n            .addColumns(\n                ColumnsDef.create()\n                    .withPageSize(pageSize)\n                    .withMaxVersions(100)\n                    .add(column1.getFamily(), column1.getQualifier())\n                    .add(column2.getFamily(), column2.getQualifier()))\n            .build();\n\n        final Iterable<? extends Entry<Long, ?>> column1Entries = ROW_DATA.get(column1).entrySet();\n        final Iterable<? extends Entry<Long, ?>> column2Entries = ROW_DATA.get(column2).entrySet();\n\n        testViewGet(request, Iterables.concat(column1Entries, column2Entries));\n      }\n\n      { // Multiple versions | timerange\n        final KijiDataRequest request = KijiDataRequest\n            .builder()\n            .addColumns(\n                ColumnsDef.create()\n                    .withPageSize(pageSize)\n                    .withMaxVersions(100)\n                    .add(column1.getFamily(), column1.getQualifier())\n                    .add(column2.getFamily(), column2.getQualifier()))\n            .withTimeRange(4, 6)\n            .build();\n\n        final Iterable<? extends Entry<Long, ?>> column1Entries =\n            ROW_DATA.get(column1).subMap(6L, false, 4L, true).entrySet();\n        final Iterable<? extends Entry<Long, ?>> column2Entries =\n            ROW_DATA.get(column2).subMap(6L, false, 4L, true).entrySet();\n\n        testViewGet(request, Iterables.concat(column1Entries, column2Entries));\n      }\n\n      { // Mixed versions | timerange\n        final KijiDataRequest request = KijiDataRequest\n            .builder()\n            .addColumns(\n                ColumnsDef.create()\n                    .withPageSize(pageSize)\n                    .withMaxVersions(100)\n                    .add(column1.getFamily(), column1.getQualifier()))\n            .addColumns(\n                ColumnsDef.create()\n                    .withPageSize(pageSize)\n                    .withMaxVersions(1)\n                    .add(column2.getFamily(), column2.getQualifier()))\n            .withTimeRange(4, 6)\n            .build();\n\n        final Iterable<? extends Entry<Long, ?>> column1Entries =\n            ROW_DATA.get(column1).subMap(6L, false, 4L, true).entrySet();\n        final Iterable<? extends Entry<Long, ?>> column2Entries =\n            Iterables.limit(ROW_DATA.get(column2).subMap(6L, false, 4L, true).entrySet(), 1);\n\n        testViewGet(request, Iterables.concat(column1Entries, column2Entries));\n      }\n\n      { // Mixed versions | no timerange\n        final KijiDataRequest request = KijiDataRequest\n            .builder()\n            .addColumns(\n                ColumnsDef.create()\n                    .withPageSize(pageSize)\n                    .withMaxVersions(1)\n                    .add(column1.getFamily(), column1.getQualifier()))\n            .addColumns(\n                ColumnsDef.create()\n                    .withPageSize(pageSize)\n                    .withMaxVersions(100)\n                    .add(column2.getFamily(), column2.getQualifier()))\n            .build();\n\n        final Iterable<? extends Entry<Long, ?>> column1Entries =\n            Iterables.limit(ROW_DATA.get(column1).entrySet(), 1);\n        final Iterable<? extends Entry<Long, ?>> column2Entries =\n            ROW_DATA.get(column2).entrySet();\n\n        testViewGet(request, Iterables.concat(column1Entries, column2Entries));\n      }\n    }\n  }", "signature": "void testGetMultipleFullyQualifiedColumns()", "full_signature": "@Test public void testGetMultipleFullyQualifiedColumns()", "class_method_signature": "TestHBaseKijiResult.testGetMultipleFullyQualifiedColumns()", "testcase": true, "constructor": false, "invocations": ["of", "build", "addColumns", "builder", "add", "add", "withPageSize", "create", "getFamily", "getQualifier", "getFamily", "getQualifier", "limit", "entrySet", "get", "limit", "entrySet", "get", "testViewGet", "concat", "build", "withTimeRange", "addColumns", "builder", "add", "add", "withPageSize", "create", "getFamily", "getQualifier", "getFamily", "getQualifier", "limit", "entrySet", "subMap", "get", "limit", "entrySet", "subMap", "get", "testViewGet", "concat", "build", "addColumns", "builder", "add", "add", "withMaxVersions", "withPageSize", "create", "getFamily", "getQualifier", "getFamily", "getQualifier", "entrySet", "get", "entrySet", "get", "testViewGet", "concat", "build", "withTimeRange", "addColumns", "builder", "add", "add", "withMaxVersions", "withPageSize", "create", "getFamily", "getQualifier", "getFamily", "getQualifier", "entrySet", "subMap", "get", "entrySet", "subMap", "get", "testViewGet", "concat", "build", "withTimeRange", "addColumns", "addColumns", "builder", "add", "withMaxVersions", "withPageSize", "create", "getFamily", "getQualifier", "add", "withMaxVersions", "withPageSize", "create", "getFamily", "getQualifier", "entrySet", "subMap", "get", "limit", "entrySet", "subMap", "get", "testViewGet", "concat", "build", "addColumns", "addColumns", "builder", "add", "withMaxVersions", "withPageSize", "create", "getFamily", "getQualifier", "add", "withMaxVersions", "withPageSize", "create", "getFamily", "getQualifier", "limit", "entrySet", "get", "entrySet", "get", "testViewGet", "concat"]}, "focal_class": {"identifier": "HBaseKijiResult", "superclass": "", "interfaces": "", "fields": [], "methods": [{"identifier": "create", "parameters": "(\n      final EntityId entityId,\n      final KijiDataRequest dataRequest,\n      final Result unpagedRawResult,\n      final HBaseKijiTable table,\n      final KijiTableLayout layout,\n      final HBaseColumnNameTranslator columnTranslator,\n      final CellDecoderProvider decoderProvider\n  )", "modifiers": "public static", "return": "KijiResult<T>", "signature": "KijiResult<T> create(\n      final EntityId entityId,\n      final KijiDataRequest dataRequest,\n      final Result unpagedRawResult,\n      final HBaseKijiTable table,\n      final KijiTableLayout layout,\n      final HBaseColumnNameTranslator columnTranslator,\n      final CellDecoderProvider decoderProvider\n  )", "full_signature": "public static KijiResult<T> create(\n      final EntityId entityId,\n      final KijiDataRequest dataRequest,\n      final Result unpagedRawResult,\n      final HBaseKijiTable table,\n      final KijiTableLayout layout,\n      final HBaseColumnNameTranslator columnTranslator,\n      final CellDecoderProvider decoderProvider\n  )", "class_method_signature": "HBaseKijiResult.create(\n      final EntityId entityId,\n      final KijiDataRequest dataRequest,\n      final Result unpagedRawResult,\n      final HBaseKijiTable table,\n      final KijiTableLayout layout,\n      final HBaseColumnNameTranslator columnTranslator,\n      final CellDecoderProvider decoderProvider\n  )", "testcase": false, "constructor": false}, {"identifier": "HBaseKijiResult", "parameters": "()", "modifiers": "private", "return": "", "signature": " HBaseKijiResult()", "full_signature": "private  HBaseKijiResult()", "class_method_signature": "HBaseKijiResult.HBaseKijiResult()", "testcase": false, "constructor": true}], "file": "kiji-schema/src/main/java/org/kiji/schema/impl/hbase/HBaseKijiResult.java"}, "focal_method": {"identifier": "create", "parameters": "(\n      final EntityId entityId,\n      final KijiDataRequest dataRequest,\n      final Result unpagedRawResult,\n      final HBaseKijiTable table,\n      final KijiTableLayout layout,\n      final HBaseColumnNameTranslator columnTranslator,\n      final CellDecoderProvider decoderProvider\n  )", "modifiers": "public static", "return": "KijiResult<T>", "body": "public static <T> KijiResult<T> create(\n      final EntityId entityId,\n      final KijiDataRequest dataRequest,\n      final Result unpagedRawResult,\n      final HBaseKijiTable table,\n      final KijiTableLayout layout,\n      final HBaseColumnNameTranslator columnTranslator,\n      final CellDecoderProvider decoderProvider\n  ) throws IOException {\n    final Collection<Column> columnRequests = dataRequest.getColumns();\n    final KijiDataRequestBuilder unpagedRequestBuilder = KijiDataRequest.builder();\n    final KijiDataRequestBuilder pagedRequestBuilder = KijiDataRequest.builder();\n    unpagedRequestBuilder.withTimeRange(\n        dataRequest.getMinTimestamp(),\n        dataRequest.getMaxTimestamp());\n    pagedRequestBuilder.withTimeRange(dataRequest.getMinTimestamp(), dataRequest.getMaxTimestamp());\n\n    for (Column columnRequest : columnRequests) {\n      if (columnRequest.isPagingEnabled()) {\n        pagedRequestBuilder.newColumnsDef(columnRequest);\n      } else {\n        unpagedRequestBuilder.newColumnsDef(columnRequest);\n      }\n    }\n\n    final CellDecoderProvider requestDecoderProvider =\n        decoderProvider.getDecoderProviderForRequest(dataRequest);\n\n    final KijiDataRequest unpagedRequest = unpagedRequestBuilder.build();\n    final KijiDataRequest pagedRequest = pagedRequestBuilder.build();\n\n    if (unpagedRequest.isEmpty() && pagedRequest.isEmpty()) {\n      return new EmptyKijiResult<T>(entityId, dataRequest);\n    }\n\n    final HBaseMaterializedKijiResult<T> materializedKijiResult;\n    if (!unpagedRequest.isEmpty()) {\n      materializedKijiResult =\n          HBaseMaterializedKijiResult.create(\n              entityId,\n              unpagedRequest,\n              unpagedRawResult,\n              layout,\n              columnTranslator,\n              requestDecoderProvider);\n    } else {\n      materializedKijiResult = null;\n    }\n\n    final HBasePagedKijiResult<T> pagedKijiResult;\n    if (!pagedRequest.isEmpty()) {\n      pagedKijiResult =\n          new HBasePagedKijiResult<T>(\n              entityId,\n              pagedRequest,\n              table,\n              layout,\n              columnTranslator,\n              requestDecoderProvider);\n    } else {\n      pagedKijiResult = null;\n    }\n\n    if (unpagedRequest.isEmpty()) {\n      return pagedKijiResult;\n    } else if (pagedRequest.isEmpty()) {\n      return materializedKijiResult;\n    } else {\n      return DefaultKijiResult.create(dataRequest, materializedKijiResult, pagedKijiResult);\n    }\n  }", "signature": "KijiResult<T> create(\n      final EntityId entityId,\n      final KijiDataRequest dataRequest,\n      final Result unpagedRawResult,\n      final HBaseKijiTable table,\n      final KijiTableLayout layout,\n      final HBaseColumnNameTranslator columnTranslator,\n      final CellDecoderProvider decoderProvider\n  )", "full_signature": "public static KijiResult<T> create(\n      final EntityId entityId,\n      final KijiDataRequest dataRequest,\n      final Result unpagedRawResult,\n      final HBaseKijiTable table,\n      final KijiTableLayout layout,\n      final HBaseColumnNameTranslator columnTranslator,\n      final CellDecoderProvider decoderProvider\n  )", "class_method_signature": "HBaseKijiResult.create(\n      final EntityId entityId,\n      final KijiDataRequest dataRequest,\n      final Result unpagedRawResult,\n      final HBaseKijiTable table,\n      final KijiTableLayout layout,\n      final HBaseColumnNameTranslator columnTranslator,\n      final CellDecoderProvider decoderProvider\n  )", "testcase": false, "constructor": false, "invocations": ["getColumns", "builder", "builder", "withTimeRange", "getMinTimestamp", "getMaxTimestamp", "withTimeRange", "getMinTimestamp", "getMaxTimestamp", "isPagingEnabled", "newColumnsDef", "newColumnsDef", "getDecoderProviderForRequest", "build", "build", "isEmpty", "isEmpty", "isEmpty", "create", "isEmpty", "isEmpty", "isEmpty", "create"]}, "repository": {"repo_id": 6682280, "url": "https://github.com/kijiproject/kiji-schema", "language": "Java", "is_fork": false, "fork_count": 44, "stargazer_count": 55, "size": 11689, "license": "licensed"}}