{"test_class": {"identifier": "DuraStoreStitchingRetrievalSourceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private DuraStoreStitchingRetrievalSource retrievalSource;", "modifier": "private", "type": "DuraStoreStitchingRetrievalSource", "declarator": "retrievalSource", "var_name": "retrievalSource"}, {"original_string": "private RetrievalListener listener;", "modifier": "private", "type": "RetrievalListener", "declarator": "listener", "var_name": "listener"}, {"original_string": "private ContentStore store;", "modifier": "private", "type": "ContentStore", "declarator": "store", "var_name": "store"}, {"original_string": "private List<String> spaces;", "modifier": "private", "type": "List<String>", "declarator": "spaces", "var_name": "spaces"}, {"original_string": "private final static boolean allSpaces = false;", "modifier": "private final static", "type": "boolean", "declarator": "allSpaces = false", "var_name": "allSpaces"}, {"original_string": "private final static String spaceId0 = \"space-0\";", "modifier": "private final static", "type": "String", "declarator": "spaceId0 = \"space-0\"", "var_name": "spaceId0"}, {"original_string": "private final static String spaceId1 = \"space-1\";", "modifier": "private final static", "type": "String", "declarator": "spaceId1 = \"space-1\"", "var_name": "spaceId1"}, {"original_string": "private final static String contentIdBase = \"content-id-\";", "modifier": "private final static", "type": "String", "declarator": "contentIdBase = \"content-id-\"", "var_name": "contentIdBase"}, {"original_string": "private List<String> contents0;", "modifier": "private", "type": "List<String>", "declarator": "contents0", "var_name": "contents0"}, {"original_string": "private List<String> contents1;", "modifier": "private", "type": "List<String>", "declarator": "contents1", "var_name": "contents1"}, {"original_string": "private List<InputStream> streams;", "modifier": "private", "type": "List<InputStream>", "declarator": "streams", "var_name": "streams"}], "file": "retrievaltool/src/test/java/org/duracloud/retrieval/source/DuraStoreStitchingRetrievalSourceTest.java"}, "test_case": {"identifier": "testGetNextContentItem", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetNextContentItem() throws Exception {\n        List<ContentType> types0 = new ArrayList<ContentType>();\n        types0.add(BASIC);\n        types0.add(BASIC);\n        types0.add(MANIFEST);\n        types0.add(CHUNK);\n        types0.add(BASIC);\n        types0.add(CHUNK);\n        types0.add(BASIC);\n\n        List<ContentType> types1 = new ArrayList<ContentType>();\n        types1.add(MANIFEST);\n        types1.add(BASIC);\n        types1.add(BASIC);\n        types1.add(CHUNK);\n        types1.add(CHUNK);\n        types1.add(BASIC);\n        types1.add(BASIC);\n\n        createGetNextContentItemMocks(types0, types1);\n        replayMocks();\n\n        retrievalSource = new DuraStoreStitchingRetrievalSource(store,\n                                                                spaces,\n                                                                allSpaces);\n        verifyContents(types0, spaceId0);\n        verifyContents(types1, spaceId1);\n\n        ContentItem item = retrievalSource.getNextContentItem();\n        Assert.assertNull(item);\n    }", "signature": "void testGetNextContentItem()", "full_signature": "@Test public void testGetNextContentItem()", "class_method_signature": "DuraStoreStitchingRetrievalSourceTest.testGetNextContentItem()", "testcase": true, "constructor": false, "invocations": ["add", "add", "add", "add", "add", "add", "add", "add", "add", "add", "add", "add", "add", "add", "createGetNextContentItemMocks", "replayMocks", "verifyContents", "verifyContents", "getNextContentItem", "assertNull"]}, "focal_class": {"identifier": "DuraStoreStitchingRetrievalSource", "superclass": "extends DuraStoreRetrievalSource", "interfaces": "", "fields": [{"original_string": "private final Logger log = LoggerFactory.getLogger(\n        DuraStoreStitchingRetrievalSource.class);", "modifier": "private final", "type": "Logger", "declarator": "log = LoggerFactory.getLogger(\n        DuraStoreStitchingRetrievalSource.class)", "var_name": "log"}, {"original_string": "private FileStitcher stitcher;", "modifier": "private", "type": "FileStitcher", "declarator": "stitcher", "var_name": "stitcher"}, {"original_string": "private ChunkUtil chunkUtil;", "modifier": "private", "type": "ChunkUtil", "declarator": "chunkUtil", "var_name": "chunkUtil"}], "methods": [{"identifier": "DuraStoreStitchingRetrievalSource", "parameters": "(ContentStore store,\n                                             List<String> spaces,\n                                             boolean allSpaces)", "modifiers": "public", "return": "", "signature": " DuraStoreStitchingRetrievalSource(ContentStore store,\n                                             List<String> spaces,\n                                             boolean allSpaces)", "full_signature": "public  DuraStoreStitchingRetrievalSource(ContentStore store,\n                                             List<String> spaces,\n                                             boolean allSpaces)", "class_method_signature": "DuraStoreStitchingRetrievalSource.DuraStoreStitchingRetrievalSource(ContentStore store,\n                                             List<String> spaces,\n                                             boolean allSpaces)", "testcase": false, "constructor": true}, {"identifier": "getNextContentItem", "parameters": "()", "modifiers": "@Override public synchronized", "return": "ContentItem", "signature": "ContentItem getNextContentItem()", "full_signature": "@Override public synchronized ContentItem getNextContentItem()", "class_method_signature": "DuraStoreStitchingRetrievalSource.getNextContentItem()", "testcase": false, "constructor": false}, {"identifier": "getSourceChecksum", "parameters": "(ContentItem contentItem)", "modifiers": "@Override public", "return": "String", "signature": "String getSourceChecksum(ContentItem contentItem)", "full_signature": "@Override public String getSourceChecksum(ContentItem contentItem)", "class_method_signature": "DuraStoreStitchingRetrievalSource.getSourceChecksum(ContentItem contentItem)", "testcase": false, "constructor": false}, {"identifier": "doGetContent", "parameters": "(ContentItem item, RetrievalListener listener)", "modifiers": "@Override protected", "return": "Content", "signature": "Content doGetContent(ContentItem item, RetrievalListener listener)", "full_signature": "@Override protected Content doGetContent(ContentItem item, RetrievalListener listener)", "class_method_signature": "DuraStoreStitchingRetrievalSource.doGetContent(ContentItem item, RetrievalListener listener)", "testcase": false, "constructor": false}, {"identifier": "doGetContentFromManifest", "parameters": "(ContentItem item, RetrievalListener listener)", "modifiers": "protected", "return": "Content", "signature": "Content doGetContentFromManifest(ContentItem item, RetrievalListener listener)", "full_signature": "protected Content doGetContentFromManifest(ContentItem item, RetrievalListener listener)", "class_method_signature": "DuraStoreStitchingRetrievalSource.doGetContentFromManifest(ContentItem item, RetrievalListener listener)", "testcase": false, "constructor": false}], "file": "retrievaltool/src/main/java/org/duracloud/retrieval/source/DuraStoreStitchingRetrievalSource.java"}, "focal_method": {"identifier": "getNextContentItem", "parameters": "()", "modifiers": "@Override public synchronized", "return": "ContentItem", "body": "@Override\n    public synchronized ContentItem getNextContentItem() {\n        log.debug(\"enter getNextContentItem()\");\n        ContentItem item = super.getNextContentItem();\n\n        // skip chunks.\n        if (null != item && chunkUtil.isChunk(item.getContentId())) {\n            log.debug(\"skipping chunk item: {}\", item);\n            item = getNextContentItem();\n        }\n\n        log.debug(\"returning item: {}\", item);\n        return item;\n    }", "signature": "ContentItem getNextContentItem()", "full_signature": "@Override public synchronized ContentItem getNextContentItem()", "class_method_signature": "DuraStoreStitchingRetrievalSource.getNextContentItem()", "testcase": false, "constructor": false, "invocations": ["debug", "getNextContentItem", "isChunk", "getContentId", "debug", "getNextContentItem", "debug"]}, "repository": {"repo_id": 3337772, "url": "https://github.com/duracloud/duracloud", "language": "Java", "is_fork": false, "fork_count": 15, "stargazer_count": 7, "size": 76851, "license": "licensed"}}