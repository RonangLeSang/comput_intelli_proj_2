{"test_class": {"identifier": "DAOSOAMetricsQueryServiceProviderTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private EntityManagerFactory entityManagerFactory;", "modifier": "private", "type": "EntityManagerFactory", "declarator": "entityManagerFactory", "var_name": "entityManagerFactory"}, {"original_string": "private SOAMetricsQueryServiceProvider provider;", "modifier": "private", "type": "SOAMetricsQueryServiceProvider", "declarator": "provider", "var_name": "provider"}, {"original_string": "private long now = 0l;", "modifier": "private", "type": "long", "declarator": "now = 0l", "var_name": "now"}, {"original_string": "private long sixtyMinsAgo = 0l;", "modifier": "private", "type": "long", "declarator": "sixtyMinsAgo = 0l", "var_name": "sixtyMinsAgo"}, {"original_string": "private long sixtyOneMinsAgo = 0l;", "modifier": "private", "type": "long", "declarator": "sixtyOneMinsAgo = 0l", "var_name": "sixtyOneMinsAgo"}, {"original_string": "private long sixtyTwoMinsAgo = 0l;", "modifier": "private", "type": "long", "declarator": "sixtyTwoMinsAgo = 0l", "var_name": "sixtyTwoMinsAgo"}, {"original_string": "private long oneMinuteAgo = 0l;", "modifier": "private", "type": "long", "declarator": "oneMinuteAgo = 0l", "var_name": "oneMinuteAgo"}, {"original_string": "private long twoMinutesAgo = 0l;", "modifier": "private", "type": "long", "declarator": "twoMinutesAgo = 0l", "var_name": "twoMinutesAgo"}], "file": "turmeric-monitoring-dao-provider/src/test/java/org/ebayopensource/turmeric/monitoring/provider/DAOSOAMetricsQueryServiceProviderTest.java"}, "test_case": {"identifier": "testGetMetricsDataByOperationOneServiceOneOperationAllConsumers", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetMetricsDataByOperationOneServiceOneOperationAllConsumers() {\n        long now = System.currentTimeMillis();\n        long oneHourAgo = now - TimeUnit.SECONDS.toMillis(3600);\n        long twoHoursAgo = oneHourAgo - TimeUnit.SECONDS.toMillis(3600);\n\n        MetricCriteria metricCriteria = new MetricCriteria();\n        metricCriteria.setSecondStartTime(oneHourAgo);\n        metricCriteria.setFirstStartTime(twoHoursAgo);\n        metricCriteria.setDuration(3600);\n        metricCriteria.setAggregationPeriod(60);\n        metricCriteria.setMetricName(\"CallCount\");\n\n        MetricResourceCriteria metricResourceCriteria = new MetricResourceCriteria();\n        ResourceEntityRequest entityRequest1 = new ResourceEntityRequest();\n        entityRequest1.setResourceEntityType(ResourceEntity.SERVICE);\n        entityRequest1.getResourceEntityName().add(\"service_1\");\n        metricResourceCriteria.getResourceRequestEntities().add(entityRequest1);\n        ResourceEntityRequest entityRequest2 = new ResourceEntityRequest();\n        entityRequest2.setResourceEntityType(ResourceEntity.OPERATION);\n        entityRequest2.getResourceEntityName().add(\"operation_1_2\");\n        metricResourceCriteria.getResourceRequestEntities().add(entityRequest2);\n        metricResourceCriteria.setResourceEntityResponseType(ResourceEntity.OPERATION.value());\n\n        List<MetricGroupData> result = provider.getMetricsData(metricCriteria, metricResourceCriteria);\n        // Only one operation requested\n        assertEquals(1, result.size());\n        assertEquals(\"operation_1_2\", result.get(0).getCriteriaInfo().getOperationName());\n        assertEquals(1, Double.valueOf(result.get(0).getCount1()).intValue());\n        assertEquals(3, Double.valueOf(result.get(0).getCount2()).intValue());\n    }", "signature": "void testGetMetricsDataByOperationOneServiceOneOperationAllConsumers()", "full_signature": "@Test public void testGetMetricsDataByOperationOneServiceOneOperationAllConsumers()", "class_method_signature": "DAOSOAMetricsQueryServiceProviderTest.testGetMetricsDataByOperationOneServiceOneOperationAllConsumers()", "testcase": true, "constructor": false, "invocations": ["currentTimeMillis", "toMillis", "toMillis", "setSecondStartTime", "setFirstStartTime", "setDuration", "setAggregationPeriod", "setMetricName", "setResourceEntityType", "add", "getResourceEntityName", "add", "getResourceRequestEntities", "setResourceEntityType", "add", "getResourceEntityName", "add", "getResourceRequestEntities", "setResourceEntityResponseType", "value", "getMetricsData", "assertEquals", "size", "assertEquals", "getOperationName", "getCriteriaInfo", "get", "assertEquals", "intValue", "valueOf", "getCount1", "get", "assertEquals", "intValue", "valueOf", "getCount2", "get"]}, "focal_class": {"identifier": "DAOSOAMetricsQueryServiceProvider", "superclass": "", "interfaces": "implements SOAMetricsQueryServiceProvider", "fields": [{"original_string": "private final SOAMetricsQueryServiceProvider delegate;", "modifier": "private final", "type": "SOAMetricsQueryServiceProvider", "declarator": "delegate", "var_name": "delegate"}], "methods": [{"identifier": "DAOSOAMetricsQueryServiceProvider", "parameters": "()", "modifiers": "public", "return": "", "signature": " DAOSOAMetricsQueryServiceProvider()", "full_signature": "public  DAOSOAMetricsQueryServiceProvider()", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.DAOSOAMetricsQueryServiceProvider()", "testcase": false, "constructor": true}, {"identifier": "DAOSOAMetricsQueryServiceProvider", "parameters": "(EntityManagerFactory entityManagerFactory)", "modifiers": "public", "return": "", "signature": " DAOSOAMetricsQueryServiceProvider(EntityManagerFactory entityManagerFactory)", "full_signature": "public  DAOSOAMetricsQueryServiceProvider(EntityManagerFactory entityManagerFactory)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.DAOSOAMetricsQueryServiceProvider(EntityManagerFactory entityManagerFactory)", "testcase": false, "constructor": true}, {"identifier": "getCustomReportData", "parameters": "(ReportCriteria reportCriteria, MetricCriteria metricCriteria)", "modifiers": "@Override public", "return": "List<MetricData>", "signature": "List<MetricData> getCustomReportData(ReportCriteria reportCriteria, MetricCriteria metricCriteria)", "full_signature": "@Override public List<MetricData> getCustomReportData(ReportCriteria reportCriteria, MetricCriteria metricCriteria)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.getCustomReportData(ReportCriteria reportCriteria, MetricCriteria metricCriteria)", "testcase": false, "constructor": false}, {"identifier": "getDetailData", "parameters": "(String dc, MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "modifiers": "@Override public", "return": "List<MetricData>", "signature": "List<MetricData> getDetailData(String dc, MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "full_signature": "@Override public List<MetricData> getDetailData(String dc, MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.getDetailData(String dc, MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "testcase": false, "constructor": false}, {"identifier": "getErrorGraph", "parameters": "(String serviceName, String operationName, String consumerName,\n                    String errorId, String errorCategory, String errorSeverity, MetricCriteria metricCriteria)", "modifiers": "@Override public", "return": "List<MetricGraphData>", "signature": "List<MetricGraphData> getErrorGraph(String serviceName, String operationName, String consumerName,\n                    String errorId, String errorCategory, String errorSeverity, MetricCriteria metricCriteria)", "full_signature": "@Override public List<MetricGraphData> getErrorGraph(String serviceName, String operationName, String consumerName,\n                    String errorId, String errorCategory, String errorSeverity, MetricCriteria metricCriteria)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.getErrorGraph(String serviceName, String operationName, String consumerName,\n                    String errorId, String errorCategory, String errorSeverity, MetricCriteria metricCriteria)", "testcase": false, "constructor": false}, {"identifier": "getErrorMetricsData", "parameters": "(String errorType, List<String> serviceName,\n                    List<String> operationName, List<String> consumerName, String errorId, String errorCategory,\n                    String errorSeverity, String errorName, MetricCriteria metricCriteria)", "modifiers": "@Override public", "return": "List<ErrorViewData>", "signature": "List<ErrorViewData> getErrorMetricsData(String errorType, List<String> serviceName,\n                    List<String> operationName, List<String> consumerName, String errorId, String errorCategory,\n                    String errorSeverity, String errorName, MetricCriteria metricCriteria)", "full_signature": "@Override public List<ErrorViewData> getErrorMetricsData(String errorType, List<String> serviceName,\n                    List<String> operationName, List<String> consumerName, String errorId, String errorCategory,\n                    String errorSeverity, String errorName, MetricCriteria metricCriteria)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.getErrorMetricsData(String errorType, List<String> serviceName,\n                    List<String> operationName, List<String> consumerName, String errorId, String errorCategory,\n                    String errorSeverity, String errorName, MetricCriteria metricCriteria)", "testcase": false, "constructor": false}, {"identifier": "getErrorMetricsMetadata", "parameters": "(String errorId, String errorName, String serviceName)", "modifiers": "@Override public", "return": "ErrorInfos", "signature": "ErrorInfos getErrorMetricsMetadata(String errorId, String errorName, String serviceName)", "full_signature": "@Override public ErrorInfos getErrorMetricsMetadata(String errorId, String errorName, String serviceName)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.getErrorMetricsMetadata(String errorId, String errorName, String serviceName)", "testcase": false, "constructor": false}, {"identifier": "getMetricsData", "parameters": "(MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "modifiers": "@Override public", "return": "List<MetricGroupData>", "signature": "List<MetricGroupData> getMetricsData(MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "full_signature": "@Override public List<MetricGroupData> getMetricsData(MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.getMetricsData(MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "testcase": false, "constructor": false}, {"identifier": "getMetricSummaryData", "parameters": "(String dc, MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "modifiers": "@Override public", "return": "MetricData", "signature": "MetricData getMetricSummaryData(String dc, MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "full_signature": "@Override public MetricData getMetricSummaryData(String dc, MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.getMetricSummaryData(String dc, MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "testcase": false, "constructor": false}, {"identifier": "getMetricValue", "parameters": "(CriteriaInfo criteriaInfo, long startTime, long duration, int step,\n                    String autoDelay)", "modifiers": "@Override public", "return": "List<MetricGraphData>", "signature": "List<MetricGraphData> getMetricValue(CriteriaInfo criteriaInfo, long startTime, long duration, int step,\n                    String autoDelay)", "full_signature": "@Override public List<MetricGraphData> getMetricValue(CriteriaInfo criteriaInfo, long startTime, long duration, int step,\n                    String autoDelay)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.getMetricValue(CriteriaInfo criteriaInfo, long startTime, long duration, int step,\n                    String autoDelay)", "testcase": false, "constructor": false}, {"identifier": "getPolicyMetricData", "parameters": "(long startTime, long endTime, String policyType,\n                    String policyName, String serviceName, String operationName, String subjectTypeName,\n                    String subjectValue, String effect)", "modifiers": "@Override public", "return": "List<PolicyMetricData>", "signature": "List<PolicyMetricData> getPolicyMetricData(long startTime, long endTime, String policyType,\n                    String policyName, String serviceName, String operationName, String subjectTypeName,\n                    String subjectValue, String effect)", "full_signature": "@Override public List<PolicyMetricData> getPolicyMetricData(long startTime, long endTime, String policyType,\n                    String policyName, String serviceName, String operationName, String subjectTypeName,\n                    String subjectValue, String effect)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.getPolicyMetricData(long startTime, long endTime, String policyType,\n                    String policyName, String serviceName, String operationName, String subjectTypeName,\n                    String subjectValue, String effect)", "testcase": false, "constructor": false}, {"identifier": "getPolicyMetricDetailData", "parameters": "(String policyName, String serviceName,\n                    String operationName, String subjectTypeName, String subjectValue, String listType, long startTime,\n                    long endTime)", "modifiers": "@Override public", "return": "List<PolicyMetricGraphData>", "signature": "List<PolicyMetricGraphData> getPolicyMetricDetailData(String policyName, String serviceName,\n                    String operationName, String subjectTypeName, String subjectValue, String listType, long startTime,\n                    long endTime)", "full_signature": "@Override public List<PolicyMetricGraphData> getPolicyMetricDetailData(String policyName, String serviceName,\n                    String operationName, String subjectTypeName, String subjectValue, String listType, long startTime,\n                    long endTime)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.getPolicyMetricDetailData(String policyName, String serviceName,\n                    String operationName, String subjectTypeName, String subjectValue, String listType, long startTime,\n                    long endTime)", "testcase": false, "constructor": false}, {"identifier": "getStandardReportData", "parameters": "(String reportType, MetricCriteria metricCriteria)", "modifiers": "@Override public", "return": "List<MetricData>", "signature": "List<MetricData> getStandardReportData(String reportType, MetricCriteria metricCriteria)", "full_signature": "@Override public List<MetricData> getStandardReportData(String reportType, MetricCriteria metricCriteria)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.getStandardReportData(String reportType, MetricCriteria metricCriteria)", "testcase": false, "constructor": false}, {"identifier": "getMetricsMetadata", "parameters": "(String resourceEntityType, List<String> resourceEntityName,\n                    String resourceEntityResponseType)", "modifiers": "@Override public", "return": "List<String>", "signature": "List<String> getMetricsMetadata(String resourceEntityType, List<String> resourceEntityName,\n                    String resourceEntityResponseType)", "full_signature": "@Override public List<String> getMetricsMetadata(String resourceEntityType, List<String> resourceEntityName,\n                    String resourceEntityResponseType)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.getMetricsMetadata(String resourceEntityType, List<String> resourceEntityName,\n                    String resourceEntityResponseType)", "testcase": false, "constructor": false}, {"identifier": "getExtendedErrorMetricsData", "parameters": "(String errorType, List<String> serviceName,\n                    List<String> operationName, List<String> consumerName, String errorId, String errorCategory,\n                    String errorSeverity, String errorName, MetricCriteria metricCriteria)", "modifiers": "@Override public", "return": "List<ExtendedErrorViewData>", "signature": "List<ExtendedErrorViewData> getExtendedErrorMetricsData(String errorType, List<String> serviceName,\n                    List<String> operationName, List<String> consumerName, String errorId, String errorCategory,\n                    String errorSeverity, String errorName, MetricCriteria metricCriteria)", "full_signature": "@Override public List<ExtendedErrorViewData> getExtendedErrorMetricsData(String errorType, List<String> serviceName,\n                    List<String> operationName, List<String> consumerName, String errorId, String errorCategory,\n                    String errorSeverity, String errorName, MetricCriteria metricCriteria)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.getExtendedErrorMetricsData(String errorType, List<String> serviceName,\n                    List<String> operationName, List<String> consumerName, String errorId, String errorCategory,\n                    String errorSeverity, String errorName, MetricCriteria metricCriteria)", "testcase": false, "constructor": false}], "file": "turmeric-monitoring-dao-provider/src/main/java/org/ebayopensource/turmeric/monitoring/provider/DAOSOAMetricsQueryServiceProvider.java"}, "focal_method": {"identifier": "getMetricsData", "parameters": "(MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "modifiers": "@Override public", "return": "List<MetricGroupData>", "body": "@Override\n    public List<MetricGroupData> getMetricsData(MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria) {\n        return delegate.getMetricsData(metricCriteria, metricResourceCriteria);\n    }", "signature": "List<MetricGroupData> getMetricsData(MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "full_signature": "@Override public List<MetricGroupData> getMetricsData(MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "class_method_signature": "DAOSOAMetricsQueryServiceProvider.getMetricsData(MetricCriteria metricCriteria,\n                    MetricResourceCriteria metricResourceCriteria)", "testcase": false, "constructor": false, "invocations": ["getMetricsData"]}, "repository": {"repo_id": 1772795, "url": "https://github.com/ebayopensource/turmeric-monitoring", "language": "Java", "is_fork": false, "fork_count": 10, "stargazer_count": 15, "size": 4476, "license": "licensed"}}