{"test_class": {"identifier": "FormSubmissionRouterTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Mock\n    private FormDataRepository formDataRepository;", "modifier": "@Mock\n    private", "type": "FormDataRepository", "declarator": "formDataRepository", "var_name": "formDataRepository"}, {"original_string": "@Mock\n    private ECRegistrationHandler ecRegistrationHandler;", "modifier": "@Mock\n    private", "type": "ECRegistrationHandler", "declarator": "ecRegistrationHandler", "var_name": "ecRegistrationHandler"}, {"original_string": "@Mock\n    private FPComplicationsHandler fpComplicationsHandler;", "modifier": "@Mock\n    private", "type": "FPComplicationsHandler", "declarator": "fpComplicationsHandler", "var_name": "fpComplicationsHandler"}, {"original_string": "@Mock\n    private FPChangeHandler fpChangeHandler;", "modifier": "@Mock\n    private", "type": "FPChangeHandler", "declarator": "fpChangeHandler", "var_name": "fpChangeHandler"}, {"original_string": "@Mock\n    private RenewFPProductHandler renewFPProductHandler;", "modifier": "@Mock\n    private", "type": "RenewFPProductHandler", "declarator": "renewFPProductHandler", "var_name": "renewFPProductHandler"}, {"original_string": "@Mock\n    private ECCloseHandler ecCloseHandler;", "modifier": "@Mock\n    private", "type": "ECCloseHandler", "declarator": "ecCloseHandler", "var_name": "ecCloseHandler"}, {"original_string": "@Mock\n    private ANCCloseHandler ancCloseHandler;", "modifier": "@Mock\n    private", "type": "ANCCloseHandler", "declarator": "ancCloseHandler", "var_name": "ancCloseHandler"}, {"original_string": "@Mock\n    private ANCRegistrationHandler ancRegistrationHandler;", "modifier": "@Mock\n    private", "type": "ANCRegistrationHandler", "declarator": "ancRegistrationHandler", "var_name": "ancRegistrationHandler"}, {"original_string": "@Mock\n    private ANCRegistrationOAHandler ancRegistrationOAHandler;", "modifier": "@Mock\n    private", "type": "ANCRegistrationOAHandler", "declarator": "ancRegistrationOAHandler", "var_name": "ancRegistrationOAHandler"}, {"original_string": "@Mock\n    private ANCVisitHandler ancVisitHandler;", "modifier": "@Mock\n    private", "type": "ANCVisitHandler", "declarator": "ancVisitHandler", "var_name": "ancVisitHandler"}, {"original_string": "@Mock\n    private TTHandler ttHandler;", "modifier": "@Mock\n    private", "type": "TTHandler", "declarator": "ttHandler", "var_name": "ttHandler"}, {"original_string": "@Mock\n    private IFAHandler ifaHandler;", "modifier": "@Mock\n    private", "type": "IFAHandler", "declarator": "ifaHandler", "var_name": "ifaHandler"}, {"original_string": "@Mock\n    private HBTestHandler hbTestHandler;", "modifier": "@Mock\n    private", "type": "HBTestHandler", "declarator": "hbTestHandler", "var_name": "hbTestHandler"}, {"original_string": "@Mock\n    private DeliveryOutcomeHandler deliveryOutcomeHandler;", "modifier": "@Mock\n    private", "type": "DeliveryOutcomeHandler", "declarator": "deliveryOutcomeHandler", "var_name": "deliveryOutcomeHandler"}, {"original_string": "@Mock\n    private PNCRegistrationOAHandler pncRegistrationOAHandler;", "modifier": "@Mock\n    private", "type": "PNCRegistrationOAHandler", "declarator": "pncRegistrationOAHandler", "var_name": "pncRegistrationOAHandler"}, {"original_string": "@Mock\n    private PNCCloseHandler pncCloseHandler;", "modifier": "@Mock\n    private", "type": "PNCCloseHandler", "declarator": "pncCloseHandler", "var_name": "pncCloseHandler"}, {"original_string": "@Mock\n    private PNCVisitHandler pncVisitHandler;", "modifier": "@Mock\n    private", "type": "PNCVisitHandler", "declarator": "pncVisitHandler", "var_name": "pncVisitHandler"}, {"original_string": "@Mock\n    private ChildImmunizationsHandler childImmunizationsHandler;", "modifier": "@Mock\n    private", "type": "ChildImmunizationsHandler", "declarator": "childImmunizationsHandler", "var_name": "childImmunizationsHandler"}, {"original_string": "@Mock\n    private ChildRegistrationECHandler childRegistrationECHandler;", "modifier": "@Mock\n    private", "type": "ChildRegistrationECHandler", "declarator": "childRegistrationECHandler", "var_name": "childRegistrationECHandler"}, {"original_string": "@Mock\n    private ChildRegistrationOAHandler childRegistrationOAHandler;", "modifier": "@Mock\n    private", "type": "ChildRegistrationOAHandler", "declarator": "childRegistrationOAHandler", "var_name": "childRegistrationOAHandler"}, {"original_string": "@Mock\n    private ChildCloseHandler childCloseHandler;", "modifier": "@Mock\n    private", "type": "ChildCloseHandler", "declarator": "childCloseHandler", "var_name": "childCloseHandler"}, {"original_string": "@Mock\n    private ChildIllnessHandler childIllnessHandler;", "modifier": "@Mock\n    private", "type": "ChildIllnessHandler", "declarator": "childIllnessHandler", "var_name": "childIllnessHandler"}, {"original_string": "@Mock\n    private VitaminAHandler vitaminAHandler;", "modifier": "@Mock\n    private", "type": "VitaminAHandler", "declarator": "vitaminAHandler", "var_name": "vitaminAHandler"}, {"original_string": "@Mock\n    private DeliveryPlanHandler deliveryPlanHandler;", "modifier": "@Mock\n    private", "type": "DeliveryPlanHandler", "declarator": "deliveryPlanHandler", "var_name": "deliveryPlanHandler"}, {"original_string": "@Mock\n    private ECEditHandler ecEditHandler;", "modifier": "@Mock\n    private", "type": "ECEditHandler", "declarator": "ecEditHandler", "var_name": "ecEditHandler"}, {"original_string": "@Mock\n    private ANCInvestigationsHandler ancInvestigationsHandler;", "modifier": "@Mock\n    private", "type": "ANCInvestigationsHandler", "declarator": "ancInvestigationsHandler", "var_name": "ancInvestigationsHandler"}, {"original_string": "@Mock\n    private Listener<String> formSubmittedListener;", "modifier": "@Mock\n    private", "type": "Listener<String>", "declarator": "formSubmittedListener", "var_name": "formSubmittedListener"}, {"original_string": "private FormSubmissionRouter router;", "modifier": "private", "type": "FormSubmissionRouter", "declarator": "router", "var_name": "router"}], "file": "dristhi-app/src/test/java/org/ei/drishti/service/formSubmissionHandler/FormSubmissionRouterTest.java"}, "test_case": {"identifier": "shouldDelegatePNCRegistrationFormSubmissionHandlingToPNCRegistrationHandler", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void shouldDelegatePNCRegistrationFormSubmissionHandlingToPNCRegistrationHandler() throws Exception {\n        FormSubmission formSubmission = create().withFormName(\"pnc_registration_oa\").withInstanceId(\"instance id 1\").withVersion(\"122\").build();\n        when(formDataRepository.fetchFromSubmission(\"instance id 1\")).thenReturn(formSubmission);\n\n        router.route(\"instance id 1\");\n\n        verify(formDataRepository).fetchFromSubmission(\"instance id 1\");\n        verify(pncRegistrationOAHandler).handle(formSubmission);\n    }", "signature": "void shouldDelegatePNCRegistrationFormSubmissionHandlingToPNCRegistrationHandler()", "full_signature": "@Test public void shouldDelegatePNCRegistrationFormSubmissionHandlingToPNCRegistrationHandler()", "class_method_signature": "FormSubmissionRouterTest.shouldDelegatePNCRegistrationFormSubmissionHandlingToPNCRegistrationHandler()", "testcase": true, "constructor": false, "invocations": ["build", "withVersion", "withInstanceId", "withFormName", "create", "thenReturn", "when", "fetchFromSubmission", "route", "fetchFromSubmission", "verify", "handle", "verify"]}, "focal_class": {"identifier": "FormSubmissionRouter", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final Map<String, FormSubmissionHandler> handlerMap;", "modifier": "private final", "type": "Map<String, FormSubmissionHandler>", "declarator": "handlerMap", "var_name": "handlerMap"}, {"original_string": "private FormDataRepository formDataRepository;", "modifier": "private", "type": "FormDataRepository", "declarator": "formDataRepository", "var_name": "formDataRepository"}], "methods": [{"identifier": "FormSubmissionRouter", "parameters": "(FormDataRepository formDataRepository,\n                                ECRegistrationHandler ecRegistrationHandler,\n                                FPComplicationsHandler fpComplicationsHandler,\n                                FPChangeHandler fpChangeHandler,\n                                RenewFPProductHandler renewFPProductHandler,\n                                ECCloseHandler ecCloseHandler,\n                                ANCRegistrationHandler ancRegistrationHandler,\n                                ANCRegistrationOAHandler ancRegistrationOAHandler,\n                                ANCVisitHandler ancVisitHandler,\n                                ANCCloseHandler ancCloseHandler,\n                                TTHandler ttHandler,\n                                IFAHandler ifaHandler,\n                                HBTestHandler hbTestHandler,\n                                DeliveryOutcomeHandler deliveryOutcomeHandler,\n                                PNCRegistrationOAHandler pncRegistrationOAHandler,\n                                PNCCloseHandler pncCloseHandler,\n                                PNCVisitHandler pncVisitHandler,\n                                ChildImmunizationsHandler childImmunizationsHandler,\n                                ChildRegistrationECHandler childRegistrationECHandler,\n                                ChildRegistrationOAHandler childRegistrationOAHandler,\n                                ChildCloseHandler childCloseHandler, ChildIllnessHandler childIllnessHandler,\n                                VitaminAHandler vitaminAHandler, DeliveryPlanHandler deliveryPlanHandler,\n                                ECEditHandler ecEditHandler, ANCInvestigationsHandler ancInvestigationsHandler)", "modifiers": "public", "return": "", "signature": " FormSubmissionRouter(FormDataRepository formDataRepository,\n                                ECRegistrationHandler ecRegistrationHandler,\n                                FPComplicationsHandler fpComplicationsHandler,\n                                FPChangeHandler fpChangeHandler,\n                                RenewFPProductHandler renewFPProductHandler,\n                                ECCloseHandler ecCloseHandler,\n                                ANCRegistrationHandler ancRegistrationHandler,\n                                ANCRegistrationOAHandler ancRegistrationOAHandler,\n                                ANCVisitHandler ancVisitHandler,\n                                ANCCloseHandler ancCloseHandler,\n                                TTHandler ttHandler,\n                                IFAHandler ifaHandler,\n                                HBTestHandler hbTestHandler,\n                                DeliveryOutcomeHandler deliveryOutcomeHandler,\n                                PNCRegistrationOAHandler pncRegistrationOAHandler,\n                                PNCCloseHandler pncCloseHandler,\n                                PNCVisitHandler pncVisitHandler,\n                                ChildImmunizationsHandler childImmunizationsHandler,\n                                ChildRegistrationECHandler childRegistrationECHandler,\n                                ChildRegistrationOAHandler childRegistrationOAHandler,\n                                ChildCloseHandler childCloseHandler, ChildIllnessHandler childIllnessHandler,\n                                VitaminAHandler vitaminAHandler, DeliveryPlanHandler deliveryPlanHandler,\n                                ECEditHandler ecEditHandler, ANCInvestigationsHandler ancInvestigationsHandler)", "full_signature": "public  FormSubmissionRouter(FormDataRepository formDataRepository,\n                                ECRegistrationHandler ecRegistrationHandler,\n                                FPComplicationsHandler fpComplicationsHandler,\n                                FPChangeHandler fpChangeHandler,\n                                RenewFPProductHandler renewFPProductHandler,\n                                ECCloseHandler ecCloseHandler,\n                                ANCRegistrationHandler ancRegistrationHandler,\n                                ANCRegistrationOAHandler ancRegistrationOAHandler,\n                                ANCVisitHandler ancVisitHandler,\n                                ANCCloseHandler ancCloseHandler,\n                                TTHandler ttHandler,\n                                IFAHandler ifaHandler,\n                                HBTestHandler hbTestHandler,\n                                DeliveryOutcomeHandler deliveryOutcomeHandler,\n                                PNCRegistrationOAHandler pncRegistrationOAHandler,\n                                PNCCloseHandler pncCloseHandler,\n                                PNCVisitHandler pncVisitHandler,\n                                ChildImmunizationsHandler childImmunizationsHandler,\n                                ChildRegistrationECHandler childRegistrationECHandler,\n                                ChildRegistrationOAHandler childRegistrationOAHandler,\n                                ChildCloseHandler childCloseHandler, ChildIllnessHandler childIllnessHandler,\n                                VitaminAHandler vitaminAHandler, DeliveryPlanHandler deliveryPlanHandler,\n                                ECEditHandler ecEditHandler, ANCInvestigationsHandler ancInvestigationsHandler)", "class_method_signature": "FormSubmissionRouter.FormSubmissionRouter(FormDataRepository formDataRepository,\n                                ECRegistrationHandler ecRegistrationHandler,\n                                FPComplicationsHandler fpComplicationsHandler,\n                                FPChangeHandler fpChangeHandler,\n                                RenewFPProductHandler renewFPProductHandler,\n                                ECCloseHandler ecCloseHandler,\n                                ANCRegistrationHandler ancRegistrationHandler,\n                                ANCRegistrationOAHandler ancRegistrationOAHandler,\n                                ANCVisitHandler ancVisitHandler,\n                                ANCCloseHandler ancCloseHandler,\n                                TTHandler ttHandler,\n                                IFAHandler ifaHandler,\n                                HBTestHandler hbTestHandler,\n                                DeliveryOutcomeHandler deliveryOutcomeHandler,\n                                PNCRegistrationOAHandler pncRegistrationOAHandler,\n                                PNCCloseHandler pncCloseHandler,\n                                PNCVisitHandler pncVisitHandler,\n                                ChildImmunizationsHandler childImmunizationsHandler,\n                                ChildRegistrationECHandler childRegistrationECHandler,\n                                ChildRegistrationOAHandler childRegistrationOAHandler,\n                                ChildCloseHandler childCloseHandler, ChildIllnessHandler childIllnessHandler,\n                                VitaminAHandler vitaminAHandler, DeliveryPlanHandler deliveryPlanHandler,\n                                ECEditHandler ecEditHandler, ANCInvestigationsHandler ancInvestigationsHandler)", "testcase": false, "constructor": true}, {"identifier": "route", "parameters": "(String instanceId)", "modifiers": "public", "return": "void", "signature": "void route(String instanceId)", "full_signature": "public void route(String instanceId)", "class_method_signature": "FormSubmissionRouter.route(String instanceId)", "testcase": false, "constructor": false}], "file": "dristhi-app/src/main/java/org/ei/drishti/service/formSubmissionHandler/FormSubmissionRouter.java"}, "focal_method": {"identifier": "route", "parameters": "(String instanceId)", "modifiers": "public", "return": "void", "body": "public void route(String instanceId) throws Exception {\n        FormSubmission submission = formDataRepository.fetchFromSubmission(instanceId);\n        FormSubmissionHandler handler = handlerMap.get(submission.formName());\n        if (handler == null) {\n            logWarn(\"Could not find a handler due to unknown form submission: \" + submission);\n        } else {\n            try {\n                handler.handle(submission);\n            } catch (Exception e) {\n                Log.logError(format(\"Handling {0} form submission with instance Id: {1} for entity: {2} failed with exception : {3}\",\n                        submission.formName(), submission.instanceId(), submission.entityId(), ExceptionUtils.getStackTrace(e)));\n                throw e;\n            }\n        }\n        FORM_SUBMITTED.notifyListeners(instanceId);\n    }", "signature": "void route(String instanceId)", "full_signature": "public void route(String instanceId)", "class_method_signature": "FormSubmissionRouter.route(String instanceId)", "testcase": false, "constructor": false, "invocations": ["fetchFromSubmission", "get", "formName", "logWarn", "handle", "logError", "format", "formName", "instanceId", "entityId", "getStackTrace", "notifyListeners"]}, "repository": {"repo_id": 5104280, "url": "https://github.com/SEL-Columbia/dristhi-app", "language": "Java", "is_fork": false, "fork_count": 49, "stargazer_count": 11, "size": 79156, "license": "licensed"}}