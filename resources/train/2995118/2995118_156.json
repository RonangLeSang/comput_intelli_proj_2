{"test_class": {"identifier": "StudyTrackingOperationServiceImplTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private StudyTrackingOperationServiceImpl studyTrackingOperationService;", "modifier": "private", "type": "StudyTrackingOperationServiceImpl", "declarator": "studyTrackingOperationService", "var_name": "studyTrackingOperationService"}, {"original_string": "@Mock\n    private EventOperationsService eventOperationsService;", "modifier": "@Mock\n    private", "type": "EventOperationsService", "declarator": "eventOperationsService", "var_name": "eventOperationsService"}, {"original_string": "private static final SecureUser SECURE_USER =\n            new SecureUserBuilder().setId(564L).setEmail(\"test@test.com\").setPasswordHash(\"738274$$\").build();", "modifier": "private static final", "type": "SecureUser", "declarator": "SECURE_USER =\n            new SecureUserBuilder().setId(564L).setEmail(\"test@test.com\").setPasswordHash(\"738274$$\").build()", "var_name": "SECURE_USER"}, {"original_string": "private static final Study STUDY = new StudyBuilder().setId(100L).build();", "modifier": "private static final", "type": "Study", "declarator": "STUDY = new StudyBuilder().setId(100L).build()", "var_name": "STUDY"}, {"original_string": "private static final Event CREATE_EVENT = new EventBuilder().setId(99L)\n            .setEventDate(new java.sql.Date(System.currentTimeMillis()))\n            .setUser(SECURE_USER)\n            .setEventType(\"STUDY_CREATION\")\n            .build();", "modifier": "private static final", "type": "Event", "declarator": "CREATE_EVENT = new EventBuilder().setId(99L)\n            .setEventDate(new java.sql.Date(System.currentTimeMillis()))\n            .setUser(SECURE_USER)\n            .setEventType(\"STUDY_CREATION\")\n            .build()", "var_name": "CREATE_EVENT"}, {"original_string": "private static final Event STATUS_EVENT = new EventBuilder().setId(98L)\n            .setEventDate(new java.sql.Date(System.currentTimeMillis()))\n            .setUser(SECURE_USER)\n            .setEventType(\"STUDY_STATUS_CHANGE_LEVEL_1_CURATION_DONE\")\n            .build();", "modifier": "private static final", "type": "Event", "declarator": "STATUS_EVENT = new EventBuilder().setId(98L)\n            .setEventDate(new java.sql.Date(System.currentTimeMillis()))\n            .setUser(SECURE_USER)\n            .setEventType(\"STUDY_STATUS_CHANGE_LEVEL_1_CURATION_DONE\")\n            .build()", "var_name": "STATUS_EVENT"}, {"original_string": "private static final Event UPDATE_EVENT = new EventBuilder().setId(97L)\n            .setEventDate(new java.sql.Date(System.currentTimeMillis()))\n            .setUser(SECURE_USER)\n            .setEventType(\"STUDY_UPDATE\")\n            .build();", "modifier": "private static final", "type": "Event", "declarator": "UPDATE_EVENT = new EventBuilder().setId(97L)\n            .setEventDate(new java.sql.Date(System.currentTimeMillis()))\n            .setUser(SECURE_USER)\n            .setEventType(\"STUDY_UPDATE\")\n            .build()", "var_name": "UPDATE_EVENT"}, {"original_string": "private static final Event DELETE_EVENT = new EventBuilder().setId(96L)\n            .setEventDate(new java.sql.Date(System.currentTimeMillis()))\n            .setUser(SECURE_USER)\n            .setEventType(\"STUDY_DELETION\")\n            .build();", "modifier": "private static final", "type": "Event", "declarator": "DELETE_EVENT = new EventBuilder().setId(96L)\n            .setEventDate(new java.sql.Date(System.currentTimeMillis()))\n            .setUser(SECURE_USER)\n            .setEventType(\"STUDY_DELETION\")\n            .build()", "var_name": "DELETE_EVENT"}, {"original_string": "private static final Event UPDATE_EVENT_WITH_DESCRIPTION = new EventBuilder().setId(97L)\n            .setEventDate(new java.sql.Date(System.currentTimeMillis()))\n            .setUser(SECURE_USER)\n            .setEventType(\"STUDY_UPDATE\")\n            .setEventDescription(\"DESCRIPTION\")\n            .build();", "modifier": "private static final", "type": "Event", "declarator": "UPDATE_EVENT_WITH_DESCRIPTION = new EventBuilder().setId(97L)\n            .setEventDate(new java.sql.Date(System.currentTimeMillis()))\n            .setUser(SECURE_USER)\n            .setEventType(\"STUDY_UPDATE\")\n            .setEventDescription(\"DESCRIPTION\")\n            .build()", "var_name": "UPDATE_EVENT_WITH_DESCRIPTION"}], "file": "goci-core/goci-tracking/src/test/java/uk/ac/ebi/spot/goci/service/StudyTrackingOperationServiceImplTest.java"}, "test_case": {"identifier": "delete", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void delete() throws Exception {\n        when(eventOperationsService.createEvent(\"STUDY_DELETION\", SECURE_USER)).thenReturn(DELETE_EVENT);\n        studyTrackingOperationService.delete(STUDY, SECURE_USER);\n        verify(eventOperationsService, times(1)).createEvent(\"STUDY_DELETION\", SECURE_USER);\n        assertThat(STUDY.getEvents()).hasSize(1);\n        assertThat(STUDY.getEvents()).extracting(event -> event.getUser().getEmail()).containsOnly(\"test@test.com\");\n        assertThat(STUDY.getEvents()).extracting(event -> event.getEventType())\n                .containsOnly(\"STUDY_DELETION\");\n        assertThat(STUDY.getEvents()).extracting(event -> event.getEventDate()).isNotNull();\n    }", "signature": "void delete()", "full_signature": "@Test public void delete()", "class_method_signature": "StudyTrackingOperationServiceImplTest.delete()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "createEvent", "delete", "createEvent", "verify", "times", "hasSize", "assertThat", "getEvents", "containsOnly", "extracting", "assertThat", "getEvents", "getEmail", "getUser", "containsOnly", "extracting", "assertThat", "getEvents", "getEventType", "isNotNull", "extracting", "assertThat", "getEvents", "getEventDate"]}, "focal_class": {"identifier": "StudyTrackingOperationServiceImpl", "superclass": "", "interfaces": "implements TrackingOperationService", "fields": [{"original_string": "private EventOperationsService eventOperationsService;", "modifier": "private", "type": "EventOperationsService", "declarator": "eventOperationsService", "var_name": "eventOperationsService"}], "methods": [{"identifier": "StudyTrackingOperationServiceImpl", "parameters": "(EventOperationsService eventOperationsService)", "modifiers": "@Autowired public", "return": "", "signature": " StudyTrackingOperationServiceImpl(EventOperationsService eventOperationsService)", "full_signature": "@Autowired public  StudyTrackingOperationServiceImpl(EventOperationsService eventOperationsService)", "class_method_signature": "StudyTrackingOperationServiceImpl.StudyTrackingOperationServiceImpl(EventOperationsService eventOperationsService)", "testcase": false, "constructor": true}, {"identifier": "create", "parameters": "(Trackable trackable, SecureUser secureUser)", "modifiers": "@Override public", "return": "void", "signature": "void create(Trackable trackable, SecureUser secureUser)", "full_signature": "@Override public void create(Trackable trackable, SecureUser secureUser)", "class_method_signature": "StudyTrackingOperationServiceImpl.create(Trackable trackable, SecureUser secureUser)", "testcase": false, "constructor": false}, {"identifier": "update", "parameters": "(Trackable trackable, SecureUser secureUser, String eventType)", "modifiers": "@Override public", "return": "void", "signature": "void update(Trackable trackable, SecureUser secureUser, String eventType)", "full_signature": "@Override public void update(Trackable trackable, SecureUser secureUser, String eventType)", "class_method_signature": "StudyTrackingOperationServiceImpl.update(Trackable trackable, SecureUser secureUser, String eventType)", "testcase": false, "constructor": false}, {"identifier": "update", "parameters": "(Trackable trackable, SecureUser secureUser, String eventType, String description)", "modifiers": "@Override public", "return": "void", "signature": "void update(Trackable trackable, SecureUser secureUser, String eventType, String description)", "full_signature": "@Override public void update(Trackable trackable, SecureUser secureUser, String eventType, String description)", "class_method_signature": "StudyTrackingOperationServiceImpl.update(Trackable trackable, SecureUser secureUser, String eventType, String description)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(Trackable trackable, SecureUser secureUser)", "modifiers": "@Override public", "return": "void", "signature": "void delete(Trackable trackable, SecureUser secureUser)", "full_signature": "@Override public void delete(Trackable trackable, SecureUser secureUser)", "class_method_signature": "StudyTrackingOperationServiceImpl.delete(Trackable trackable, SecureUser secureUser)", "testcase": false, "constructor": false}], "file": "goci-core/goci-tracking/src/main/java/uk/ac/ebi/spot/goci/service/StudyTrackingOperationServiceImpl.java"}, "focal_method": {"identifier": "delete", "parameters": "(Trackable trackable, SecureUser secureUser)", "modifiers": "@Override public", "return": "void", "body": "@Override public void delete(Trackable trackable, SecureUser secureUser) {\n        Event deleteEvent = eventOperationsService.createEvent(\"STUDY_DELETION\", secureUser);\n        trackable.addEvent(deleteEvent);\n    }", "signature": "void delete(Trackable trackable, SecureUser secureUser)", "full_signature": "@Override public void delete(Trackable trackable, SecureUser secureUser)", "class_method_signature": "StudyTrackingOperationServiceImpl.delete(Trackable trackable, SecureUser secureUser)", "testcase": false, "constructor": false, "invocations": ["createEvent", "addEvent"]}, "repository": {"repo_id": 2995118, "url": "https://github.com/EBISPOT/goci", "language": "Java", "is_fork": false, "fork_count": 17, "stargazer_count": 16, "size": 147335, "license": "licensed"}}