{"test_class": {"identifier": "DirectSerializationMetadataTest", "superclass": "", "interfaces": "", "fields": [], "file": "lang-sandbox/src/test/java/net/openhft/lang/io/serialization/direct/DirectSerializationMetadataTest.java"}, "test_case": {"identifier": "primitives4Metadata", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void primitives4Metadata() {\n        unsafeClassHeaderSize64BitCompressedOops(new Primitives4());\n\n        SerializationMetadata serializationMetadata = extractMetadata(Introspect.fields(Primitives4.class));\n        assertEquals(OBJECT_HEADER_SIZE, serializationMetadata.start);\n        assertEquals(4, serializationMetadata.length);\n    }", "signature": "void primitives4Metadata()", "full_signature": "@Test public void primitives4Metadata()", "class_method_signature": "DirectSerializationMetadataTest.primitives4Metadata()", "testcase": true, "constructor": false, "invocations": ["unsafeClassHeaderSize64BitCompressedOops", "extractMetadata", "fields", "assertEquals", "assertEquals"]}, "focal_class": {"identifier": "DirectSerializationMetadata", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final int OBJECT_ALIGNMENT = 8;", "modifier": "private static final", "type": "int", "declarator": "OBJECT_ALIGNMENT = 8", "var_name": "OBJECT_ALIGNMENT"}, {"original_string": "private static final int OBJECT_ALIGNMENT_MASK = OBJECT_ALIGNMENT - 1;", "modifier": "private static final", "type": "int", "declarator": "OBJECT_ALIGNMENT_MASK = OBJECT_ALIGNMENT - 1", "var_name": "OBJECT_ALIGNMENT_MASK"}, {"original_string": "static final long NATIVE_WORD_SIZE = Jvm.is64Bit() ? 8 : 4;", "modifier": "static final", "type": "long", "declarator": "NATIVE_WORD_SIZE = Jvm.is64Bit() ? 8 : 4", "var_name": "NATIVE_WORD_SIZE"}, {"original_string": "private static final long OOP_SIZE = UNSAFE.arrayIndexScale(Object[].class);", "modifier": "private static final", "type": "long", "declarator": "OOP_SIZE = UNSAFE.arrayIndexScale(Object[].class)", "var_name": "OOP_SIZE"}, {"original_string": "static final long OBJECT_HEADER_SIZE = NATIVE_WORD_SIZE + OOP_SIZE;", "modifier": "static final", "type": "long", "declarator": "OBJECT_HEADER_SIZE = NATIVE_WORD_SIZE + OOP_SIZE", "var_name": "OBJECT_HEADER_SIZE"}, {"original_string": "private static final SerializationMetadata EmptyObjectMetadata = new SerializationMetadata(0, 0);", "modifier": "private static final", "type": "SerializationMetadata", "declarator": "EmptyObjectMetadata = new SerializationMetadata(0, 0)", "var_name": "EmptyObjectMetadata"}], "methods": [{"identifier": "extractMetadata", "parameters": "(List<Field> fields)", "modifiers": "public static", "return": "SerializationMetadata", "signature": "SerializationMetadata extractMetadata(List<Field> fields)", "full_signature": "public static SerializationMetadata extractMetadata(List<Field> fields)", "class_method_signature": "DirectSerializationMetadata.extractMetadata(List<Field> fields)", "testcase": false, "constructor": false}, {"identifier": "extractMetadataForPartialCopy", "parameters": "(List<Field> fields)", "modifiers": "public static", "return": "SerializationMetadata", "signature": "SerializationMetadata extractMetadataForPartialCopy(List<Field> fields)", "full_signature": "public static SerializationMetadata extractMetadataForPartialCopy(List<Field> fields)", "class_method_signature": "DirectSerializationMetadata.extractMetadataForPartialCopy(List<Field> fields)", "testcase": false, "constructor": false}, {"identifier": "minMaxOffsets", "parameters": "(List<Field> fields)", "modifiers": "private static", "return": "Offsets", "signature": "Offsets minMaxOffsets(List<Field> fields)", "full_signature": "private static Offsets minMaxOffsets(List<Field> fields)", "class_method_signature": "DirectSerializationMetadata.minMaxOffsets(List<Field> fields)", "testcase": false, "constructor": false}, {"identifier": "padToObjectAlignment", "parameters": "(long length)", "modifiers": "private static", "return": "long", "signature": "long padToObjectAlignment(long length)", "full_signature": "private static long padToObjectAlignment(long length)", "class_method_signature": "DirectSerializationMetadata.padToObjectAlignment(long length)", "testcase": false, "constructor": false}, {"identifier": "sizeOf", "parameters": "(Field field)", "modifiers": "private static", "return": "long", "signature": "long sizeOf(Field field)", "full_signature": "private static long sizeOf(Field field)", "class_method_signature": "DirectSerializationMetadata.sizeOf(Field field)", "testcase": false, "constructor": false}], "file": "lang-sandbox/src/main/java/net/openhft/lang/io/serialization/direct/DirectSerializationMetadata.java"}, "focal_method": {"identifier": "extractMetadata", "parameters": "(List<Field> fields)", "modifiers": "public static", "return": "SerializationMetadata", "body": "public static SerializationMetadata extractMetadata(List<Field> fields) {\n        if (fields.isEmpty()) return EmptyObjectMetadata;\n\n        Offsets offsets = minMaxOffsets(fields);\n\n        long totalSize = OBJECT_HEADER_SIZE + offsets.max - offsets.min + 1;\n        return new SerializationMetadata(offsets.min, padToObjectAlignment(totalSize) - OBJECT_HEADER_SIZE);\n    }", "signature": "SerializationMetadata extractMetadata(List<Field> fields)", "full_signature": "public static SerializationMetadata extractMetadata(List<Field> fields)", "class_method_signature": "DirectSerializationMetadata.extractMetadata(List<Field> fields)", "testcase": false, "constructor": false, "invocations": ["isEmpty", "minMaxOffsets", "padToObjectAlignment"]}, "repository": {"repo_id": 10311319, "url": "https://github.com/OpenHFT/Java-Lang", "language": "Java", "is_fork": false, "fork_count": 84, "stargazer_count": 274, "size": 88148, "license": "licensed"}}