{"test_class": {"identifier": "DefaultPatientByLabeledExternalIdentifierResourceImplTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String ID_LABEL = \"a_label\";", "modifier": "private static final", "type": "String", "declarator": "ID_LABEL = \"a_label\"", "var_name": "ID_LABEL"}, {"original_string": "private static final String ID_VALUE = \"eid\";", "modifier": "private static final", "type": "String", "declarator": "ID_VALUE = \"eid\"", "var_name": "ID_VALUE"}, {"original_string": "private static final String PATIENT_ID = \"P0000001\";", "modifier": "private static final", "type": "String", "declarator": "PATIENT_ID = \"P0000001\"", "var_name": "PATIENT_ID"}, {"original_string": "private static final String OTHER_PATIENT_ID = \"P0000002\";", "modifier": "private static final", "type": "String", "declarator": "OTHER_PATIENT_ID = \"P0000002\"", "var_name": "OTHER_PATIENT_ID"}, {"original_string": "private static final List<String> MULTIPLE_PATIENTS = Arrays.asList(PATIENT_ID, OTHER_PATIENT_ID);", "modifier": "private static final", "type": "List<String>", "declarator": "MULTIPLE_PATIENTS = Arrays.asList(PATIENT_ID, OTHER_PATIENT_ID)", "var_name": "MULTIPLE_PATIENTS"}, {"original_string": "private static final String EMPTY_JSON = \"{}\";", "modifier": "private static final", "type": "String", "declarator": "EMPTY_JSON = \"{}\"", "var_name": "EMPTY_JSON"}, {"original_string": "private static final String KEY_LABELED_EIDS = \"labeled_eids\";", "modifier": "private static final", "type": "String", "declarator": "KEY_LABELED_EIDS = \"labeled_eids\"", "var_name": "KEY_LABELED_EIDS"}, {"original_string": "private static final String UPDATE = \"update\";", "modifier": "private static final", "type": "String", "declarator": "UPDATE = \"update\"", "var_name": "UPDATE"}, {"original_string": "@Rule\n    public final MockitoComponentMockingRule<PatientByLabeledExternalIdentifierResource> mocker =\n        new MockitoComponentMockingRule<>(DefaultPatientByLabeledExternalIdentifierResourceImpl.class);", "modifier": "@Rule\n    public final", "type": "MockitoComponentMockingRule<PatientByLabeledExternalIdentifierResource>", "declarator": "mocker =\n        new MockitoComponentMockingRule<>(DefaultPatientByLabeledExternalIdentifierResourceImpl.class)", "var_name": "mocker"}, {"original_string": "@Rule\n    public ExpectedException exception = ExpectedException.none();", "modifier": "@Rule\n    public", "type": "ExpectedException", "declarator": "exception = ExpectedException.none()", "var_name": "exception"}, {"original_string": "@Mock\n    private Patient patient;", "modifier": "@Mock\n    private", "type": "Patient", "declarator": "patient", "var_name": "patient"}, {"original_string": "@Mock\n    private UriInfo uriInfo;", "modifier": "@Mock\n    private", "type": "UriInfo", "declarator": "uriInfo", "var_name": "uriInfo"}, {"original_string": "@Mock\n    private UriBuilder uriBuilder;", "modifier": "@Mock\n    private", "type": "UriBuilder", "declarator": "uriBuilder", "var_name": "uriBuilder"}, {"original_string": "@Mock\n    private User currentUser;", "modifier": "@Mock\n    private", "type": "User", "declarator": "currentUser", "var_name": "currentUser"}, {"original_string": "@Mock\n    private EntityReferenceResolver<EntityReference> resolver;", "modifier": "@Mock\n    private", "type": "EntityReferenceResolver<EntityReference>", "declarator": "resolver", "var_name": "resolver"}, {"original_string": "private PatientRepository repository;", "modifier": "private", "type": "PatientRepository", "declarator": "repository", "var_name": "repository"}, {"original_string": "private DomainObjectFactory factory;", "modifier": "private", "type": "DomainObjectFactory", "declarator": "factory", "var_name": "factory"}, {"original_string": "@Mock\n    private Alternatives alternatives;", "modifier": "@Mock\n    private", "type": "Alternatives", "declarator": "alternatives", "var_name": "alternatives"}, {"original_string": "private QueryManager qm;", "modifier": "private", "type": "QueryManager", "declarator": "qm", "var_name": "qm"}, {"original_string": "@Mock\n    private Query patientsQuery;", "modifier": "@Mock\n    private", "type": "Query", "declarator": "patientsQuery", "var_name": "patientsQuery"}, {"original_string": "@Mock\n    private Query allowOtherQuery;", "modifier": "@Mock\n    private", "type": "Query", "declarator": "allowOtherQuery", "var_name": "allowOtherQuery"}, {"original_string": "@Mock\n    private Query labelIsConfiguredQuery;", "modifier": "@Mock\n    private", "type": "Query", "declarator": "labelIsConfiguredQuery", "var_name": "labelIsConfiguredQuery"}, {"original_string": "private AuthorizationService access;", "modifier": "private", "type": "AuthorizationService", "declarator": "access", "var_name": "access"}, {"original_string": "private URI uri;", "modifier": "private", "type": "URI", "declarator": "uri", "var_name": "uri"}, {"original_string": "private Autolinker autolinker;", "modifier": "private", "type": "Autolinker", "declarator": "autolinker", "var_name": "autolinker"}, {"original_string": "private PatientByLabeledExternalIdentifierResource component;", "modifier": "private", "type": "PatientByLabeledExternalIdentifierResource", "declarator": "component", "var_name": "component"}, {"original_string": "private DocumentReference patientReference = new DocumentReference(\"wiki\", \"data\", PATIENT_ID);", "modifier": "private", "type": "DocumentReference", "declarator": "patientReference = new DocumentReference(\"wiki\", \"data\", PATIENT_ID)", "var_name": "patientReference"}], "file": "components/patient-data/rest/src/test/java/org/phenotips/data/rest/internal/DefaultPatientByLabeledExternalIdentifierResourceImplTest.java"}, "test_case": {"identifier": "createPatientWithUnkownLabelSucceedsWhenOtherLabelsAreAllowed", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void createPatientWithUnkownLabelSucceedsWhenOtherLabelsAreAllowed()\n        throws QueryException\n    {\n        when(this.labelIsConfiguredQuery.execute()).thenReturn(Collections.emptyList());\n        Response result = this.component.updatePatient(EMPTY_JSON, ID_LABEL, ID_VALUE, UPDATE, true);\n        Assert.assertEquals(result.getStatus(), Response.Status.CREATED.getStatusCode());\n    }", "signature": "void createPatientWithUnkownLabelSucceedsWhenOtherLabelsAreAllowed()", "full_signature": "@Test public void createPatientWithUnkownLabelSucceedsWhenOtherLabelsAreAllowed()", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImplTest.createPatientWithUnkownLabelSucceedsWhenOtherLabelsAreAllowed()", "testcase": true, "constructor": false, "invocations": ["thenReturn", "when", "execute", "emptyList", "updatePatient", "assertEquals", "getStatus", "getStatusCode"]}, "focal_class": {"identifier": "DefaultPatientByLabeledExternalIdentifierResourceImpl", "superclass": "extends XWikiResource", "interfaces": "implements\n    PatientByLabeledExternalIdentifierResource", "fields": [{"original_string": "private static final String KEY_LABELED_EIDS = \"labeled_eids\";", "modifier": "private static final", "type": "String", "declarator": "KEY_LABELED_EIDS = \"labeled_eids\"", "var_name": "KEY_LABELED_EIDS"}, {"original_string": "private static final String KEY_LABEL = \"label\";", "modifier": "private static final", "type": "String", "declarator": "KEY_LABEL = \"label\"", "var_name": "KEY_LABEL"}, {"original_string": "private static final String KEY_VALUE = \"value\";", "modifier": "private static final", "type": "String", "declarator": "KEY_VALUE = \"value\"", "var_name": "KEY_VALUE"}, {"original_string": "@Inject\n    private Logger logger;", "modifier": "@Inject\n    private", "type": "Logger", "declarator": "logger", "var_name": "logger"}, {"original_string": "@Inject\n    private PatientRepository repository;", "modifier": "@Inject\n    private", "type": "PatientRepository", "declarator": "repository", "var_name": "repository"}, {"original_string": "@Inject\n    private DomainObjectFactory factory;", "modifier": "@Inject\n    private", "type": "DomainObjectFactory", "declarator": "factory", "var_name": "factory"}, {"original_string": "@Inject\n    private QueryManager qm;", "modifier": "@Inject\n    private", "type": "QueryManager", "declarator": "qm", "var_name": "qm"}, {"original_string": "@Inject\n    private AuthorizationService access;", "modifier": "@Inject\n    private", "type": "AuthorizationService", "declarator": "access", "var_name": "access"}, {"original_string": "@Inject\n    private UserManager users;", "modifier": "@Inject\n    private", "type": "UserManager", "declarator": "users", "var_name": "users"}, {"original_string": "@Inject\n    private Provider<Autolinker> autolinker;", "modifier": "@Inject\n    private", "type": "Provider<Autolinker>", "declarator": "autolinker", "var_name": "autolinker"}, {"original_string": "@Inject\n    @Named(\"current\")\n    private EntityReferenceResolver<EntityReference> currentResolver;", "modifier": "@Inject\n    @Named(\"current\")\n    private", "type": "EntityReferenceResolver<EntityReference>", "declarator": "currentResolver", "var_name": "currentResolver"}], "methods": [{"identifier": "getPatient", "parameters": "(String label, String id)", "modifiers": "@Override public", "return": "Response", "signature": "Response getPatient(String label, String id)", "full_signature": "@Override public Response getPatient(String label, String id)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.getPatient(String label, String id)", "testcase": false, "constructor": false}, {"identifier": "updatePatient", "parameters": "(final String json, final String label, final String id,\n        final String policy, final boolean create)", "modifiers": "@Override public", "return": "Response", "signature": "Response updatePatient(final String json, final String label, final String id,\n        final String policy, final boolean create)", "full_signature": "@Override public Response updatePatient(final String json, final String label, final String id,\n        final String policy, final boolean create)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.updatePatient(final String json, final String label, final String id,\n        final String policy, final boolean create)", "testcase": false, "constructor": false}, {"identifier": "updatePatient", "parameters": "(final String json, final String label, final String id,\n        final PatientWritePolicy policy, final boolean create)", "modifiers": "private", "return": "Response", "signature": "Response updatePatient(final String json, final String label, final String id,\n        final PatientWritePolicy policy, final boolean create)", "full_signature": "private Response updatePatient(final String json, final String label, final String id,\n        final PatientWritePolicy policy, final boolean create)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.updatePatient(final String json, final String label, final String id,\n        final PatientWritePolicy policy, final boolean create)", "testcase": false, "constructor": false}, {"identifier": "patchPatient", "parameters": "(String json, String label, String id, boolean create)", "modifiers": "@Override public", "return": "Response", "signature": "Response patchPatient(String json, String label, String id, boolean create)", "full_signature": "@Override public Response patchPatient(String json, String label, String id, boolean create)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.patchPatient(String json, String label, String id, boolean create)", "testcase": false, "constructor": false}, {"identifier": "deletePatient", "parameters": "(String label, String id)", "modifiers": "@Override public", "return": "Response", "signature": "Response deletePatient(String label, String id)", "full_signature": "@Override public Response deletePatient(String label, String id)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.deletePatient(String label, String id)", "testcase": false, "constructor": false}, {"identifier": "returnIfEmptyOrMultipleExistResponse", "parameters": "(List<String> patients, String label, String id)", "modifiers": "private", "return": "Response", "signature": "Response returnIfEmptyOrMultipleExistResponse(List<String> patients, String label, String id)", "full_signature": "private Response returnIfEmptyOrMultipleExistResponse(List<String> patients, String label, String id)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.returnIfEmptyOrMultipleExistResponse(List<String> patients, String label, String id)", "testcase": false, "constructor": false}, {"identifier": "returnIfEmptyOrMultipleExistResponse", "parameters": "(List<String> patients, String label, String id,\n        JSONObject jsonInput, boolean shouldCreate)", "modifiers": "private", "return": "Response", "signature": "Response returnIfEmptyOrMultipleExistResponse(List<String> patients, String label, String id,\n        JSONObject jsonInput, boolean shouldCreate)", "full_signature": "private Response returnIfEmptyOrMultipleExistResponse(List<String> patients, String label, String id,\n        JSONObject jsonInput, boolean shouldCreate)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.returnIfEmptyOrMultipleExistResponse(List<String> patients, String label, String id,\n        JSONObject jsonInput, boolean shouldCreate)", "testcase": false, "constructor": false}, {"identifier": "returnCreatePatientResponse", "parameters": "(final String label, final String id, final JSONObject jsonInput)", "modifiers": "private", "return": "Response", "signature": "Response returnCreatePatientResponse(final String label, final String id, final JSONObject jsonInput)", "full_signature": "private Response returnCreatePatientResponse(final String label, final String id, final JSONObject jsonInput)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.returnCreatePatientResponse(final String label, final String id, final JSONObject jsonInput)", "testcase": false, "constructor": false}, {"identifier": "buildCreatedResponse", "parameters": "(final Patient patient)", "modifiers": "private", "return": "Response", "signature": "Response buildCreatedResponse(final Patient patient)", "full_signature": "private Response buildCreatedResponse(final Patient patient)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.buildCreatedResponse(final Patient patient)", "testcase": false, "constructor": false}, {"identifier": "returnUpdatePatientResponse", "parameters": "(final Patient patient, final String label, final String id,\n        final JSONObject jsonInput, boolean wasCreated, PatientWritePolicy policy)", "modifiers": "private", "return": "Response", "signature": "Response returnUpdatePatientResponse(final Patient patient, final String label, final String id,\n        final JSONObject jsonInput, boolean wasCreated, PatientWritePolicy policy)", "full_signature": "private Response returnUpdatePatientResponse(final Patient patient, final String label, final String id,\n        final JSONObject jsonInput, boolean wasCreated, PatientWritePolicy policy)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.returnUpdatePatientResponse(final Patient patient, final String label, final String id,\n        final JSONObject jsonInput, boolean wasCreated, PatientWritePolicy policy)", "testcase": false, "constructor": false}, {"identifier": "getPatientInternalIdentifiersByLabelAndEid", "parameters": "(String label, String id)", "modifiers": "private", "return": "List<String>", "signature": "List<String> getPatientInternalIdentifiersByLabelAndEid(String label, String id)", "full_signature": "private List<String> getPatientInternalIdentifiersByLabelAndEid(String label, String id)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.getPatientInternalIdentifiersByLabelAndEid(String label, String id)", "testcase": false, "constructor": false}, {"identifier": "queryPatientsByLabelAndEid", "parameters": "(String label, String id)", "modifiers": "private", "return": "List<String>", "signature": "List<String> queryPatientsByLabelAndEid(String label, String id)", "full_signature": "private List<String> queryPatientsByLabelAndEid(String label, String id)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.queryPatientsByLabelAndEid(String label, String id)", "testcase": false, "constructor": false}, {"identifier": "isLabelAllowed", "parameters": "(String label)", "modifiers": "private", "return": "boolean", "signature": "boolean isLabelAllowed(String label)", "full_signature": "private boolean isLabelAllowed(String label)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.isLabelAllowed(String label)", "testcase": false, "constructor": false}, {"identifier": "isLabelConfiguredByAdmin", "parameters": "(String label)", "modifiers": "private", "return": "boolean", "signature": "boolean isLabelConfiguredByAdmin(String label)", "full_signature": "private boolean isLabelConfiguredByAdmin(String label)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.isLabelConfiguredByAdmin(String label)", "testcase": false, "constructor": false}, {"identifier": "allowOtherEids", "parameters": "()", "modifiers": "private", "return": "boolean", "signature": "boolean allowOtherEids()", "full_signature": "private boolean allowOtherEids()", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.allowOtherEids()", "testcase": false, "constructor": false}, {"identifier": "hasInternalIdConflict", "parameters": "(final JSONObject jsonInput, final Patient patient)", "modifiers": "private", "return": "boolean", "signature": "boolean hasInternalIdConflict(final JSONObject jsonInput, final Patient patient)", "full_signature": "private boolean hasInternalIdConflict(final JSONObject jsonInput, final Patient patient)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.hasInternalIdConflict(final JSONObject jsonInput, final Patient patient)", "testcase": false, "constructor": false}], "file": "components/patient-data/rest/src/main/java/org/phenotips/data/rest/internal/DefaultPatientByLabeledExternalIdentifierResourceImpl.java"}, "focal_method": {"identifier": "updatePatient", "parameters": "(final String json, final String label, final String id,\n        final String policy, final boolean create)", "modifiers": "@Override public", "return": "Response", "body": "@Override\n    public Response updatePatient(final String json, final String label, final String id,\n        final String policy, final boolean create)\n    {\n        final PatientWritePolicy policyType = PatientWritePolicy.fromString(policy);\n        return updatePatient(json, label, id, policyType, create);\n    }", "signature": "Response updatePatient(final String json, final String label, final String id,\n        final String policy, final boolean create)", "full_signature": "@Override public Response updatePatient(final String json, final String label, final String id,\n        final String policy, final boolean create)", "class_method_signature": "DefaultPatientByLabeledExternalIdentifierResourceImpl.updatePatient(final String json, final String label, final String id,\n        final String policy, final boolean create)", "testcase": false, "constructor": false, "invocations": ["fromString", "updatePatient"]}, "repository": {"repo_id": 2685841, "url": "https://github.com/phenotips/phenotips", "language": "Java", "is_fork": false, "fork_count": 64, "stargazer_count": 87, "size": 1662205, "license": "licensed"}}