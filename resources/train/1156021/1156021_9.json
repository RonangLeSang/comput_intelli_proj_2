{"test_class": {"identifier": "PermissionManagerTest", "superclass": "extends TransactionalDBUnitEJB3DAOTest", "interfaces": "", "fields": [], "file": "import_layer/src/test/java/org/isatools/isatab/commandline/permission_manager/PermissionManagerTest.java"}, "test_case": {"identifier": "testVisibility", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testVisibility() {\n        SimplePipelineModel pip = new SimplePipelineModel();\n        pip.study.setAcc(\"s1\");\n\n        SimplePipelineModel pip1 = new SimplePipelineModel();\n        pip1.study.setAcc(\"s2\");\n        pip1.assayMaterial1.setAcc(\"s2.as1\");\n        pip1.nas1.setAcc(\"s2.nas1\");\n\n        pip1.nsrc1.setAcc(\"s2.nsrc1\");\n        pip1.src1.setAcc(\"s2.src1\");\n        pip1.nsrc2.setAcc(\"s2.nsrc2\");\n        pip1.src2.setAcc(\"s2.src2\");\n\n        pip1.p1.setAcc(\"s2.papp1\");\n        pip1.p2.setAcc(\"s2.papp2\");\n\n        pip1.nar1.setAcc(\"s2.nar1\");\n        pip1.nar2.setAcc(\"s2.nar2\");\n\n        pip1.dt1.setAcc(\"s2.dt1\");\n        pip1.dt2.setAcc(\"s2.dt2\");\n\n        Timestamp ts = new Timestamp(System.currentTimeMillis());\n        StudyPersister studyPersister = new StudyPersister(daoFactory, ts);\n        AssayMaterialPersister assayMaterialPersister = new AssayMaterialPersister(daoFactory, ts);\n        studyPersister.persist(pip.study);\n        assayMaterialPersister.persist(pip.assayMaterial1);\n        studyPersister.persist(pip1.study);\n        assayMaterialPersister.persist(pip1.assayMaterial1);\n        commitTansaction();\n        session.flush();\n\n        PermissionManager permMgr = new PermissionManager(entityManager);\n        // TODO: add another study!\n        permMgr.setPublic(\"s1,s2\");\n        commitTansaction();\n        session.flush();\n\n        assertEquals(\"Visibility set failed!\", VisibilityStatus.PUBLIC, pip.study.getStatus());\n        assertEquals(\"Visibility set failed!\", VisibilityStatus.PUBLIC, pip1.study.getStatus());\n\n    }", "signature": "void testVisibility()", "full_signature": "@Test public void testVisibility()", "class_method_signature": "PermissionManagerTest.testVisibility()", "testcase": true, "constructor": false, "invocations": ["setAcc", "setAcc", "setAcc", "setAcc", "setAcc", "setAcc", "setAcc", "setAcc", "setAcc", "setAcc", "setAcc", "setAcc", "setAcc", "setAcc", "currentTimeMillis", "persist", "persist", "persist", "persist", "commitTansaction", "flush", "setPublic", "commitTansaction", "flush", "assertEquals", "getStatus", "assertEquals", "getStatus"]}, "focal_class": {"identifier": "PermissionManager", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final DaoFactory daoFactory;", "modifier": "private final", "type": "DaoFactory", "declarator": "daoFactory", "var_name": "daoFactory"}, {"original_string": "public final static String[] VALID_DATE_FORMATS = new String[]{\"yyyy-MM-dd\", \"dd-MM-yyyy\", \"dd/MM/yyyy\"};", "modifier": "public final static", "type": "String[]", "declarator": "VALID_DATE_FORMATS = new String[]{\"yyyy-MM-dd\", \"dd-MM-yyyy\", \"dd/MM/yyyy\"}", "var_name": "VALID_DATE_FORMATS"}], "methods": [{"identifier": "PermissionManager", "parameters": "(EntityManager entityManager)", "modifiers": "public", "return": "", "signature": " PermissionManager(EntityManager entityManager)", "full_signature": "public  PermissionManager(EntityManager entityManager)", "class_method_signature": "PermissionManager.PermissionManager(EntityManager entityManager)", "testcase": false, "constructor": true}, {"identifier": "createUserDefOptions", "parameters": "()", "modifiers": "public static", "return": "Options", "signature": "Options createUserDefOptions()", "full_signature": "public static Options createUserDefOptions()", "class_method_signature": "PermissionManager.createUserDefOptions()", "testcase": false, "constructor": false}, {"identifier": "createUserDefOptions", "parameters": "(Options baseOptions)", "modifiers": "@SuppressWarnings(\"static-access\") public static", "return": "Options", "signature": "Options createUserDefOptions(Options baseOptions)", "full_signature": "@SuppressWarnings(\"static-access\") public static Options createUserDefOptions(Options baseOptions)", "class_method_signature": "PermissionManager.createUserDefOptions(Options baseOptions)", "testcase": false, "constructor": false}, {"identifier": "createPermModOptions", "parameters": "(Options baseOptions)", "modifiers": "@SuppressWarnings(\"static-access\") public static", "return": "Options", "signature": "Options createPermModOptions(Options baseOptions)", "full_signature": "@SuppressWarnings(\"static-access\") public static Options createPermModOptions(Options baseOptions)", "class_method_signature": "PermissionManager.createPermModOptions(Options baseOptions)", "testcase": false, "constructor": false}, {"identifier": "createPermModOptions", "parameters": "()", "modifiers": "public static", "return": "Options", "signature": "Options createPermModOptions()", "full_signature": "public static Options createPermModOptions()", "class_method_signature": "PermissionManager.createPermModOptions()", "testcase": false, "constructor": false}, {"identifier": "createNewUserFromOptions", "parameters": "(String login, CommandLine cmdl)", "modifiers": "public", "return": "Person", "signature": "Person createNewUserFromOptions(String login, CommandLine cmdl)", "full_signature": "public Person createNewUserFromOptions(String login, CommandLine cmdl)", "class_method_signature": "PermissionManager.createNewUserFromOptions(String login, CommandLine cmdl)", "testcase": false, "constructor": false}, {"identifier": "validateUser", "parameters": "(Person user)", "modifiers": "public", "return": "void", "signature": "void validateUser(Person user)", "full_signature": "public void validateUser(Person user)", "class_method_signature": "PermissionManager.validateUser(Person user)", "testcase": false, "constructor": false}, {"identifier": "addUser", "parameters": "(Person user)", "modifiers": "public", "return": "long", "signature": "long addUser(Person user)", "full_signature": "public long addUser(Person user)", "class_method_signature": "PermissionManager.addUser(Person user)", "testcase": false, "constructor": false}, {"identifier": "updateUser", "parameters": "(Person user)", "modifiers": "public", "return": "void", "signature": "void updateUser(Person user)", "full_signature": "public void updateUser(Person user)", "class_method_signature": "PermissionManager.updateUser(Person user)", "testcase": false, "constructor": false}, {"identifier": "mergeProps", "parameters": "(Person org, Person dest, String... propNames)", "modifiers": "private", "return": "void", "signature": "void mergeProps(Person org, Person dest, String... propNames)", "full_signature": "private void mergeProps(Person org, Person dest, String... propNames)", "class_method_signature": "PermissionManager.mergeProps(Person org, Person dest, String... propNames)", "testcase": false, "constructor": false}, {"identifier": "mergeProp", "parameters": "(Person org, Person dest, String propName)", "modifiers": "private", "return": "void", "signature": "void mergeProp(Person org, Person dest, String propName)", "full_signature": "private void mergeProp(Person org, Person dest, String propName)", "class_method_signature": "PermissionManager.mergeProp(Person org, Person dest, String propName)", "testcase": false, "constructor": false}, {"identifier": "deleteUser", "parameters": "(String login)", "modifiers": "public", "return": "void", "signature": "void deleteUser(String login)", "full_signature": "public void deleteUser(String login)", "class_method_signature": "PermissionManager.deleteUser(String login)", "testcase": false, "constructor": false}, {"identifier": "setStudyOwners", "parameters": "(CommandLine cmdl)", "modifiers": "public", "return": "void", "signature": "void setStudyOwners(CommandLine cmdl)", "full_signature": "public void setStudyOwners(CommandLine cmdl)", "class_method_signature": "PermissionManager.setStudyOwners(CommandLine cmdl)", "testcase": false, "constructor": false}, {"identifier": "setStudyOwners", "parameters": "(String spec)", "modifiers": "public", "return": "void", "signature": "void setStudyOwners(String spec)", "full_signature": "public void setStudyOwners(String spec)", "class_method_signature": "PermissionManager.setStudyOwners(String spec)", "testcase": false, "constructor": false}, {"identifier": "setStudyOwners", "parameters": "(String studyAcc, String operation, String... logins)", "modifiers": "public", "return": "void", "signature": "void setStudyOwners(String studyAcc, String operation, String... logins)", "full_signature": "public void setStudyOwners(String studyAcc, String operation, String... logins)", "class_method_signature": "PermissionManager.setStudyOwners(String studyAcc, String operation, String... logins)", "testcase": false, "constructor": false}, {"identifier": "searchStudyUser", "parameters": "(Study study, String login)", "modifiers": "private", "return": "User", "signature": "User searchStudyUser(Study study, String login)", "full_signature": "private User searchStudyUser(Study study, String login)", "class_method_signature": "PermissionManager.searchStudyUser(Study study, String login)", "testcase": false, "constructor": false}, {"identifier": "setStatus", "parameters": "(CommandLine cmdl, VisibilityStatus status)", "modifiers": "public", "return": "void", "signature": "void setStatus(CommandLine cmdl, VisibilityStatus status)", "full_signature": "public void setStatus(CommandLine cmdl, VisibilityStatus status)", "class_method_signature": "PermissionManager.setStatus(CommandLine cmdl, VisibilityStatus status)", "testcase": false, "constructor": false}, {"identifier": "setVisibility", "parameters": "(CommandLine cmdl)", "modifiers": "public", "return": "void", "signature": "void setVisibility(CommandLine cmdl)", "full_signature": "public void setVisibility(CommandLine cmdl)", "class_method_signature": "PermissionManager.setVisibility(CommandLine cmdl)", "testcase": false, "constructor": false}, {"identifier": "setPrivate", "parameters": "(String spec)", "modifiers": "public", "return": "void", "signature": "void setPrivate(String spec)", "full_signature": "public void setPrivate(String spec)", "class_method_signature": "PermissionManager.setPrivate(String spec)", "testcase": false, "constructor": false}, {"identifier": "setPrivate", "parameters": "(String... studyAccs)", "modifiers": "public", "return": "void", "signature": "void setPrivate(String... studyAccs)", "full_signature": "public void setPrivate(String... studyAccs)", "class_method_signature": "PermissionManager.setPrivate(String... studyAccs)", "testcase": false, "constructor": false}, {"identifier": "setStatus", "parameters": "(VisibilityStatus status, String... studyAccs)", "modifiers": "public", "return": "void", "signature": "void setStatus(VisibilityStatus status, String... studyAccs)", "full_signature": "public void setStatus(VisibilityStatus status, String... studyAccs)", "class_method_signature": "PermissionManager.setStatus(VisibilityStatus status, String... studyAccs)", "testcase": false, "constructor": false}, {"identifier": "setPublic", "parameters": "(String spec)", "modifiers": "public", "return": "void", "signature": "void setPublic(String spec)", "full_signature": "public void setPublic(String spec)", "class_method_signature": "PermissionManager.setPublic(String spec)", "testcase": false, "constructor": false}, {"identifier": "setPublic", "parameters": "(String... studyAccs)", "modifiers": "public", "return": "void", "signature": "void setPublic(String... studyAccs)", "full_signature": "public void setPublic(String... studyAccs)", "class_method_signature": "PermissionManager.setPublic(String... studyAccs)", "testcase": false, "constructor": false}, {"identifier": "getStudies", "parameters": "()", "modifiers": "@SuppressWarnings(\"unchecked\") public", "return": "List<Study>", "signature": "List<Study> getStudies()", "full_signature": "@SuppressWarnings(\"unchecked\") public List<Study> getStudies()", "class_method_signature": "PermissionManager.getStudies()", "testcase": false, "constructor": false}, {"identifier": "getUsers", "parameters": "()", "modifiers": "@SuppressWarnings(\"unchecked\") public", "return": "List<Person>", "signature": "List<Person> getUsers()", "full_signature": "@SuppressWarnings(\"unchecked\") public List<Person> getUsers()", "class_method_signature": "PermissionManager.getUsers()", "testcase": false, "constructor": false}, {"identifier": "getUserByLogin", "parameters": "(String login)", "modifiers": "public", "return": "Person", "signature": "Person getUserByLogin(String login)", "full_signature": "public Person getUserByLogin(String login)", "class_method_signature": "PermissionManager.getUserByLogin(String login)", "testcase": false, "constructor": false}, {"identifier": "getStudyByAcc", "parameters": "(String acc)", "modifiers": "public", "return": "Study", "signature": "Study getStudyByAcc(String acc)", "full_signature": "public Study getStudyByAcc(String acc)", "class_method_signature": "PermissionManager.getStudyByAcc(String acc)", "testcase": false, "constructor": false}, {"identifier": "formatUser", "parameters": "(Person user)", "modifiers": "public static", "return": "String", "signature": "String formatUser(Person user)", "full_signature": "public static String formatUser(Person user)", "class_method_signature": "PermissionManager.formatUser(Person user)", "testcase": false, "constructor": false}, {"identifier": "formatStudy", "parameters": "(Study study)", "modifiers": "public static", "return": "String", "signature": "String formatStudy(Study study)", "full_signature": "public static String formatStudy(Study study)", "class_method_signature": "PermissionManager.formatStudy(Study study)", "testcase": false, "constructor": false}], "file": "import_layer/src/main/java/org/isatools/isatab/commandline/permission_manager/PermissionManager.java"}, "focal_method": {"identifier": "setPublic", "parameters": "(String spec)", "modifiers": "public", "return": "void", "body": "public void setPublic(String spec) {\n        spec = StringUtils.trimToNull(spec);\n        if (spec == null) {\n            throw new TabInvalidValueException(\"Invalid syntax for the study list: '\" + spec + \"'\");\n        }\n        String accs[] = spec.split(\"\\\\,\");\n        if (accs == null || accs.length == 0) {\n            throw new TabInvalidValueException(\"Invalid syntax for the study list: '\" + spec + \"'\");\n        }\n        setPublic(accs);\n    }", "signature": "void setPublic(String spec)", "full_signature": "public void setPublic(String spec)", "class_method_signature": "PermissionManager.setPublic(String spec)", "testcase": false, "constructor": false, "invocations": ["trimToNull", "split", "setPublic"]}, "repository": {"repo_id": 1156021, "url": "https://github.com/ISA-tools/ISAvalidator-ISAconverter-BIImanager", "language": "Java", "is_fork": false, "fork_count": 15, "stargazer_count": 12, "size": 5963, "license": "licensed"}}