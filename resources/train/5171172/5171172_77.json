{"test_class": {"identifier": "MutationFactoryTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String TABLE = \"t1\";", "modifier": "private static final", "type": "String", "declarator": "TABLE = \"t1\"", "var_name": "TABLE"}, {"original_string": "private static final String COLUMN1 = \"c1\";", "modifier": "private static final", "type": "String", "declarator": "COLUMN1 = \"c1\"", "var_name": "COLUMN1"}, {"original_string": "private static final String COLUMN2 = \"c2\";", "modifier": "private static final", "type": "String", "declarator": "COLUMN2 = \"c2\"", "var_name": "COLUMN2"}, {"original_string": "private static final String INDEX1 = \"i1\";", "modifier": "private static final", "type": "String", "declarator": "INDEX1 = \"i1\"", "var_name": "INDEX1"}, {"original_string": "private static final String INDEX2 = \"i2\";", "modifier": "private static final", "type": "String", "declarator": "INDEX2 = \"i2\"", "var_name": "INDEX2"}, {"original_string": "private static final List<ColumnSchema> COLUMNS = new ArrayList<ColumnSchema>() {{\n        add(ColumnSchema.builder(COLUMN1, ColumnType.LONG).build());\n        add(ColumnSchema.builder(COLUMN2, ColumnType.STRING).setMaxLength(32).build());\n    }};", "modifier": "private static final", "type": "List<ColumnSchema>", "declarator": "COLUMNS = new ArrayList<ColumnSchema>() {{\n        add(ColumnSchema.builder(COLUMN1, ColumnType.LONG).build());\n        add(ColumnSchema.builder(COLUMN2, ColumnType.STRING).setMaxLength(32).build());\n    }}", "var_name": "COLUMNS"}, {"original_string": "private static final List<IndexSchema> INDICES = new ArrayList<IndexSchema>() {{\n        add(new IndexSchema(INDEX1, Lists.newArrayList(COLUMN1), false));\n        add(new IndexSchema(INDEX2, Lists.newArrayList(COLUMN1, COLUMN2), true));\n    }};", "modifier": "private static final", "type": "List<IndexSchema>", "declarator": "INDICES = new ArrayList<IndexSchema>() {{\n        add(new IndexSchema(INDEX1, Lists.newArrayList(COLUMN1), false));\n        add(new IndexSchema(INDEX2, Lists.newArrayList(COLUMN1, COLUMN2), true));\n    }}", "var_name": "INDICES"}, {"original_string": "private static final Row row = new Row(\n            new HashMap<String, ByteBuffer>() {{\n                put(COLUMN1, ByteBuffer.wrap(Longs.toByteArray(123)));\n                put(COLUMN2, ByteBuffer.wrap(\"foobar\".getBytes()));\n            }},\n            UUID.randomUUID()\n    );", "modifier": "private static final", "type": "Row", "declarator": "row = new Row(\n            new HashMap<String, ByteBuffer>() {{\n                put(COLUMN1, ByteBuffer.wrap(Longs.toByteArray(123)));\n                put(COLUMN2, ByteBuffer.wrap(\"foobar\".getBytes()));\n            }},\n            UUID.randomUUID()\n    )", "var_name": "row"}, {"original_string": "private static final byte DATA_PREFIX = new DataRowKey(0, null).getPrefix();", "modifier": "private static final", "type": "byte", "declarator": "DATA_PREFIX = new DataRowKey(0, null).getPrefix()", "var_name": "DATA_PREFIX"}, {"original_string": "private static final byte ASC_PREFIX = IndexRowKeyBuilder.newBuilder(0, 0)\n            .withSortOrder(SortOrder.Ascending).build().getPrefix();", "modifier": "private static final", "type": "byte", "declarator": "ASC_PREFIX = IndexRowKeyBuilder.newBuilder(0, 0)\n            .withSortOrder(SortOrder.Ascending).build().getPrefix()", "var_name": "ASC_PREFIX"}, {"original_string": "private static final byte DESC_PREFIX = IndexRowKeyBuilder.newBuilder(0, 0)\n            .withSortOrder(SortOrder.Descending).build().getPrefix();", "modifier": "private static final", "type": "byte", "declarator": "DESC_PREFIX = IndexRowKeyBuilder.newBuilder(0, 0)\n            .withSortOrder(SortOrder.Descending).build().getPrefix()", "var_name": "DESC_PREFIX"}, {"original_string": "private MutationFactory factory;", "modifier": "private", "type": "MutationFactory", "declarator": "factory", "var_name": "factory"}, {"original_string": "private long tableId;", "modifier": "private", "type": "long", "declarator": "tableId", "var_name": "tableId"}], "file": "storage-engine-backends/hbase/src/test/java/com/nearinfinity/honeycomb/hbase/MutationFactoryTest.java"}, "test_case": {"identifier": "testDeleteIndicesRejectsNullRow", "parameters": "()", "modifiers": "@Test(expected = NullPointerException.class) public", "return": "void", "body": "@Test(expected = NullPointerException.class)\n    public void testDeleteIndicesRejectsNullRow() throws Exception {\n        factory.deleteIndices(1, null);\n    }", "signature": "void testDeleteIndicesRejectsNullRow()", "full_signature": "@Test(expected = NullPointerException.class) public void testDeleteIndicesRejectsNullRow()", "class_method_signature": "MutationFactoryTest.testDeleteIndicesRejectsNullRow()", "testcase": true, "constructor": false, "invocations": ["deleteIndices"]}, "focal_class": {"identifier": "MutationFactory", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final HBaseStore store;", "modifier": "private final", "type": "HBaseStore", "declarator": "store", "var_name": "store"}, {"original_string": "private byte[] columnFamily;", "modifier": "private", "type": "byte[]", "declarator": "columnFamily", "var_name": "columnFamily"}], "methods": [{"identifier": "MutationFactory", "parameters": "(HBaseStore store)", "modifiers": "@Inject public", "return": "", "signature": " MutationFactory(HBaseStore store)", "full_signature": "@Inject public  MutationFactory(HBaseStore store)", "class_method_signature": "MutationFactory.MutationFactory(HBaseStore store)", "testcase": false, "constructor": true}, {"identifier": "setColumnFamily", "parameters": "(final @Named(ConfigConstants.COLUMN_FAMILY) String columnFamily)", "modifiers": "@Inject public", "return": "void", "signature": "void setColumnFamily(final @Named(ConfigConstants.COLUMN_FAMILY) String columnFamily)", "full_signature": "@Inject public void setColumnFamily(final @Named(ConfigConstants.COLUMN_FAMILY) String columnFamily)", "class_method_signature": "MutationFactory.setColumnFamily(final @Named(ConfigConstants.COLUMN_FAMILY) String columnFamily)", "testcase": false, "constructor": false}, {"identifier": "insert", "parameters": "(long tableId, final Row row)", "modifiers": "public", "return": "List<Put>", "signature": "List<Put> insert(long tableId, final Row row)", "full_signature": "public List<Put> insert(long tableId, final Row row)", "class_method_signature": "MutationFactory.insert(long tableId, final Row row)", "testcase": false, "constructor": false}, {"identifier": "insert", "parameters": "(long tableId, final Row row,\n                            final Collection<IndexSchema> indices)", "modifiers": "public", "return": "List<Put>", "signature": "List<Put> insert(long tableId, final Row row,\n                            final Collection<IndexSchema> indices)", "full_signature": "public List<Put> insert(long tableId, final Row row,\n                            final Collection<IndexSchema> indices)", "class_method_signature": "MutationFactory.insert(long tableId, final Row row,\n                            final Collection<IndexSchema> indices)", "testcase": false, "constructor": false}, {"identifier": "insertIndices", "parameters": "(long tableId, final Row row,\n                                   final Collection<IndexSchema> indices)", "modifiers": "public", "return": "List<Put>", "signature": "List<Put> insertIndices(long tableId, final Row row,\n                                   final Collection<IndexSchema> indices)", "full_signature": "public List<Put> insertIndices(long tableId, final Row row,\n                                   final Collection<IndexSchema> indices)", "class_method_signature": "MutationFactory.insertIndices(long tableId, final Row row,\n                                   final Collection<IndexSchema> indices)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(long tableId, final Row row)", "modifiers": "public", "return": "List<Delete>", "signature": "List<Delete> delete(long tableId, final Row row)", "full_signature": "public List<Delete> delete(long tableId, final Row row)", "class_method_signature": "MutationFactory.delete(long tableId, final Row row)", "testcase": false, "constructor": false}, {"identifier": "deleteIndices", "parameters": "(long tableId, final Row row)", "modifiers": "public", "return": "List<Delete>", "signature": "List<Delete> deleteIndices(long tableId, final Row row)", "full_signature": "public List<Delete> deleteIndices(long tableId, final Row row)", "class_method_signature": "MutationFactory.deleteIndices(long tableId, final Row row)", "testcase": false, "constructor": false}, {"identifier": "deleteIndices", "parameters": "(long tableId, final Row row,\n                                      final Collection<IndexSchema> indices)", "modifiers": "public", "return": "List<Delete>", "signature": "List<Delete> deleteIndices(long tableId, final Row row,\n                                      final Collection<IndexSchema> indices)", "full_signature": "public List<Delete> deleteIndices(long tableId, final Row row,\n                                      final Collection<IndexSchema> indices)", "class_method_signature": "MutationFactory.deleteIndices(long tableId, final Row row,\n                                      final Collection<IndexSchema> indices)", "testcase": false, "constructor": false}, {"identifier": "emptyQualifierPut", "parameters": "(final RowKey rowKey,\n                                         final byte[] serializedRow)", "modifiers": "private", "return": "Put", "signature": "Put emptyQualifierPut(final RowKey rowKey,\n                                         final byte[] serializedRow)", "full_signature": "private Put emptyQualifierPut(final RowKey rowKey,\n                                         final byte[] serializedRow)", "class_method_signature": "MutationFactory.emptyQualifierPut(final RowKey rowKey,\n                                         final byte[] serializedRow)", "testcase": false, "constructor": false}, {"identifier": "doToIndices", "parameters": "(long tableId,\n                             final Row row,\n                             final Collection<IndexSchema> indices,\n                             final IndexAction action)", "modifiers": "private", "return": "void", "signature": "void doToIndices(long tableId,\n                             final Row row,\n                             final Collection<IndexSchema> indices,\n                             final IndexAction action)", "full_signature": "private void doToIndices(long tableId,\n                             final Row row,\n                             final Collection<IndexSchema> indices,\n                             final IndexAction action)", "class_method_signature": "MutationFactory.doToIndices(long tableId,\n                             final Row row,\n                             final Collection<IndexSchema> indices,\n                             final IndexAction action)", "testcase": false, "constructor": false}], "file": "storage-engine-backends/hbase/src/main/java/com/nearinfinity/honeycomb/hbase/MutationFactory.java"}, "focal_method": {"identifier": "deleteIndices", "parameters": "(long tableId, final Row row)", "modifiers": "public", "return": "List<Delete>", "body": "public List<Delete> deleteIndices(long tableId, final Row row) {\n        Verify.isValidId(tableId);\n\n        final Collection<IndexSchema> indices = store.getSchema(tableId).getIndices();\n        return deleteIndices(tableId, row, indices);\n    }", "signature": "List<Delete> deleteIndices(long tableId, final Row row)", "full_signature": "public List<Delete> deleteIndices(long tableId, final Row row)", "class_method_signature": "MutationFactory.deleteIndices(long tableId, final Row row)", "testcase": false, "constructor": false, "invocations": ["isValidId", "getIndices", "getSchema", "deleteIndices"]}, "repository": {"repo_id": 5171172, "url": "https://github.com/altamiracorp/honeycomb", "language": "Java", "is_fork": false, "fork_count": 22, "stargazer_count": 74, "size": 164956, "license": "licensed"}}