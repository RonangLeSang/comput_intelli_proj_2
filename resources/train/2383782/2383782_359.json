{"test_class": {"identifier": "TestErrorServlet", "superclass": "", "interfaces": "", "fields": [], "file": "core/src/test/java/org/apache/oozie/servlet/TestErrorServlet.java"}, "test_case": {"identifier": "testServlet", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testServlet() throws Exception {\n        String testErrorMsg = \"test-error\";\n        int testErrorCode = 400;\n        StringWriter stringWriter = new StringWriter();\n\n        HttpServletRequest request = mock(HttpServletRequest.class);\n        HttpServletResponse response = mock(HttpServletResponse.class);\n\n        when(request.getAttribute(\"javax.servlet.error.message\")).thenReturn(testErrorMsg);\n        when(request.getAttribute(\"javax.servlet.error.status_code\")).thenReturn(testErrorCode);\n        when(response.getWriter()).thenReturn(new PrintWriter(stringWriter));\n\n        new ErrorServlet().doGet(request, response);\n        JSONObject json = new JSONObject(stringWriter.toString().trim());\n        assertEquals(\"Error message is different.\", testErrorMsg, json.getString(JsonTags.WORKFLOW_ACTION_ERROR_MESSAGE));\n        assertEquals(\"Http code is different\", testErrorCode, json.getInt(JsonTags.HTTP_STATUS_CODE));\n    }", "signature": "void testServlet()", "full_signature": "@Test public void testServlet()", "class_method_signature": "TestErrorServlet.testServlet()", "testcase": true, "constructor": false, "invocations": ["mock", "mock", "thenReturn", "when", "getAttribute", "thenReturn", "when", "getAttribute", "thenReturn", "when", "getWriter", "doGet", "trim", "toString", "assertEquals", "getString", "assertEquals", "getInt"]}, "focal_class": {"identifier": "ErrorServlet", "superclass": "extends HttpServlet", "interfaces": "", "fields": [{"original_string": "private static final long serialVersionUID = 1L;", "modifier": "private static final", "type": "long", "declarator": "serialVersionUID = 1L", "var_name": "serialVersionUID"}], "methods": [{"identifier": "doGet", "parameters": "(HttpServletRequest request, HttpServletResponse response)", "modifiers": "@Override protected", "return": "void", "signature": "void doGet(HttpServletRequest request, HttpServletResponse response)", "full_signature": "@Override protected void doGet(HttpServletRequest request, HttpServletResponse response)", "class_method_signature": "ErrorServlet.doGet(HttpServletRequest request, HttpServletResponse response)", "testcase": false, "constructor": false}, {"identifier": "doPost", "parameters": "(HttpServletRequest request, HttpServletResponse response)", "modifiers": "@Override protected", "return": "void", "signature": "void doPost(HttpServletRequest request, HttpServletResponse response)", "full_signature": "@Override protected void doPost(HttpServletRequest request, HttpServletResponse response)", "class_method_signature": "ErrorServlet.doPost(HttpServletRequest request, HttpServletResponse response)", "testcase": false, "constructor": false}, {"identifier": "doPut", "parameters": "(HttpServletRequest request, HttpServletResponse response)", "modifiers": "@Override protected", "return": "void", "signature": "void doPut(HttpServletRequest request, HttpServletResponse response)", "full_signature": "@Override protected void doPut(HttpServletRequest request, HttpServletResponse response)", "class_method_signature": "ErrorServlet.doPut(HttpServletRequest request, HttpServletResponse response)", "testcase": false, "constructor": false}, {"identifier": "handleError", "parameters": "(HttpServletRequest request, HttpServletResponse response)", "modifiers": "private", "return": "void", "signature": "void handleError(HttpServletRequest request, HttpServletResponse response)", "full_signature": "private void handleError(HttpServletRequest request, HttpServletResponse response)", "class_method_signature": "ErrorServlet.handleError(HttpServletRequest request, HttpServletResponse response)", "testcase": false, "constructor": false}], "file": "core/src/main/java/org/apache/oozie/servlet/ErrorServlet.java"}, "focal_method": {"identifier": "doGet", "parameters": "(HttpServletRequest request, HttpServletResponse response)", "modifiers": "@Override protected", "return": "void", "body": "@Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n        handleError(request, response);\n    }", "signature": "void doGet(HttpServletRequest request, HttpServletResponse response)", "full_signature": "@Override protected void doGet(HttpServletRequest request, HttpServletResponse response)", "class_method_signature": "ErrorServlet.doGet(HttpServletRequest request, HttpServletResponse response)", "testcase": false, "constructor": false, "invocations": ["handleError"]}, "repository": {"repo_id": 2383782, "url": "https://github.com/apache/oozie", "stars": 542, "created": "9/14/2011 7:00:10 AM +00:00", "updates": "2020-01-18T12:54:24+00:00", "fork": "False", "license": "licensed"}}