{"test_class": {"identifier": "GridDBClientTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final int GRIDDB_DEFAULT_PORT = 10040;", "modifier": "private static final", "type": "int", "declarator": "GRIDDB_DEFAULT_PORT = 10040", "var_name": "GRIDDB_DEFAULT_PORT"}, {"original_string": "private final static String TEST_TABLE = \"testtable\";", "modifier": "private final static", "type": "String", "declarator": "TEST_TABLE = \"testtable\"", "var_name": "TEST_TABLE"}, {"original_string": "private final static String NOTIFICATION_PORT = \"31999\";", "modifier": "private final static", "type": "String", "declarator": "NOTIFICATION_PORT = \"31999\"", "var_name": "NOTIFICATION_PORT"}, {"original_string": "private final static String NOTIFICATION_ADDR = \"239.0.0.1\";", "modifier": "private final static", "type": "String", "declarator": "NOTIFICATION_ADDR = \"239.0.0.1\"", "var_name": "NOTIFICATION_ADDR"}, {"original_string": "private final static String CLUSTER_NAME = \"ycsbcluster\";", "modifier": "private final static", "type": "String", "declarator": "CLUSTER_NAME = \"ycsbcluster\"", "var_name": "CLUSTER_NAME"}, {"original_string": "private final static String USER_NAME = \"admin\";", "modifier": "private final static", "type": "String", "declarator": "USER_NAME = \"admin\"", "var_name": "USER_NAME"}, {"original_string": "private final static String PASS = \"admin\";", "modifier": "private final static", "type": "String", "declarator": "PASS = \"admin\"", "var_name": "PASS"}, {"original_string": "private final static int FIELD_COUNT = 10;", "modifier": "private final static", "type": "int", "declarator": "FIELD_COUNT = 10", "var_name": "FIELD_COUNT"}, {"original_string": "private final static String FIELD_LENGTH = \"100\";", "modifier": "private final static", "type": "String", "declarator": "FIELD_LENGTH = \"100\"", "var_name": "FIELD_LENGTH"}, {"original_string": "private DB myClient = null;", "modifier": "private", "type": "DB", "declarator": "myClient = null", "var_name": "myClient"}, {"original_string": "private final static String DEFAULT_ROW_KEY = \"user1\";", "modifier": "private final static", "type": "String", "declarator": "DEFAULT_ROW_KEY = \"user1\"", "var_name": "DEFAULT_ROW_KEY"}, {"original_string": "public static final String VALUE_COLUMN_NAME_PREFIX= \"field\";", "modifier": "public static final", "type": "String", "declarator": "VALUE_COLUMN_NAME_PREFIX= \"field\"", "var_name": "VALUE_COLUMN_NAME_PREFIX"}, {"original_string": "private ContainerInfo containerInfo = null;", "modifier": "private", "type": "ContainerInfo", "declarator": "containerInfo = null", "var_name": "containerInfo"}, {"original_string": "private GridStore store;", "modifier": "private", "type": "GridStore", "declarator": "store", "var_name": "store"}], "file": "griddb/src/test/java/site/ycsb/db/griddb/GridDBClientTest.java"}, "test_case": {"identifier": "testReadSingleRow", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testReadSingleRow() {\n        Set<String> fields = Collections.singleton(\"field1\");\n        HashMap<String, ByteIterator> result = new HashMap<String, ByteIterator>();\n        insertToDatabase();\n        Status readStatus = myClient.read(TEST_TABLE, DEFAULT_ROW_KEY, fields, result);\n\n        assertEquals(readStatus, Status.OK);\n        assertNotEquals(result.entrySet(), 0);\n\n        for (String key : fields) {\n            ByteIterator iter = result.get(key);\n            byte[] byteArray1 = iter.toArray();\n\n            String value = new String(byteArray1);\n            assertEquals(value, \"value1\");\n        }\n    }", "signature": "void testReadSingleRow()", "full_signature": "@Test public void testReadSingleRow()", "class_method_signature": "GridDBClientTest.testReadSingleRow()", "testcase": true, "constructor": false, "invocations": ["singleton", "insertToDatabase", "read", "assertEquals", "assertNotEquals", "entrySet", "get", "toArray", "assertEquals"]}, "focal_class": {"identifier": "GridDBClient", "superclass": "extends site.ycsb.DB", "interfaces": "", "fields": [{"original_string": "private String notificationAddress = \"\";", "modifier": "private", "type": "String", "declarator": "notificationAddress = \"\"", "var_name": "notificationAddress"}, {"original_string": "private String notificationPort = \"\";", "modifier": "private", "type": "String", "declarator": "notificationPort = \"\"", "var_name": "notificationPort"}, {"original_string": "private String notificationMember = \"\";", "modifier": "private", "type": "String", "declarator": "notificationMember = \"\"", "var_name": "notificationMember"}, {"original_string": "private String userName = \"\";", "modifier": "private", "type": "String", "declarator": "userName = \"\"", "var_name": "userName"}, {"original_string": "private String password = \"\";", "modifier": "private", "type": "String", "declarator": "password = \"\"", "var_name": "password"}, {"original_string": "private String clusterName = \"\";", "modifier": "private", "type": "String", "declarator": "clusterName = \"\"", "var_name": "clusterName"}, {"original_string": "public static final String VALUE_COLUMN_NAME_PREFIX= \"field\";", "modifier": "public static final", "type": "String", "declarator": "VALUE_COLUMN_NAME_PREFIX= \"field\"", "var_name": "VALUE_COLUMN_NAME_PREFIX"}, {"original_string": "public static final int ROW_KEY_COLUMN_POS = 0;", "modifier": "public static final", "type": "int", "declarator": "ROW_KEY_COLUMN_POS = 0", "var_name": "ROW_KEY_COLUMN_POS"}, {"original_string": "private String containerPrefix = \"\";", "modifier": "private", "type": "String", "declarator": "containerPrefix = \"\"", "var_name": "containerPrefix"}, {"original_string": "public static final int DEFAULT_CACHE_CONTAINER_NUM = 1000;", "modifier": "public static final", "type": "int", "declarator": "DEFAULT_CACHE_CONTAINER_NUM = 1000", "var_name": "DEFAULT_CACHE_CONTAINER_NUM"}, {"original_string": "public static final int FIELD_NUM = 10;", "modifier": "public static final", "type": "int", "declarator": "FIELD_NUM = 10", "var_name": "FIELD_NUM"}, {"original_string": "private int numContainer = 0;", "modifier": "private", "type": "int", "declarator": "numContainer = 0", "var_name": "numContainer"}, {"original_string": "public static final GSType SCHEMA_TYPE = GSType.STRING;", "modifier": "public static final", "type": "GSType", "declarator": "SCHEMA_TYPE = GSType.STRING", "var_name": "SCHEMA_TYPE"}, {"original_string": "private GridStore store;", "modifier": "private", "type": "GridStore", "declarator": "store", "var_name": "store"}, {"original_string": "private ContainerInfo containerInfo = null;", "modifier": "private", "type": "ContainerInfo", "declarator": "containerInfo = null", "var_name": "containerInfo"}, {"original_string": "private static final Logger LOGGER = Logger.getLogger(GridDBClient.class.getName());", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = Logger.getLogger(GridDBClient.class.getName())", "var_name": "LOGGER"}], "methods": [{"identifier": "init", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void init()", "full_signature": "public void init()", "class_method_signature": "GridDBClient.init()", "testcase": false, "constructor": false}, {"identifier": "cleanup", "parameters": "()", "modifiers": "public", "return": "void", "signature": "void cleanup()", "full_signature": "public void cleanup()", "class_method_signature": "GridDBClient.cleanup()", "testcase": false, "constructor": false}, {"identifier": "read", "parameters": "(String table, String key, Set<String> fields, Map<String, ByteIterator> result)", "modifiers": "public", "return": "Status", "signature": "Status read(String table, String key, Set<String> fields, Map<String, ByteIterator> result)", "full_signature": "public Status read(String table, String key, Set<String> fields, Map<String, ByteIterator> result)", "class_method_signature": "GridDBClient.read(String table, String key, Set<String> fields, Map<String, ByteIterator> result)", "testcase": false, "constructor": false}, {"identifier": "scan", "parameters": "(String table, String startkey, int recordcount, Set<String> fields,\n          Vector<HashMap<String, ByteIterator>> result)", "modifiers": "public", "return": "Status", "signature": "Status scan(String table, String startkey, int recordcount, Set<String> fields,\n          Vector<HashMap<String, ByteIterator>> result)", "full_signature": "public Status scan(String table, String startkey, int recordcount, Set<String> fields,\n          Vector<HashMap<String, ByteIterator>> result)", "class_method_signature": "GridDBClient.scan(String table, String startkey, int recordcount, Set<String> fields,\n          Vector<HashMap<String, ByteIterator>> result)", "testcase": false, "constructor": false}, {"identifier": "update", "parameters": "(String table, String key, Map<String, ByteIterator> values)", "modifiers": "public", "return": "Status", "signature": "Status update(String table, String key, Map<String, ByteIterator> values)", "full_signature": "public Status update(String table, String key, Map<String, ByteIterator> values)", "class_method_signature": "GridDBClient.update(String table, String key, Map<String, ByteIterator> values)", "testcase": false, "constructor": false}, {"identifier": "insert", "parameters": "(String table, String key, Map<String, ByteIterator> values)", "modifiers": "public", "return": "Status", "signature": "Status insert(String table, String key, Map<String, ByteIterator> values)", "full_signature": "public Status insert(String table, String key, Map<String, ByteIterator> values)", "class_method_signature": "GridDBClient.insert(String table, String key, Map<String, ByteIterator> values)", "testcase": false, "constructor": false}, {"identifier": "delete", "parameters": "(String table, String key)", "modifiers": "public", "return": "Status", "signature": "Status delete(String table, String key)", "full_signature": "public Status delete(String table, String key)", "class_method_signature": "GridDBClient.delete(String table, String key)", "testcase": false, "constructor": false}, {"identifier": "makeContainerKey", "parameters": "(String key)", "modifiers": "protected", "return": "String", "signature": "String makeContainerKey(String key)", "full_signature": "protected String makeContainerKey(String key)", "class_method_signature": "GridDBClient.makeContainerKey(String key)", "testcase": false, "constructor": false}, {"identifier": "makeRowKey", "parameters": "(String key)", "modifiers": "protected", "return": "Object", "signature": "Object makeRowKey(String key)", "full_signature": "protected Object makeRowKey(String key)", "class_method_signature": "GridDBClient.makeRowKey(String key)", "testcase": false, "constructor": false}, {"identifier": "makeValue", "parameters": "(ByteIterator byteIterator)", "modifiers": "protected", "return": "Object", "signature": "Object makeValue(ByteIterator byteIterator)", "full_signature": "protected Object makeValue(ByteIterator byteIterator)", "class_method_signature": "GridDBClient.makeValue(ByteIterator byteIterator)", "testcase": false, "constructor": false}, {"identifier": "makeQueryLiteral", "parameters": "(Object value)", "modifiers": "protected", "return": "Object", "signature": "Object makeQueryLiteral(Object value)", "full_signature": "protected Object makeQueryLiteral(Object value)", "class_method_signature": "GridDBClient.makeQueryLiteral(Object value)", "testcase": false, "constructor": false}], "file": "griddb/src/main/java/site/ycsb/db/griddb/GridDBClient.java"}, "focal_method": {"identifier": "read", "parameters": "(String table, String key, Set<String> fields, Map<String, ByteIterator> result)", "modifiers": "public", "return": "Status", "body": "public Status read(String table, String key, Set<String> fields, Map<String, ByteIterator> result) {\n    try {\n\n      Object rowKey = makeRowKey(key);\n      String containerKey = makeContainerKey(key);\n\n      final Container<Object, Row> container = store.getContainer(containerKey);\n      if(container == null) {\n        LOGGER.severe(\"[ERROR]getCollection \" + containerKey + \" in read()\");\n        return Status.ERROR;\n      }\n\n      Row targetRow = container.get(rowKey);\n      if (targetRow == null) {\n        LOGGER.severe(\"[ERROR]get(rowKey) in read()\");\n        return Status.ERROR;\n      }\n\n      for (int i = 1; i < containerInfo.getColumnCount(); i++) {\n        result.put(containerInfo.getColumnInfo(i).getName(),\n            new ByteArrayByteIterator(targetRow.getValue(i).toString().getBytes()));\n      }\n\n      return Status.OK;\n\n    } catch (GSException e) {\n      LOGGER.severe(\"Exception: \" + e.getMessage());\n      return Status.ERROR;\n    }\n  }", "signature": "Status read(String table, String key, Set<String> fields, Map<String, ByteIterator> result)", "full_signature": "public Status read(String table, String key, Set<String> fields, Map<String, ByteIterator> result)", "class_method_signature": "GridDBClient.read(String table, String key, Set<String> fields, Map<String, ByteIterator> result)", "testcase": false, "constructor": false, "invocations": ["makeRowKey", "makeContainerKey", "getContainer", "severe", "get", "severe", "getColumnCount", "put", "getName", "getColumnInfo", "getBytes", "toString", "getValue", "severe", "getMessage"]}, "repository": {"repo_id": 618492, "url": "https://github.com/brianfrankcooper/YCSB", "stars": 2890, "created": "4/19/2010 8:52:11 PM +00:00", "updates": "2020-01-27T04:05:30+00:00", "fork": "False", "license": "licensed"}}