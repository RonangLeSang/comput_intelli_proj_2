{"test_class": {"identifier": "TestFilesEndpoint", "superclass": "", "interfaces": "", "fields": [{"original_string": "public static final String WOPI_FILES = \"site/wopi/files\";", "modifier": "public static final", "type": "String", "declarator": "WOPI_FILES = \"site/wopi/files\"", "var_name": "WOPI_FILES"}, {"original_string": "public static final String CONTENTS_PATH = \"contents\";", "modifier": "public static final", "type": "String", "declarator": "CONTENTS_PATH = \"contents\"", "var_name": "CONTENTS_PATH"}, {"original_string": "@Inject\n    protected UserManager userManager;", "modifier": "@Inject\n    protected", "type": "UserManager", "declarator": "userManager", "var_name": "userManager"}, {"original_string": "@Inject\n    protected CoreSession session;", "modifier": "@Inject\n    protected", "type": "CoreSession", "declarator": "session", "var_name": "session"}, {"original_string": "@Inject\n    protected CoreFeature coreFeature;", "modifier": "@Inject\n    protected", "type": "CoreFeature", "declarator": "coreFeature", "var_name": "coreFeature"}, {"original_string": "@Inject\n    protected JWTService jwtService;", "modifier": "@Inject\n    protected", "type": "JWTService", "declarator": "jwtService", "var_name": "jwtService"}, {"original_string": "@Inject\n    protected TransactionalFeature transactionalFeature;", "modifier": "@Inject\n    protected", "type": "TransactionalFeature", "declarator": "transactionalFeature", "var_name": "transactionalFeature"}, {"original_string": "@Inject\n    protected ServletContainerFeature servletContainerFeature;", "modifier": "@Inject\n    protected", "type": "ServletContainerFeature", "declarator": "servletContainerFeature", "var_name": "servletContainerFeature"}, {"original_string": "protected Client client;", "modifier": "protected", "type": "Client", "declarator": "client", "var_name": "client"}, {"original_string": "protected String joeToken;", "modifier": "protected", "type": "String", "declarator": "joeToken", "var_name": "joeToken"}, {"original_string": "protected String johnToken;", "modifier": "protected", "type": "String", "declarator": "johnToken", "var_name": "johnToken"}, {"original_string": "protected DocumentModel blobDoc;", "modifier": "protected", "type": "DocumentModel", "declarator": "blobDoc", "var_name": "blobDoc"}, {"original_string": "protected String blobDocFileId;", "modifier": "protected", "type": "String", "declarator": "blobDocFileId", "var_name": "blobDocFileId"}, {"original_string": "protected DocumentModel zeroLengthBlobDoc;", "modifier": "protected", "type": "DocumentModel", "declarator": "zeroLengthBlobDoc", "var_name": "zeroLengthBlobDoc"}, {"original_string": "protected String zeroLengthBlobDocFileId;", "modifier": "protected", "type": "String", "declarator": "zeroLengthBlobDocFileId", "var_name": "zeroLengthBlobDocFileId"}, {"original_string": "protected DocumentModel hugeBlobDoc;", "modifier": "protected", "type": "DocumentModel", "declarator": "hugeBlobDoc", "var_name": "hugeBlobDoc"}, {"original_string": "protected String hugeBlobDocFileId;", "modifier": "protected", "type": "String", "declarator": "hugeBlobDocFileId", "var_name": "hugeBlobDocFileId"}, {"original_string": "protected DocumentModel noBlobDoc;", "modifier": "protected", "type": "DocumentModel", "declarator": "noBlobDoc", "var_name": "noBlobDoc"}, {"original_string": "protected String noBlobDocFileId;", "modifier": "protected", "type": "String", "declarator": "noBlobDocFileId", "var_name": "noBlobDocFileId"}, {"original_string": "protected DocumentModel multipleBlobsDoc;", "modifier": "protected", "type": "DocumentModel", "declarator": "multipleBlobsDoc", "var_name": "multipleBlobsDoc"}, {"original_string": "protected String multipleBlobsDocFileId;", "modifier": "protected", "type": "String", "declarator": "multipleBlobsDocFileId", "var_name": "multipleBlobsDocFileId"}, {"original_string": "protected String multipleBlobsDocAttachementId;", "modifier": "protected", "type": "String", "declarator": "multipleBlobsDocAttachementId", "var_name": "multipleBlobsDocAttachementId"}, {"original_string": "protected Blob expectedFileBlob;", "modifier": "protected", "type": "Blob", "declarator": "expectedFileBlob", "var_name": "expectedFileBlob"}, {"original_string": "protected Blob expectedAttachementBlob;", "modifier": "protected", "type": "Blob", "declarator": "expectedAttachementBlob", "var_name": "expectedAttachementBlob"}, {"original_string": "ObjectMapper mapper;", "modifier": "", "type": "ObjectMapper", "declarator": "mapper", "var_name": "mapper"}], "file": "modules/platform/nuxeo-wopi/src/test/java/org/nuxeo/wopi/jaxrs/TestFilesEndpoint.java"}, "test_case": {"identifier": "testGetFile", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testGetFile() throws IOException {\n        // fail - 404\n        checkGetNotFound(CONTENTS_PATH);\n\n        // fail - 412 - blob size exceeding Integer.MAX_VALUE\n        try (CloseableClientResponse response = get(joeToken, hugeBlobDocFileId, CONTENTS_PATH)) {\n            assertEquals(412, response.getStatus());\n        }\n\n        // fail - 412 - blob size exceeding X-WOPI-MaxExpectedSize header\n        Map<String, String> headers = new HashMap<>();\n        headers.put(MAX_EXPECTED_SIZE, \"1\");\n        try (CloseableClientResponse response = get(joeToken, headers, blobDocFileId, CONTENTS_PATH)) {\n            assertEquals(412, response.getStatus());\n        }\n\n        // success - bad header\n        headers.put(MAX_EXPECTED_SIZE, \"foo\");\n        String expectedFileBlobString = expectedFileBlob.getString();\n        try (CloseableClientResponse response = get(joeToken, headers, blobDocFileId, CONTENTS_PATH)) {\n            assertEquals(200, response.getStatus());\n            Blob actualBlob = Blobs.createBlob(response.getEntityInputStream());\n            assertEquals(expectedFileBlobString, actualBlob.getString());\n        }\n\n        // success - no header\n        try (CloseableClientResponse response = get(joeToken, blobDocFileId, CONTENTS_PATH)) {\n            assertEquals(200, response.getStatus());\n            Blob actualBlob = Blobs.createBlob(response.getEntityInputStream());\n            assertEquals(expectedFileBlobString, actualBlob.getString());\n        }\n    }", "signature": "void testGetFile()", "full_signature": "@Test public void testGetFile()", "class_method_signature": "TestFilesEndpoint.testGetFile()", "testcase": true, "constructor": false, "invocations": ["checkGetNotFound", "get", "assertEquals", "getStatus", "put", "get", "assertEquals", "getStatus", "put", "getString", "get", "assertEquals", "getStatus", "createBlob", "getEntityInputStream", "assertEquals", "getString", "get", "assertEquals", "getStatus", "createBlob", "getEntityInputStream", "assertEquals", "getString"]}, "focal_class": {"identifier": "FilesEndpoint", "superclass": "extends DefaultObject", "interfaces": "", "fields": [{"original_string": "private static final Logger log = LogManager.getLogger(FilesEndpoint.class);", "modifier": "private static final", "type": "Logger", "declarator": "log = LogManager.getLogger(FilesEndpoint.class)", "var_name": "log"}, {"original_string": "@Context\n    protected HttpServletRequest request;", "modifier": "@Context\n    protected", "type": "HttpServletRequest", "declarator": "request", "var_name": "request"}, {"original_string": "@Context\n    protected HttpServletResponse response;", "modifier": "@Context\n    protected", "type": "HttpServletResponse", "declarator": "response", "var_name": "response"}, {"original_string": "@Context\n    protected HttpHeaders httpHeaders;", "modifier": "@Context\n    protected", "type": "HttpHeaders", "declarator": "httpHeaders", "var_name": "httpHeaders"}, {"original_string": "protected CoreSession session;", "modifier": "protected", "type": "CoreSession", "declarator": "session", "var_name": "session"}, {"original_string": "protected DocumentModel doc;", "modifier": "protected", "type": "DocumentModel", "declarator": "doc", "var_name": "doc"}, {"original_string": "protected Blob blob;", "modifier": "protected", "type": "Blob", "declarator": "blob", "var_name": "blob"}, {"original_string": "protected String xpath;", "modifier": "protected", "type": "String", "declarator": "xpath", "var_name": "xpath"}, {"original_string": "protected String fileId;", "modifier": "protected", "type": "String", "declarator": "fileId", "var_name": "fileId"}, {"original_string": "protected String baseURL;", "modifier": "protected", "type": "String", "declarator": "baseURL", "var_name": "baseURL"}, {"original_string": "protected String wopiBaseURL;", "modifier": "protected", "type": "String", "declarator": "wopiBaseURL", "var_name": "wopiBaseURL"}], "methods": [{"identifier": "initialize", "parameters": "(Object... args)", "modifiers": "@Override public", "return": "void", "signature": "void initialize(Object... args)", "full_signature": "@Override public void initialize(Object... args)", "class_method_signature": "FilesEndpoint.initialize(Object... args)", "testcase": false, "constructor": false}, {"identifier": "checkFileInfo", "parameters": "()", "modifiers": "@GET @Produces(MediaType.APPLICATION_JSON) public", "return": "Response", "signature": "Response checkFileInfo()", "full_signature": "@GET @Produces(MediaType.APPLICATION_JSON) public Response checkFileInfo()", "class_method_signature": "FilesEndpoint.checkFileInfo()", "testcase": false, "constructor": false}, {"identifier": "getFile", "parameters": "(@HeaderParam(MAX_EXPECTED_SIZE) String maxExpectedSizeHeader)", "modifiers": "@GET @Path(\"contents\") public", "return": "Object", "signature": "Object getFile(@HeaderParam(MAX_EXPECTED_SIZE) String maxExpectedSizeHeader)", "full_signature": "@GET @Path(\"contents\") public Object getFile(@HeaderParam(MAX_EXPECTED_SIZE) String maxExpectedSizeHeader)", "class_method_signature": "FilesEndpoint.getFile(@HeaderParam(MAX_EXPECTED_SIZE) String maxExpectedSizeHeader)", "testcase": false, "constructor": false}, {"identifier": "doPost", "parameters": "(@HeaderParam(OVERRIDE) Operation operation)", "modifiers": "@POST public", "return": "Object", "signature": "Object doPost(@HeaderParam(OVERRIDE) Operation operation)", "full_signature": "@POST public Object doPost(@HeaderParam(OVERRIDE) Operation operation)", "class_method_signature": "FilesEndpoint.doPost(@HeaderParam(OVERRIDE) Operation operation)", "testcase": false, "constructor": false}, {"identifier": "lockOrUnlockAndRelock", "parameters": "()", "modifiers": "protected", "return": "Object", "signature": "Object lockOrUnlockAndRelock()", "full_signature": "protected Object lockOrUnlockAndRelock()", "class_method_signature": "FilesEndpoint.lockOrUnlockAndRelock()", "testcase": false, "constructor": false}, {"identifier": "lock", "parameters": "(String lock)", "modifiers": "protected", "return": "Object", "signature": "Object lock(String lock)", "full_signature": "protected Object lock(String lock)", "class_method_signature": "FilesEndpoint.lock(String lock)", "testcase": false, "constructor": false}, {"identifier": "buildItemVersionResponse", "parameters": "(String operation, Blob blob)", "modifiers": "protected", "return": "Response", "signature": "Response buildItemVersionResponse(String operation, Blob blob)", "full_signature": "protected Response buildItemVersionResponse(String operation, Blob blob)", "class_method_signature": "FilesEndpoint.buildItemVersionResponse(String operation, Blob blob)", "testcase": false, "constructor": false}, {"identifier": "unlockAndRelock", "parameters": "(String lock, String oldLock)", "modifiers": "protected", "return": "Object", "signature": "Object unlockAndRelock(String lock, String oldLock)", "full_signature": "protected Object unlockAndRelock(String lock, String oldLock)", "class_method_signature": "FilesEndpoint.unlockAndRelock(String lock, String oldLock)", "testcase": false, "constructor": false}, {"identifier": "getCurrentLock", "parameters": "(String operation)", "modifiers": "protected", "return": "String", "signature": "String getCurrentLock(String operation)", "full_signature": "protected String getCurrentLock(String operation)", "class_method_signature": "FilesEndpoint.getCurrentLock(String operation)", "testcase": false, "constructor": false}, {"identifier": "buildConflictResponse", "parameters": "(String operation, String lock)", "modifiers": "protected", "return": "Response", "signature": "Response buildConflictResponse(String operation, String lock)", "full_signature": "protected Response buildConflictResponse(String operation, String lock)", "class_method_signature": "FilesEndpoint.buildConflictResponse(String operation, String lock)", "testcase": false, "constructor": false}, {"identifier": "getLock", "parameters": "()", "modifiers": "protected", "return": "Object", "signature": "Object getLock()", "full_signature": "protected Object getLock()", "class_method_signature": "FilesEndpoint.getLock()", "testcase": false, "constructor": false}, {"identifier": "unlockOrRefresh", "parameters": "(String operation, String lock, boolean unlock)", "modifiers": "protected", "return": "Object", "signature": "Object unlockOrRefresh(String operation, String lock, boolean unlock)", "full_signature": "protected Object unlockOrRefresh(String operation, String lock, boolean unlock)", "class_method_signature": "FilesEndpoint.unlockOrRefresh(String operation, String lock, boolean unlock)", "testcase": false, "constructor": false}, {"identifier": "putRelativeFile", "parameters": "()", "modifiers": "public", "return": "Object", "signature": "Object putRelativeFile()", "full_signature": "public Object putRelativeFile()", "class_method_signature": "FilesEndpoint.putRelativeFile()", "testcase": false, "constructor": false}, {"identifier": "createVersionFromRequestBody", "parameters": "(String filename)", "modifiers": "protected", "return": "DocumentModel", "signature": "DocumentModel createVersionFromRequestBody(String filename)", "full_signature": "protected DocumentModel createVersionFromRequestBody(String filename)", "class_method_signature": "FilesEndpoint.createVersionFromRequestBody(String filename)", "testcase": false, "constructor": false}, {"identifier": "renameFile", "parameters": "()", "modifiers": "public", "return": "Object", "signature": "Object renameFile()", "full_signature": "public Object renameFile()", "class_method_signature": "FilesEndpoint.renameFile()", "testcase": false, "constructor": false}, {"identifier": "renameBlob", "parameters": "(String requestedName)", "modifiers": "protected", "return": "Response", "signature": "Response renameBlob(String requestedName)", "full_signature": "protected Response renameBlob(String requestedName)", "class_method_signature": "FilesEndpoint.renameBlob(String requestedName)", "testcase": false, "constructor": false}, {"identifier": "getShareUrl", "parameters": "()", "modifiers": "public", "return": "Object", "signature": "Object getShareUrl()", "full_signature": "public Object getShareUrl()", "class_method_signature": "FilesEndpoint.getShareUrl()", "testcase": false, "constructor": false}, {"identifier": "doPostContents", "parameters": "(@HeaderParam(OVERRIDE) Operation operation)", "modifiers": "@POST @Path(\"contents\") public", "return": "Object", "signature": "Object doPostContents(@HeaderParam(OVERRIDE) Operation operation)", "full_signature": "@POST @Path(\"contents\") public Object doPostContents(@HeaderParam(OVERRIDE) Operation operation)", "class_method_signature": "FilesEndpoint.doPostContents(@HeaderParam(OVERRIDE) Operation operation)", "testcase": false, "constructor": false}, {"identifier": "putFile", "parameters": "()", "modifiers": "public", "return": "Object", "signature": "Object putFile()", "full_signature": "public Object putFile()", "class_method_signature": "FilesEndpoint.putFile()", "testcase": false, "constructor": false}, {"identifier": "updateBlob", "parameters": "()", "modifiers": "protected", "return": "Response", "signature": "Response updateBlob()", "full_signature": "protected Response updateBlob()", "class_method_signature": "FilesEndpoint.updateBlob()", "testcase": false, "constructor": false}, {"identifier": "createBlobFromRequestBody", "parameters": "(String filename, String mimeType)", "modifiers": "protected", "return": "Blob", "signature": "Blob createBlobFromRequestBody(String filename, String mimeType)", "full_signature": "protected Blob createBlobFromRequestBody(String filename, String mimeType)", "class_method_signature": "FilesEndpoint.createBlobFromRequestBody(String filename, String mimeType)", "testcase": false, "constructor": false}, {"identifier": "unlock", "parameters": "()", "modifiers": "protected", "return": "Object", "signature": "Object unlock()", "full_signature": "protected Object unlock()", "class_method_signature": "FilesEndpoint.unlock()", "testcase": false, "constructor": false}, {"identifier": "refreshLock", "parameters": "()", "modifiers": "protected", "return": "Object", "signature": "Object refreshLock()", "full_signature": "protected Object refreshLock()", "class_method_signature": "FilesEndpoint.refreshLock()", "testcase": false, "constructor": false}, {"identifier": "getMaxExpectedSize", "parameters": "(String maxExpectedSizeHeader)", "modifiers": "protected", "return": "int", "signature": "int getMaxExpectedSize(String maxExpectedSizeHeader)", "full_signature": "protected int getMaxExpectedSize(String maxExpectedSizeHeader)", "class_method_signature": "FilesEndpoint.getMaxExpectedSize(String maxExpectedSizeHeader)", "testcase": false, "constructor": false}, {"identifier": "getHeader", "parameters": "(String operation, String headerName)", "modifiers": "protected", "return": "String", "signature": "String getHeader(String operation, String headerName)", "full_signature": "protected String getHeader(String operation, String headerName)", "class_method_signature": "FilesEndpoint.getHeader(String operation, String headerName)", "testcase": false, "constructor": false}, {"identifier": "getHeader", "parameters": "(String operation, String headerName, boolean nullable)", "modifiers": "protected", "return": "String", "signature": "String getHeader(String operation, String headerName, boolean nullable)", "full_signature": "protected String getHeader(String operation, String headerName, boolean nullable)", "class_method_signature": "FilesEndpoint.getHeader(String operation, String headerName, boolean nullable)", "testcase": false, "constructor": false}, {"identifier": "checkWritePropertiesPermission", "parameters": "(String operation)", "modifiers": "protected", "return": "void", "signature": "void checkWritePropertiesPermission(String operation)", "full_signature": "protected void checkWritePropertiesPermission(String operation)", "class_method_signature": "FilesEndpoint.checkWritePropertiesPermission(String operation)", "testcase": false, "constructor": false}, {"identifier": "buildCheckFileInfoMap", "parameters": "()", "modifiers": "protected", "return": "Map<String, Serializable>", "signature": "Map<String, Serializable> buildCheckFileInfoMap()", "full_signature": "protected Map<String, Serializable> buildCheckFileInfoMap()", "class_method_signature": "FilesEndpoint.buildCheckFileInfoMap()", "testcase": false, "constructor": false}, {"identifier": "addRequiredProperties", "parameters": "(Map<String, Serializable> map)", "modifiers": "protected", "return": "void", "signature": "void addRequiredProperties(Map<String, Serializable> map)", "full_signature": "protected void addRequiredProperties(Map<String, Serializable> map)", "class_method_signature": "FilesEndpoint.addRequiredProperties(Map<String, Serializable> map)", "testcase": false, "constructor": false}, {"identifier": "addHostCapabilitiesProperties", "parameters": "(Map<String, Serializable> map)", "modifiers": "protected", "return": "void", "signature": "void addHostCapabilitiesProperties(Map<String, Serializable> map)", "full_signature": "protected void addHostCapabilitiesProperties(Map<String, Serializable> map)", "class_method_signature": "FilesEndpoint.addHostCapabilitiesProperties(Map<String, Serializable> map)", "testcase": false, "constructor": false}, {"identifier": "addUserMetadataProperties", "parameters": "(Map<String, Serializable> map)", "modifiers": "protected", "return": "void", "signature": "void addUserMetadataProperties(Map<String, Serializable> map)", "full_signature": "protected void addUserMetadataProperties(Map<String, Serializable> map)", "class_method_signature": "FilesEndpoint.addUserMetadataProperties(Map<String, Serializable> map)", "testcase": false, "constructor": false}, {"identifier": "addUserPermissionsProperties", "parameters": "(Map<String, Serializable> map)", "modifiers": "protected", "return": "void", "signature": "void addUserPermissionsProperties(Map<String, Serializable> map)", "full_signature": "protected void addUserPermissionsProperties(Map<String, Serializable> map)", "class_method_signature": "FilesEndpoint.addUserPermissionsProperties(Map<String, Serializable> map)", "testcase": false, "constructor": false}, {"identifier": "addFileURLProperties", "parameters": "(Map<String, Serializable> map)", "modifiers": "protected", "return": "void", "signature": "void addFileURLProperties(Map<String, Serializable> map)", "full_signature": "protected void addFileURLProperties(Map<String, Serializable> map)", "class_method_signature": "FilesEndpoint.addFileURLProperties(Map<String, Serializable> map)", "testcase": false, "constructor": false}, {"identifier": "addBreadcrumbProperties", "parameters": "(Map<String, Serializable> map)", "modifiers": "protected", "return": "void", "signature": "void addBreadcrumbProperties(Map<String, Serializable> map)", "full_signature": "protected void addBreadcrumbProperties(Map<String, Serializable> map)", "class_method_signature": "FilesEndpoint.addBreadcrumbProperties(Map<String, Serializable> map)", "testcase": false, "constructor": false}, {"identifier": "getDocumentURL", "parameters": "(DocumentModel doc)", "modifiers": "protected", "return": "String", "signature": "String getDocumentURL(DocumentModel doc)", "full_signature": "protected String getDocumentURL(DocumentModel doc)", "class_method_signature": "FilesEndpoint.getDocumentURL(DocumentModel doc)", "testcase": false, "constructor": false}, {"identifier": "logRequest", "parameters": "(String operation, String... headers)", "modifiers": "protected", "return": "void", "signature": "void logRequest(String operation, String... headers)", "full_signature": "protected void logRequest(String operation, String... headers)", "class_method_signature": "FilesEndpoint.logRequest(String operation, String... headers)", "testcase": false, "constructor": false}, {"identifier": "logCondition", "parameters": "(String condition)", "modifiers": "protected", "return": "void", "signature": "void logCondition(String condition)", "full_signature": "protected void logCondition(String condition)", "class_method_signature": "FilesEndpoint.logCondition(String condition)", "testcase": false, "constructor": false}, {"identifier": "logCondition", "parameters": "(Supplier<String> condition)", "modifiers": "protected", "return": "void", "signature": "void logCondition(Supplier<String> condition)", "full_signature": "protected void logCondition(Supplier<String> condition)", "class_method_signature": "FilesEndpoint.logCondition(Supplier<String> condition)", "testcase": false, "constructor": false}, {"identifier": "logNuxeoAction", "parameters": "(String action)", "modifiers": "protected", "return": "void", "signature": "void logNuxeoAction(String action)", "full_signature": "protected void logNuxeoAction(String action)", "class_method_signature": "FilesEndpoint.logNuxeoAction(String action)", "testcase": false, "constructor": false}, {"identifier": "logNuxeoAction", "parameters": "(Supplier<String> action)", "modifiers": "protected", "return": "void", "signature": "void logNuxeoAction(Supplier<String> action)", "full_signature": "protected void logNuxeoAction(Supplier<String> action)", "class_method_signature": "FilesEndpoint.logNuxeoAction(Supplier<String> action)", "testcase": false, "constructor": false}, {"identifier": "logResponse", "parameters": "(String operation, int status, String... headers)", "modifiers": "protected", "return": "void", "signature": "void logResponse(String operation, int status, String... headers)", "full_signature": "protected void logResponse(String operation, int status, String... headers)", "class_method_signature": "FilesEndpoint.logResponse(String operation, int status, String... headers)", "testcase": false, "constructor": false}, {"identifier": "logResponse", "parameters": "(String operation, int status, Object entity, String... headers)", "modifiers": "protected", "return": "void", "signature": "void logResponse(String operation, int status, Object entity, String... headers)", "full_signature": "protected void logResponse(String operation, int status, Object entity, String... headers)", "class_method_signature": "FilesEndpoint.logResponse(String operation, int status, Object entity, String... headers)", "testcase": false, "constructor": false}, {"identifier": "getHeaderString", "parameters": "(String... headers)", "modifiers": "protected", "return": "String", "signature": "String getHeaderString(String... headers)", "full_signature": "protected String getHeaderString(String... headers)", "class_method_signature": "FilesEndpoint.getHeaderString(String... headers)", "testcase": false, "constructor": false}, {"identifier": "getEntityString", "parameters": "(Object entity)", "modifiers": "protected", "return": "String", "signature": "String getEntityString(Object entity)", "full_signature": "protected String getEntityString(Object entity)", "class_method_signature": "FilesEndpoint.getEntityString(Object entity)", "testcase": false, "constructor": false}], "file": "modules/platform/nuxeo-wopi/src/main/java/org/nuxeo/wopi/jaxrs/FilesEndpoint.java"}, "focal_method": {"identifier": "getFile", "parameters": "(@HeaderParam(MAX_EXPECTED_SIZE) String maxExpectedSizeHeader)", "modifiers": "@GET @Path(\"contents\") public", "return": "Object", "body": "@GET\n    @Path(\"contents\")\n    public Object getFile(@HeaderParam(MAX_EXPECTED_SIZE) String maxExpectedSizeHeader) {\n        int maxExpectedSize = getMaxExpectedSize(maxExpectedSizeHeader);\n        logRequest(OPERATION_GET_FILE, MAX_EXPECTED_SIZE, maxExpectedSizeHeader);\n\n        long blobLength = blob.getLength();\n        if (blobLength > maxExpectedSize) {\n            logCondition(() -> \"Blob length \" + blobLength + \" > max expected size \" + maxExpectedSize);\n            logResponse(OPERATION_GET_FILE, PRECONDITION_FAILED.getStatusCode());\n            throw new PreConditionFailedException();\n        }\n\n        // ignore the return value as we need to return the blob anyway\n        buildItemVersionResponse(OPERATION_GET_FILE, blob);\n        return blob;\n    }", "signature": "Object getFile(@HeaderParam(MAX_EXPECTED_SIZE) String maxExpectedSizeHeader)", "full_signature": "@GET @Path(\"contents\") public Object getFile(@HeaderParam(MAX_EXPECTED_SIZE) String maxExpectedSizeHeader)", "class_method_signature": "FilesEndpoint.getFile(@HeaderParam(MAX_EXPECTED_SIZE) String maxExpectedSizeHeader)", "testcase": false, "constructor": false, "invocations": ["getMaxExpectedSize", "logRequest", "getLength", "logCondition", "logResponse", "getStatusCode", "buildItemVersionResponse"]}, "repository": {"repo_id": 2988101, "url": "https://github.com/nuxeo/nuxeo", "stars": 339, "created": "12/15/2011 2:35:41 PM +00:00", "updates": "2020-01-27T16:52:27+00:00", "fork": "False", "license": "licensed"}}