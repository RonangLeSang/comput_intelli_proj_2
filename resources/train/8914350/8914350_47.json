{"test_class": {"identifier": "TestTimestampField", "superclass": "", "interfaces": "", "fields": [], "file": "suro-elasticsearch/src/test/java/com/netflix/suro/sink/elasticsearch/TestTimestampField.java"}, "test_case": {"identifier": "shouldNullFormatReturnsLongTS", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void shouldNullFormatReturnsLongTS() {\n        TimestampField field = new TimestampField(\"ts\", null);\n        long ts = System.currentTimeMillis();\n        assertEquals(\n                field.get(\n                        new ImmutableMap.Builder<String, Object>()\n                                .put(\"ts\", ts)\n                                .put(\"field1\", \"value1\").build()),\n                ts);\n        assertEquals(\n                field.get(\n                        new ImmutableMap.Builder<String, Object>()\n                                .put(\"ts\", \"2014-04-05T00:00:00.000Z\")\n                                .put(\"field1\", \"value1\").build()),\n                new DateTime(\"2014-04-05T00:00:00.000Z\").getMillis());\n    }", "signature": "void shouldNullFormatReturnsLongTS()", "full_signature": "@Test public void shouldNullFormatReturnsLongTS()", "class_method_signature": "TestTimestampField.shouldNullFormatReturnsLongTS()", "testcase": true, "constructor": false, "invocations": ["currentTimeMillis", "assertEquals", "get", "build", "put", "put", "assertEquals", "get", "build", "put", "put", "getMillis"]}, "focal_class": {"identifier": "TimestampField", "superclass": "", "interfaces": "", "fields": [{"original_string": "private final String fieldName;", "modifier": "private final", "type": "String", "declarator": "fieldName", "var_name": "fieldName"}, {"original_string": "private final FormatDateTimeFormatter formatter;", "modifier": "private final", "type": "FormatDateTimeFormatter", "declarator": "formatter", "var_name": "formatter"}], "methods": [{"identifier": "TimestampField", "parameters": "(@JsonProperty(\"field\") String fieldName, @JsonProperty(\"format\") String format)", "modifiers": "@JsonCreator public", "return": "", "signature": " TimestampField(@JsonProperty(\"field\") String fieldName, @JsonProperty(\"format\") String format)", "full_signature": "@JsonCreator public  TimestampField(@JsonProperty(\"field\") String fieldName, @JsonProperty(\"format\") String format)", "class_method_signature": "TimestampField.TimestampField(@JsonProperty(\"field\") String fieldName, @JsonProperty(\"format\") String format)", "testcase": false, "constructor": true}, {"identifier": "get", "parameters": "(Map<String, Object> msg)", "modifiers": "public", "return": "long", "signature": "long get(Map<String, Object> msg)", "full_signature": "public long get(Map<String, Object> msg)", "class_method_signature": "TimestampField.get(Map<String, Object> msg)", "testcase": false, "constructor": false}], "file": "suro-elasticsearch/src/main/java/com/netflix/suro/sink/elasticsearch/TimestampField.java"}, "focal_method": {"identifier": "get", "parameters": "(Map<String, Object> msg)", "modifiers": "public", "return": "long", "body": "public long get(Map<String, Object> msg) {\n        Object value = msg.get(fieldName);\n\n        if (value instanceof Number) {\n            return ((Number) value).longValue();\n        }\n        return formatter.parser().parseMillis(value.toString());\n    }", "signature": "long get(Map<String, Object> msg)", "full_signature": "public long get(Map<String, Object> msg)", "class_method_signature": "TimestampField.get(Map<String, Object> msg)", "testcase": false, "constructor": false, "invocations": ["get", "longValue", "parseMillis", "parser", "toString"]}, "repository": {"repo_id": 8914350, "url": "https://github.com/Netflix/suro", "language": "Java", "is_fork": false, "fork_count": 172, "stargazer_count": 746, "size": 4383, "license": "licensed"}}