{"test_class": {"identifier": "JsonDbOpensocialServiceTest", "superclass": "extends Assert", "interfaces": "", "fields": [{"original_string": "private JsonDbOpensocialService db;", "modifier": "private", "type": "JsonDbOpensocialService", "declarator": "db", "var_name": "db"}, {"original_string": "private static final UserId CANON_USER = new UserId(UserId.Type.userId, \"canonical\");", "modifier": "private static final", "type": "UserId", "declarator": "CANON_USER = new UserId(UserId.Type.userId, \"canonical\")", "var_name": "CANON_USER"}, {"original_string": "private static final UserId JOHN_DOE = new UserId(UserId.Type.userId, \"john.doe\");", "modifier": "private static final", "type": "UserId", "declarator": "JOHN_DOE = new UserId(UserId.Type.userId, \"john.doe\")", "var_name": "JOHN_DOE"}, {"original_string": "private static final UserId JANE_DOE = new UserId(UserId.Type.userId, \"jane.doe\");", "modifier": "private static final", "type": "UserId", "declarator": "JANE_DOE = new UserId(UserId.Type.userId, \"jane.doe\")", "var_name": "JANE_DOE"}, {"original_string": "private static final UserId ANONYMOUS = new UserId(UserId.Type.userId, AnonymousSecurityToken.ANONYMOUS_ID);", "modifier": "private static final", "type": "UserId", "declarator": "ANONYMOUS = new UserId(UserId.Type.userId, AnonymousSecurityToken.ANONYMOUS_ID)", "var_name": "ANONYMOUS"}, {"original_string": "private static final GroupId SELF_GROUP = new GroupId(GroupId.Type.self, null);", "modifier": "private static final", "type": "GroupId", "declarator": "SELF_GROUP = new GroupId(GroupId.Type.self, null)", "var_name": "SELF_GROUP"}, {"original_string": "private static final String APP_ID = \"1\";", "modifier": "private static final", "type": "String", "declarator": "APP_ID = \"1\"", "var_name": "APP_ID"}, {"original_string": "private static final String CANONICAL_USER_ID = \"canonical\";", "modifier": "private static final", "type": "String", "declarator": "CANONICAL_USER_ID = \"canonical\"", "var_name": "CANONICAL_USER_ID"}, {"original_string": "private SecurityToken token = new FakeGadgetToken();", "modifier": "private", "type": "SecurityToken", "declarator": "token = new FakeGadgetToken()", "var_name": "token"}], "file": "java/social-api/src/test/java/org/apache/shindig/social/sample/spi/JsonDbOpensocialServiceTest.java"}, "test_case": {"identifier": "testGetExpectedActivityEntries", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testGetExpectedActivityEntries() throws Exception {\n    RestfulCollection<ActivityEntry> responseItem = db.getActivityEntries(\n        ImmutableSet.of(JOHN_DOE), SELF_GROUP, APP_ID, Collections.<String>emptySet(), null,\n        new FakeGadgetToken()).get();\n    assertSame(3, responseItem.getTotalResults());\n  }", "signature": "void testGetExpectedActivityEntries()", "full_signature": "@Test public void testGetExpectedActivityEntries()", "class_method_signature": "JsonDbOpensocialServiceTest.testGetExpectedActivityEntries()", "testcase": true, "constructor": false, "invocations": ["get", "getActivityEntries", "of", "emptySet", "assertSame", "getTotalResults"]}, "focal_class": {"identifier": "JsonDbOpensocialService", "superclass": "", "interfaces": "implements ActivityService, PersonService, AppDataService,\n    MessageService, AlbumService, MediaItemService, ActivityStreamService, GroupService", "fields": [{"original_string": "private static final Comparator<Person> NAME_COMPARATOR = new Comparator<Person>() {\n    public int compare(Person person, Person person1) {\n      String name = person.getName().getFormatted();\n      String name1 = person1.getName().getFormatted();\n      return name.compareTo(name1);\n    }\n  };", "modifier": "private static final", "type": "Comparator<Person>", "declarator": "NAME_COMPARATOR = new Comparator<Person>() {\n    public int compare(Person person, Person person1) {\n      String name = person.getName().getFormatted();\n      String name1 = person1.getName().getFormatted();\n      return name.compareTo(name1);\n    }\n  }", "var_name": "NAME_COMPARATOR"}, {"original_string": "private JSONObject db;", "modifier": "private", "type": "JSONObject", "declarator": "db", "var_name": "db"}, {"original_string": "private BeanConverter converter;", "modifier": "private", "type": "BeanConverter", "declarator": "converter", "var_name": "converter"}, {"original_string": "private static final String PEOPLE_TABLE = \"people\";", "modifier": "private static final", "type": "String", "declarator": "PEOPLE_TABLE = \"people\"", "var_name": "PEOPLE_TABLE"}, {"original_string": "private static final String GROUPS_TABLE = \"groups\";", "modifier": "private static final", "type": "String", "declarator": "GROUPS_TABLE = \"groups\"", "var_name": "GROUPS_TABLE"}, {"original_string": "private static final String GROUP_MEMBERS_TABLE = \"groupMembers\";", "modifier": "private static final", "type": "String", "declarator": "GROUP_MEMBERS_TABLE = \"groupMembers\"", "var_name": "GROUP_MEMBERS_TABLE"}, {"original_string": "private static final String ACTIVITIES_TABLE = \"activities\";", "modifier": "private static final", "type": "String", "declarator": "ACTIVITIES_TABLE = \"activities\"", "var_name": "ACTIVITIES_TABLE"}, {"original_string": "private static final String ALBUMS_TABLE = \"albums\";", "modifier": "private static final", "type": "String", "declarator": "ALBUMS_TABLE = \"albums\"", "var_name": "ALBUMS_TABLE"}, {"original_string": "private static final String MEDIAITEMS_TABLE = \"mediaItems\";", "modifier": "private static final", "type": "String", "declarator": "MEDIAITEMS_TABLE = \"mediaItems\"", "var_name": "MEDIAITEMS_TABLE"}, {"original_string": "private static final String DATA_TABLE = \"data\";", "modifier": "private static final", "type": "String", "declarator": "DATA_TABLE = \"data\"", "var_name": "DATA_TABLE"}, {"original_string": "private static final String FRIEND_LINK_TABLE = \"friendLinks\";", "modifier": "private static final", "type": "String", "declarator": "FRIEND_LINK_TABLE = \"friendLinks\"", "var_name": "FRIEND_LINK_TABLE"}, {"original_string": "private static final String MESSAGE_TABLE = \"messages\";", "modifier": "private static final", "type": "String", "declarator": "MESSAGE_TABLE = \"messages\"", "var_name": "MESSAGE_TABLE"}, {"original_string": "private static final String MESSAGES_ARRAY = \"messages\";", "modifier": "private static final", "type": "String", "declarator": "MESSAGES_ARRAY = \"messages\"", "var_name": "MESSAGES_ARRAY"}, {"original_string": "private static final String PASSWORDS_TABLE = \"passwords\";", "modifier": "private static final", "type": "String", "declarator": "PASSWORDS_TABLE = \"passwords\"", "var_name": "PASSWORDS_TABLE"}, {"original_string": "private static final String ACTIVITYSTREAMS_TABLE = \"activityEntries\";", "modifier": "private static final", "type": "String", "declarator": "ACTIVITYSTREAMS_TABLE = \"activityEntries\"", "var_name": "ACTIVITYSTREAMS_TABLE"}, {"original_string": "private static final String ANONYMOUS_NAME = \"Anonymous\";", "modifier": "private static final", "type": "String", "declarator": "ANONYMOUS_NAME = \"Anonymous\"", "var_name": "ANONYMOUS_NAME"}, {"original_string": "private Authority authority;", "modifier": "private", "type": "Authority", "declarator": "authority", "var_name": "authority"}], "methods": [{"identifier": "JsonDbOpensocialService", "parameters": "(@Named(\"shindig.canonical.json.db\")\n  String jsonLocation, @Named(\"shindig.bean.converter.json\")\n  BeanConverter converter,\n  @Named(\"shindig.contextroot\") String contextroot)", "modifiers": "@Inject public", "return": "", "signature": " JsonDbOpensocialService(@Named(\"shindig.canonical.json.db\")\n  String jsonLocation, @Named(\"shindig.bean.converter.json\")\n  BeanConverter converter,\n  @Named(\"shindig.contextroot\") String contextroot)", "full_signature": "@Inject public  JsonDbOpensocialService(@Named(\"shindig.canonical.json.db\")\n  String jsonLocation, @Named(\"shindig.bean.converter.json\")\n  BeanConverter converter,\n  @Named(\"shindig.contextroot\") String contextroot)", "class_method_signature": "JsonDbOpensocialService.JsonDbOpensocialService(@Named(\"shindig.canonical.json.db\")\n  String jsonLocation, @Named(\"shindig.bean.converter.json\")\n  BeanConverter converter,\n  @Named(\"shindig.contextroot\") String contextroot)", "testcase": false, "constructor": true}, {"identifier": "getDb", "parameters": "()", "modifiers": "public", "return": "JSONObject", "signature": "JSONObject getDb()", "full_signature": "public JSONObject getDb()", "class_method_signature": "JsonDbOpensocialService.getDb()", "testcase": false, "constructor": false}, {"identifier": "setDb", "parameters": "(JSONObject db)", "modifiers": "public", "return": "void", "signature": "void setDb(JSONObject db)", "full_signature": "public void setDb(JSONObject db)", "class_method_signature": "JsonDbOpensocialService.setDb(JSONObject db)", "testcase": false, "constructor": false}, {"identifier": "setAuthority", "parameters": "(Authority authority)", "modifiers": "@Inject(optional = true) public", "return": "void", "signature": "void setAuthority(Authority authority)", "full_signature": "@Inject(optional = true) public void setAuthority(Authority authority)", "class_method_signature": "JsonDbOpensocialService.setAuthority(Authority authority)", "testcase": false, "constructor": false}, {"identifier": "getActivities", "parameters": "(Set<UserId> userIds, GroupId groupId,\n      String appId, Set<String> fields, CollectionOptions options, SecurityToken token)", "modifiers": "public", "return": "Future<RestfulCollection<Activity>>", "signature": "Future<RestfulCollection<Activity>> getActivities(Set<UserId> userIds, GroupId groupId,\n      String appId, Set<String> fields, CollectionOptions options, SecurityToken token)", "full_signature": "public Future<RestfulCollection<Activity>> getActivities(Set<UserId> userIds, GroupId groupId,\n      String appId, Set<String> fields, CollectionOptions options, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getActivities(Set<UserId> userIds, GroupId groupId,\n      String appId, Set<String> fields, CollectionOptions options, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getActivities", "parameters": "(UserId userId, GroupId groupId,\n      String appId, Set<String> fields, CollectionOptions options, Set<String> activityIds,\n      SecurityToken token)", "modifiers": "public", "return": "Future<RestfulCollection<Activity>>", "signature": "Future<RestfulCollection<Activity>> getActivities(UserId userId, GroupId groupId,\n      String appId, Set<String> fields, CollectionOptions options, Set<String> activityIds,\n      SecurityToken token)", "full_signature": "public Future<RestfulCollection<Activity>> getActivities(UserId userId, GroupId groupId,\n      String appId, Set<String> fields, CollectionOptions options, Set<String> activityIds,\n      SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getActivities(UserId userId, GroupId groupId,\n      String appId, Set<String> fields, CollectionOptions options, Set<String> activityIds,\n      SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getActivity", "parameters": "(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, String activityId, SecurityToken token)", "modifiers": "public", "return": "Future<Activity>", "signature": "Future<Activity> getActivity(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, String activityId, SecurityToken token)", "full_signature": "public Future<Activity> getActivity(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, String activityId, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getActivity(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, String activityId, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "deleteActivities", "parameters": "(UserId userId, GroupId groupId, String appId,\n      Set<String> activityIds, SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> deleteActivities(UserId userId, GroupId groupId, String appId,\n      Set<String> activityIds, SecurityToken token)", "full_signature": "public Future<Void> deleteActivities(UserId userId, GroupId groupId, String appId,\n      Set<String> activityIds, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.deleteActivities(UserId userId, GroupId groupId, String appId,\n      Set<String> activityIds, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "createActivity", "parameters": "(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, Activity activity, SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> createActivity(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, Activity activity, SecurityToken token)", "full_signature": "public Future<Void> createActivity(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, Activity activity, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.createActivity(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, Activity activity, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getPeople", "parameters": "(Set<UserId> userIds, GroupId groupId,\n      CollectionOptions options, Set<String> fields, SecurityToken token)", "modifiers": "public", "return": "Future<RestfulCollection<Person>>", "signature": "Future<RestfulCollection<Person>> getPeople(Set<UserId> userIds, GroupId groupId,\n      CollectionOptions options, Set<String> fields, SecurityToken token)", "full_signature": "public Future<RestfulCollection<Person>> getPeople(Set<UserId> userIds, GroupId groupId,\n      CollectionOptions options, Set<String> fields, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getPeople(Set<UserId> userIds, GroupId groupId,\n      CollectionOptions options, Set<String> fields, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getPerson", "parameters": "(UserId id, Set<String> fields, SecurityToken token)", "modifiers": "public", "return": "Future<Person>", "signature": "Future<Person> getPerson(UserId id, Set<String> fields, SecurityToken token)", "full_signature": "public Future<Person> getPerson(UserId id, Set<String> fields, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getPerson(UserId id, Set<String> fields, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "updatePerson", "parameters": "(UserId id, Person person, SecurityToken token)", "modifiers": "public", "return": "Future<Person>", "signature": "Future<Person> updatePerson(UserId id, Person person, SecurityToken token)", "full_signature": "public Future<Person> updatePerson(UserId id, Person person, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.updatePerson(UserId id, Person person, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "viewerCanUpdatePerson", "parameters": "(String viewer, String person)", "modifiers": "protected", "return": "boolean", "signature": "boolean viewerCanUpdatePerson(String viewer, String person)", "full_signature": "protected boolean viewerCanUpdatePerson(String viewer, String person)", "class_method_signature": "JsonDbOpensocialService.viewerCanUpdatePerson(String viewer, String person)", "testcase": false, "constructor": false}, {"identifier": "getPersonAppData", "parameters": "(String id, Set<String> fields)", "modifiers": "private", "return": "Map<String, Object>", "signature": "Map<String, Object> getPersonAppData(String id, Set<String> fields)", "full_signature": "private Map<String, Object> getPersonAppData(String id, Set<String> fields)", "class_method_signature": "JsonDbOpensocialService.getPersonAppData(String id, Set<String> fields)", "testcase": false, "constructor": false}, {"identifier": "getPersonData", "parameters": "(Set<UserId> userIds, GroupId groupId, String appId,\n      Set<String> fields, SecurityToken token)", "modifiers": "public", "return": "Future<DataCollection>", "signature": "Future<DataCollection> getPersonData(Set<UserId> userIds, GroupId groupId, String appId,\n      Set<String> fields, SecurityToken token)", "full_signature": "public Future<DataCollection> getPersonData(Set<UserId> userIds, GroupId groupId, String appId,\n      Set<String> fields, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getPersonData(Set<UserId> userIds, GroupId groupId, String appId,\n      Set<String> fields, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "deletePersonData", "parameters": "(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> deletePersonData(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, SecurityToken token)", "full_signature": "public Future<Void> deletePersonData(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.deletePersonData(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "updatePersonData", "parameters": "(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, Map<String, Object> values, SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> updatePersonData(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, Map<String, Object> values, SecurityToken token)", "full_signature": "public Future<Void> updatePersonData(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, Map<String, Object> values, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.updatePersonData(UserId userId, GroupId groupId, String appId,\n      Set<String> fields, Map<String, Object> values, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getGroups", "parameters": "(UserId userId,\n\t\tCollectionOptions options, Set<String> fields, SecurityToken token)", "modifiers": "public", "return": "Future<RestfulCollection<Group>>", "signature": "Future<RestfulCollection<Group>> getGroups(UserId userId,\n\t\tCollectionOptions options, Set<String> fields, SecurityToken token)", "full_signature": "public Future<RestfulCollection<Group>> getGroups(UserId userId,\n\t\tCollectionOptions options, Set<String> fields, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getGroups(UserId userId,\n\t\tCollectionOptions options, Set<String> fields, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "createMessage", "parameters": "(UserId userId, String appId, String msgCollId, Message message,\n      SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> createMessage(UserId userId, String appId, String msgCollId, Message message,\n      SecurityToken token)", "full_signature": "public Future<Void> createMessage(UserId userId, String appId, String msgCollId, Message message,\n      SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.createMessage(UserId userId, String appId, String msgCollId, Message message,\n      SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getMessageCollections", "parameters": "(UserId userId,\n      Set<String> fields, CollectionOptions options, SecurityToken token)", "modifiers": "public", "return": "Future<RestfulCollection<MessageCollection>>", "signature": "Future<RestfulCollection<MessageCollection>> getMessageCollections(UserId userId,\n      Set<String> fields, CollectionOptions options, SecurityToken token)", "full_signature": "public Future<RestfulCollection<MessageCollection>> getMessageCollections(UserId userId,\n      Set<String> fields, CollectionOptions options, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getMessageCollections(UserId userId,\n      Set<String> fields, CollectionOptions options, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "deleteMessages", "parameters": "(UserId userId, String msgCollId, List<String> ids,\n      SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> deleteMessages(UserId userId, String msgCollId, List<String> ids,\n      SecurityToken token)", "full_signature": "public Future<Void> deleteMessages(UserId userId, String msgCollId, List<String> ids,\n      SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.deleteMessages(UserId userId, String msgCollId, List<String> ids,\n      SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getMessages", "parameters": "(UserId userId, String msgCollId,\n      Set<String> fields, List<String> msgIds, CollectionOptions options, SecurityToken token)", "modifiers": "public", "return": "Future<RestfulCollection<Message>>", "signature": "Future<RestfulCollection<Message>> getMessages(UserId userId, String msgCollId,\n      Set<String> fields, List<String> msgIds, CollectionOptions options, SecurityToken token)", "full_signature": "public Future<RestfulCollection<Message>> getMessages(UserId userId, String msgCollId,\n      Set<String> fields, List<String> msgIds, CollectionOptions options, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getMessages(UserId userId, String msgCollId,\n      Set<String> fields, List<String> msgIds, CollectionOptions options, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "createMessageCollection", "parameters": "(UserId userId,\n      MessageCollection msgCollection, SecurityToken token)", "modifiers": "public", "return": "Future<MessageCollection>", "signature": "Future<MessageCollection> createMessageCollection(UserId userId,\n      MessageCollection msgCollection, SecurityToken token)", "full_signature": "public Future<MessageCollection> createMessageCollection(UserId userId,\n      MessageCollection msgCollection, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.createMessageCollection(UserId userId,\n      MessageCollection msgCollection, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "modifyMessage", "parameters": "(UserId userId, String msgCollId, String messageId,\n      Message message, SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> modifyMessage(UserId userId, String msgCollId, String messageId,\n      Message message, SecurityToken token)", "full_signature": "public Future<Void> modifyMessage(UserId userId, String msgCollId, String messageId,\n      Message message, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.modifyMessage(UserId userId, String msgCollId, String messageId,\n      Message message, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "modifyMessageCollection", "parameters": "(UserId userId, MessageCollection msgCollection,\n      SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> modifyMessageCollection(UserId userId, MessageCollection msgCollection,\n      SecurityToken token)", "full_signature": "public Future<Void> modifyMessageCollection(UserId userId, MessageCollection msgCollection,\n      SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.modifyMessageCollection(UserId userId, MessageCollection msgCollection,\n      SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "deleteMessageCollection", "parameters": "(UserId userId, String msgCollId, SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> deleteMessageCollection(UserId userId, String msgCollId, SecurityToken token)", "full_signature": "public Future<Void> deleteMessageCollection(UserId userId, String msgCollId, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.deleteMessageCollection(UserId userId, String msgCollId, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getPassword", "parameters": "(String username)", "modifiers": "public", "return": "String", "signature": "String getPassword(String username)", "full_signature": "public String getPassword(String username)", "class_method_signature": "JsonDbOpensocialService.getPassword(String username)", "testcase": false, "constructor": false}, {"identifier": "getIdSet", "parameters": "(UserId user, GroupId group, SecurityToken token)", "modifiers": "private", "return": "Set<String>", "signature": "Set<String> getIdSet(UserId user, GroupId group, SecurityToken token)", "full_signature": "private Set<String> getIdSet(UserId user, GroupId group, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getIdSet(UserId user, GroupId group, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getIdSet", "parameters": "(Set<UserId> users, GroupId group, SecurityToken token)", "modifiers": "public", "return": "Set<String>", "signature": "Set<String> getIdSet(Set<UserId> users, GroupId group, SecurityToken token)", "full_signature": "public Set<String> getIdSet(Set<UserId> users, GroupId group, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getIdSet(Set<UserId> users, GroupId group, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getAlbum", "parameters": "(UserId userId, String appId, Set<String> fields,\n                                String albumId, SecurityToken token)", "modifiers": "public", "return": "Future<Album>", "signature": "Future<Album> getAlbum(UserId userId, String appId, Set<String> fields,\n                                String albumId, SecurityToken token)", "full_signature": "public Future<Album> getAlbum(UserId userId, String appId, Set<String> fields,\n                                String albumId, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getAlbum(UserId userId, String appId, Set<String> fields,\n                                String albumId, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getAlbums", "parameters": "(UserId userId, String appId,\n                                                    Set<String> fields, CollectionOptions options, Set<String> albumIds,\n                                                    SecurityToken token)", "modifiers": "public", "return": "Future<RestfulCollection<Album>>", "signature": "Future<RestfulCollection<Album>> getAlbums(UserId userId, String appId,\n                                                    Set<String> fields, CollectionOptions options, Set<String> albumIds,\n                                                    SecurityToken token)", "full_signature": "public Future<RestfulCollection<Album>> getAlbums(UserId userId, String appId,\n                                                    Set<String> fields, CollectionOptions options, Set<String> albumIds,\n                                                    SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getAlbums(UserId userId, String appId,\n                                                    Set<String> fields, CollectionOptions options, Set<String> albumIds,\n                                                    SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getAlbums", "parameters": "(Set<UserId> userIds,\n                                                    GroupId groupId, String appId, Set<String> fields,\n                                                    CollectionOptions options, SecurityToken token)", "modifiers": "public", "return": "Future<RestfulCollection<Album>>", "signature": "Future<RestfulCollection<Album>> getAlbums(Set<UserId> userIds,\n                                                    GroupId groupId, String appId, Set<String> fields,\n                                                    CollectionOptions options, SecurityToken token)", "full_signature": "public Future<RestfulCollection<Album>> getAlbums(Set<UserId> userIds,\n                                                    GroupId groupId, String appId, Set<String> fields,\n                                                    CollectionOptions options, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getAlbums(Set<UserId> userIds,\n                                                    GroupId groupId, String appId, Set<String> fields,\n                                                    CollectionOptions options, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "deleteAlbum", "parameters": "(UserId userId, String appId, String albumId,\n                                  SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> deleteAlbum(UserId userId, String appId, String albumId,\n                                  SecurityToken token)", "full_signature": "public Future<Void> deleteAlbum(UserId userId, String appId, String albumId,\n                                  SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.deleteAlbum(UserId userId, String appId, String albumId,\n                                  SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "createAlbum", "parameters": "(UserId userId, String appId, Album album,\n                                  SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> createAlbum(UserId userId, String appId, Album album,\n                                  SecurityToken token)", "full_signature": "public Future<Void> createAlbum(UserId userId, String appId, Album album,\n                                  SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.createAlbum(UserId userId, String appId, Album album,\n                                  SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "updateAlbum", "parameters": "(UserId userId, String appId, Album album,\n                                  String albumId, SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> updateAlbum(UserId userId, String appId, Album album,\n                                  String albumId, SecurityToken token)", "full_signature": "public Future<Void> updateAlbum(UserId userId, String appId, Album album,\n                                  String albumId, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.updateAlbum(UserId userId, String appId, Album album,\n                                  String albumId, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getMediaItem", "parameters": "(UserId userId, String appId,\n                                        String albumId, String mediaItemId, Set<String> fields,\n                                        SecurityToken token)", "modifiers": "public", "return": "Future<MediaItem>", "signature": "Future<MediaItem> getMediaItem(UserId userId, String appId,\n                                        String albumId, String mediaItemId, Set<String> fields,\n                                        SecurityToken token)", "full_signature": "public Future<MediaItem> getMediaItem(UserId userId, String appId,\n                                        String albumId, String mediaItemId, Set<String> fields,\n                                        SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getMediaItem(UserId userId, String appId,\n                                        String albumId, String mediaItemId, Set<String> fields,\n                                        SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getMediaItems", "parameters": "(UserId userId,\n                                                            String appId, String albumId, Set<String> mediaItemIds,\n                                                            Set<String> fields, CollectionOptions options, SecurityToken token)", "modifiers": "public", "return": "Future<RestfulCollection<MediaItem>>", "signature": "Future<RestfulCollection<MediaItem>> getMediaItems(UserId userId,\n                                                            String appId, String albumId, Set<String> mediaItemIds,\n                                                            Set<String> fields, CollectionOptions options, SecurityToken token)", "full_signature": "public Future<RestfulCollection<MediaItem>> getMediaItems(UserId userId,\n                                                            String appId, String albumId, Set<String> mediaItemIds,\n                                                            Set<String> fields, CollectionOptions options, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getMediaItems(UserId userId,\n                                                            String appId, String albumId, Set<String> mediaItemIds,\n                                                            Set<String> fields, CollectionOptions options, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getMediaItems", "parameters": "(UserId userId,\n                                                            String appId, String albumId, Set<String> fields,\n                                                            CollectionOptions options, SecurityToken token)", "modifiers": "public", "return": "Future<RestfulCollection<MediaItem>>", "signature": "Future<RestfulCollection<MediaItem>> getMediaItems(UserId userId,\n                                                            String appId, String albumId, Set<String> fields,\n                                                            CollectionOptions options, SecurityToken token)", "full_signature": "public Future<RestfulCollection<MediaItem>> getMediaItems(UserId userId,\n                                                            String appId, String albumId, Set<String> fields,\n                                                            CollectionOptions options, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getMediaItems(UserId userId,\n                                                            String appId, String albumId, Set<String> fields,\n                                                            CollectionOptions options, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getMediaItems", "parameters": "(\n      Set<UserId> userIds, GroupId groupId, String appId,\n      Set<String> fields, CollectionOptions options, SecurityToken token)", "modifiers": "public", "return": "Future<RestfulCollection<MediaItem>>", "signature": "Future<RestfulCollection<MediaItem>> getMediaItems(\n      Set<UserId> userIds, GroupId groupId, String appId,\n      Set<String> fields, CollectionOptions options, SecurityToken token)", "full_signature": "public Future<RestfulCollection<MediaItem>> getMediaItems(\n      Set<UserId> userIds, GroupId groupId, String appId,\n      Set<String> fields, CollectionOptions options, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getMediaItems(\n      Set<UserId> userIds, GroupId groupId, String appId,\n      Set<String> fields, CollectionOptions options, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "deleteMediaItem", "parameters": "(UserId userId, String appId,\n                                      String albumId, String mediaItemId, SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> deleteMediaItem(UserId userId, String appId,\n                                      String albumId, String mediaItemId, SecurityToken token)", "full_signature": "public Future<Void> deleteMediaItem(UserId userId, String appId,\n                                      String albumId, String mediaItemId, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.deleteMediaItem(UserId userId, String appId,\n                                      String albumId, String mediaItemId, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "createMediaItem", "parameters": "(UserId userId, String appId,\n                                      String albumId, MediaItem mediaItem, SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> createMediaItem(UserId userId, String appId,\n                                      String albumId, MediaItem mediaItem, SecurityToken token)", "full_signature": "public Future<Void> createMediaItem(UserId userId, String appId,\n                                      String albumId, MediaItem mediaItem, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.createMediaItem(UserId userId, String appId,\n                                      String albumId, MediaItem mediaItem, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "updateMediaItem", "parameters": "(UserId userId, String appId,\n                                      String albumId, String mediaItemId, MediaItem mediaItem,\n                                      SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> updateMediaItem(UserId userId, String appId,\n                                      String albumId, String mediaItemId, MediaItem mediaItem,\n                                      SecurityToken token)", "full_signature": "public Future<Void> updateMediaItem(UserId userId, String appId,\n                                      String albumId, String mediaItemId, MediaItem mediaItem,\n                                      SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.updateMediaItem(UserId userId, String appId,\n                                      String albumId, String mediaItemId, MediaItem mediaItem,\n                                      SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "updateActivityEntry", "parameters": "(UserId userId, GroupId groupId, String appId,\n        Set<String> fields, ActivityEntry activityEntry, String activityId, SecurityToken token)", "modifiers": "public", "return": "Future<ActivityEntry>", "signature": "Future<ActivityEntry> updateActivityEntry(UserId userId, GroupId groupId, String appId,\n        Set<String> fields, ActivityEntry activityEntry, String activityId, SecurityToken token)", "full_signature": "public Future<ActivityEntry> updateActivityEntry(UserId userId, GroupId groupId, String appId,\n        Set<String> fields, ActivityEntry activityEntry, String activityId, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.updateActivityEntry(UserId userId, GroupId groupId, String appId,\n        Set<String> fields, ActivityEntry activityEntry, String activityId, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "createActivityEntry", "parameters": "(UserId userId, GroupId groupId, String appId,\n        Set<String> fields, ActivityEntry activityEntry, SecurityToken token)", "modifiers": "public", "return": "Future<ActivityEntry>", "signature": "Future<ActivityEntry> createActivityEntry(UserId userId, GroupId groupId, String appId,\n        Set<String> fields, ActivityEntry activityEntry, SecurityToken token)", "full_signature": "public Future<ActivityEntry> createActivityEntry(UserId userId, GroupId groupId, String appId,\n        Set<String> fields, ActivityEntry activityEntry, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.createActivityEntry(UserId userId, GroupId groupId, String appId,\n        Set<String> fields, ActivityEntry activityEntry, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "deleteActivityEntries", "parameters": "(UserId userId, GroupId groupId,\n      String appId, Set<String> activityIds, SecurityToken token)", "modifiers": "public", "return": "Future<Void>", "signature": "Future<Void> deleteActivityEntries(UserId userId, GroupId groupId,\n      String appId, Set<String> activityIds, SecurityToken token)", "full_signature": "public Future<Void> deleteActivityEntries(UserId userId, GroupId groupId,\n      String appId, Set<String> activityIds, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.deleteActivityEntries(UserId userId, GroupId groupId,\n      String appId, Set<String> activityIds, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getActivityEntry", "parameters": "(UserId userId, GroupId groupId,\n      String appId, Set<String> fields, String activityId, SecurityToken token)", "modifiers": "public", "return": "Future<ActivityEntry>", "signature": "Future<ActivityEntry> getActivityEntry(UserId userId, GroupId groupId,\n      String appId, Set<String> fields, String activityId, SecurityToken token)", "full_signature": "public Future<ActivityEntry> getActivityEntry(UserId userId, GroupId groupId,\n      String appId, Set<String> fields, String activityId, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getActivityEntry(UserId userId, GroupId groupId,\n      String appId, Set<String> fields, String activityId, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getActivityEntries", "parameters": "(\n      Set<UserId> userIds, GroupId groupId, String appId, Set<String> fields,\n      CollectionOptions options, SecurityToken token)", "modifiers": "public", "return": "Future<RestfulCollection<ActivityEntry>>", "signature": "Future<RestfulCollection<ActivityEntry>> getActivityEntries(\n      Set<UserId> userIds, GroupId groupId, String appId, Set<String> fields,\n      CollectionOptions options, SecurityToken token)", "full_signature": "public Future<RestfulCollection<ActivityEntry>> getActivityEntries(\n      Set<UserId> userIds, GroupId groupId, String appId, Set<String> fields,\n      CollectionOptions options, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getActivityEntries(\n      Set<UserId> userIds, GroupId groupId, String appId, Set<String> fields,\n      CollectionOptions options, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "getActivityEntries", "parameters": "(\n      UserId userId, GroupId groupId, String appId, Set<String> fields,\n      CollectionOptions options, Set<String> activityIds, SecurityToken token)", "modifiers": "public", "return": "Future<RestfulCollection<ActivityEntry>>", "signature": "Future<RestfulCollection<ActivityEntry>> getActivityEntries(\n      UserId userId, GroupId groupId, String appId, Set<String> fields,\n      CollectionOptions options, Set<String> activityIds, SecurityToken token)", "full_signature": "public Future<RestfulCollection<ActivityEntry>> getActivityEntries(\n      UserId userId, GroupId groupId, String appId, Set<String> fields,\n      CollectionOptions options, Set<String> activityIds, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getActivityEntries(\n      UserId userId, GroupId groupId, String appId, Set<String> fields,\n      CollectionOptions options, Set<String> activityIds, SecurityToken token)", "testcase": false, "constructor": false}, {"identifier": "convertFromActivity", "parameters": "(Activity activity, Set<String> fields)", "modifiers": "private", "return": "JSONObject", "signature": "JSONObject convertFromActivity(Activity activity, Set<String> fields)", "full_signature": "private JSONObject convertFromActivity(Activity activity, Set<String> fields)", "class_method_signature": "JsonDbOpensocialService.convertFromActivity(Activity activity, Set<String> fields)", "testcase": false, "constructor": false}, {"identifier": "convertFromActivityEntry", "parameters": "(ActivityEntry activityEntry, Set<String> fields)", "modifiers": "private", "return": "JSONObject", "signature": "JSONObject convertFromActivityEntry(ActivityEntry activityEntry, Set<String> fields)", "full_signature": "private JSONObject convertFromActivityEntry(ActivityEntry activityEntry, Set<String> fields)", "class_method_signature": "JsonDbOpensocialService.convertFromActivityEntry(ActivityEntry activityEntry, Set<String> fields)", "testcase": false, "constructor": false}, {"identifier": "convertToJson", "parameters": "(Object object)", "modifiers": "private", "return": "JSONObject", "signature": "JSONObject convertToJson(Object object)", "full_signature": "private JSONObject convertToJson(Object object)", "class_method_signature": "JsonDbOpensocialService.convertToJson(Object object)", "testcase": false, "constructor": false}, {"identifier": "filterFields", "parameters": "(JSONObject object, Set<String> fields,\n                            Class<T> clz)", "modifiers": "public", "return": "T", "signature": "T filterFields(JSONObject object, Set<String> fields,\n                            Class<T> clz)", "full_signature": "public T filterFields(JSONObject object, Set<String> fields,\n                            Class<T> clz)", "class_method_signature": "JsonDbOpensocialService.filterFields(JSONObject object, Set<String> fields,\n                            Class<T> clz)", "testcase": false, "constructor": false}], "file": "java/social-api/src/main/java/org/apache/shindig/social/sample/spi/JsonDbOpensocialService.java"}, "focal_method": {"identifier": "getActivityEntries", "parameters": "(\n      Set<UserId> userIds, GroupId groupId, String appId, Set<String> fields,\n      CollectionOptions options, SecurityToken token)", "modifiers": "public", "return": "Future<RestfulCollection<ActivityEntry>>", "body": "public Future<RestfulCollection<ActivityEntry>> getActivityEntries(\n      Set<UserId> userIds, GroupId groupId, String appId, Set<String> fields,\n      CollectionOptions options, SecurityToken token)\n      throws ProtocolException {\n      List<ActivityEntry> result = Lists.newArrayList();\n    try {\n      Set<String> idSet = getIdSet(userIds, groupId, token);\n      for (String id : idSet) {\n        if (db.getJSONObject(ACTIVITYSTREAMS_TABLE).has(id)) {\n          JSONArray activityEntries = db.getJSONObject(ACTIVITYSTREAMS_TABLE).getJSONArray(id);\n          for (int i = 0; i < activityEntries.length(); i++) {\n            JSONObject activityEntry = activityEntries.getJSONObject(i);\n            result.add(filterFields(activityEntry, fields, ActivityEntry.class));\n            // TODO: ActivityStreams don't have appIds\n          }\n        }\n      }\n      Collections.sort(result, Collections.reverseOrder());\n      return Futures.immediateFuture(new RestfulCollection<ActivityEntry>(result));\n    } catch (JSONException je) {\n      throw new ProtocolException(HttpServletResponse.SC_INTERNAL_SERVER_ERROR, je.getMessage(), je);\n    }\n  }", "signature": "Future<RestfulCollection<ActivityEntry>> getActivityEntries(\n      Set<UserId> userIds, GroupId groupId, String appId, Set<String> fields,\n      CollectionOptions options, SecurityToken token)", "full_signature": "public Future<RestfulCollection<ActivityEntry>> getActivityEntries(\n      Set<UserId> userIds, GroupId groupId, String appId, Set<String> fields,\n      CollectionOptions options, SecurityToken token)", "class_method_signature": "JsonDbOpensocialService.getActivityEntries(\n      Set<UserId> userIds, GroupId groupId, String appId, Set<String> fields,\n      CollectionOptions options, SecurityToken token)", "testcase": false, "constructor": false, "invocations": ["newArrayList", "getIdSet", "has", "getJSONObject", "getJSONArray", "getJSONObject", "length", "getJSONObject", "add", "filterFields", "sort", "reverseOrder", "immediateFuture", "getMessage"]}, "repository": {"repo_id": 206633, "url": "https://github.com/apache/shindig", "language": "Java", "is_fork": false, "fork_count": 65, "stargazer_count": 65, "size": 18767, "license": "licensed"}}