{"test_class": {"identifier": "ReportingServiceTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private ReportingService reportingService;", "modifier": "private", "type": "ReportingService", "declarator": "reportingService", "var_name": "reportingService"}], "file": "calvalus-reporting/src/test/java/com/bc/calvalus/reporting/restservice/ws/ReportingServiceTest.java"}, "test_case": {"identifier": "canGetAllJobReportsForUser", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void canGetAllJobReportsForUser() {\n        String userJobStatistics = reportingService.getAllJobReportsForUser(\"user1\");\n        assertThat(userJobStatistics, equalTo(\"[\\n\" +\n                                               \"  {\\n\" +\n                                               \"    \\\"jobId\\\": \\\"job_1484837520075_13157\\\",\\n\" +\n                                               \"    \\\"user\\\": \\\"user1\\\",\\n\" +\n                                               \"    \\\"queue\\\": \\\"test\\\",\\n\" +\n                                               \"    \\\"submitTime\\\": 0,\\n\" +\n                                               \"    \\\"startTime\\\": 1486371600000,\\n\" +\n                                               \"    \\\"finishTime\\\": 1486061314131,\\n\" +\n                                               \"    \\\"state\\\": \\\"SUCCEEDED\\\",\\n\" +\n                                               \"    \\\"jobName\\\": \\\"S3 tar-to-zip 2017-02-02\\\",\\n\" +\n                                               \"    \\\"processType\\\": \\\"tar2zip\\\",\\n\" +\n                                               \"    \\\"inputPath\\\": \\\"hdfs://calvalus:8020/tmp/hadoop-yarn/staging/history/done/2017/02/02/000013/job_1484837520075_13156_conf.xml\\\",\\n\" +\n                                               \"    \\\"mapsCompleted\\\": 1,\\n\" +\n                                               \"    \\\"totalMaps\\\": 1,\\n\" +\n                                               \"    \\\"reducesCompleted\\\": 0,\\n\" +\n                                               \"    \\\"fileBytesRead\\\": 0,\\n\" +\n                                               \"    \\\"inputFileBytesRead\\\": 0,\\n\" +\n                                               \"    \\\"fileSplitBytesRead\\\": 0,\\n\" +\n                                               \"    \\\"fileBytesWritten\\\": 265778,\\n\" +\n                                               \"    \\\"hdfsBytesRead\\\": 703253073,\\n\" +\n                                               \"    \\\"hdfsBytesWritten\\\": 701246583,\\n\" +\n                                               \"    \\\"mbMillisMapTotal\\\": 80919552,\\n\" +\n                                               \"    \\\"mbMillisReduceTotal\\\": 0,\\n\" +\n                                               \"    \\\"vCoresMillisTotal\\\": 79023,\\n\" +\n                                               \"    \\\"cpuMilliseconds\\\": 51550\\n\" +\n                                               \"  },\\n\" +\n                                               \"  {\\n\" +\n                                               \"    \\\"jobId\\\": \\\"job_1484837520075_13158\\\",\\n\" +\n                                               \"    \\\"user\\\": \\\"user1\\\",\\n\" +\n                                               \"    \\\"queue\\\": \\\"test\\\",\\n\" +\n                                               \"    \\\"submitTime\\\": 0,\\n\" +\n                                               \"    \\\"startTime\\\": 1486425600000,\\n\" +\n                                               \"    \\\"finishTime\\\": 1486458000000,\\n\" +\n                                               \"    \\\"state\\\": \\\"SUCCEEDED\\\",\\n\" +\n                                               \"    \\\"jobName\\\": \\\"S3 tar-to-zip 2017-02-02\\\",\\n\" +\n                                               \"    \\\"processType\\\": \\\"tar2zip\\\",\\n\" +\n                                               \"    \\\"inputPath\\\": \\\"hdfs://calvalus:8020/tmp/hadoop-yarn/staging/history/done/2017/02/02/000013/job_1484837520075_13156_conf.xml\\\",\\n\" +\n                                               \"    \\\"mapsCompleted\\\": 1,\\n\" +\n                                               \"    \\\"totalMaps\\\": 1,\\n\" +\n                                               \"    \\\"reducesCompleted\\\": 0,\\n\" +\n                                               \"    \\\"fileBytesRead\\\": 0,\\n\" +\n                                               \"    \\\"inputFileBytesRead\\\": 0,\\n\" +\n                                               \"    \\\"fileSplitBytesRead\\\": 0,\\n\" +\n                                               \"    \\\"fileBytesWritten\\\": 265778,\\n\" +\n                                               \"    \\\"hdfsBytesRead\\\": 703253073,\\n\" +\n                                               \"    \\\"hdfsBytesWritten\\\": 701246583,\\n\" +\n                                               \"    \\\"mbMillisMapTotal\\\": 80919552,\\n\" +\n                                               \"    \\\"mbMillisReduceTotal\\\": 0,\\n\" +\n                                               \"    \\\"vCoresMillisTotal\\\": 79023,\\n\" +\n                                               \"    \\\"cpuMilliseconds\\\": 51550\\n\" +\n                                               \"  }\\n\" +\n                                               \"]\"));\n    }", "signature": "void canGetAllJobReportsForUser()", "full_signature": "@Test public void canGetAllJobReportsForUser()", "class_method_signature": "ReportingServiceTest.canGetAllJobReportsForUser()", "testcase": true, "constructor": false, "invocations": ["getAllJobReportsForUser", "assertThat", "equalTo"]}, "focal_class": {"identifier": "ReportingService", "superclass": "", "interfaces": "", "fields": [{"original_string": "private ReportGenerator reportGenerator;", "modifier": "private", "type": "ReportGenerator", "declarator": "reportGenerator", "var_name": "reportGenerator"}, {"original_string": "private JSONExtractor jsonExtractor;", "modifier": "private", "type": "JSONExtractor", "declarator": "jsonExtractor", "var_name": "jsonExtractor"}], "methods": [{"identifier": "ReportingService", "parameters": "()", "modifiers": "public", "return": "", "signature": " ReportingService()", "full_signature": "public  ReportingService()", "class_method_signature": "ReportingService.ReportingService()", "testcase": false, "constructor": true}, {"identifier": "getSingleJobReport", "parameters": "(@PathParam(\"jobId\") String jobId, @PathParam(\"date\") String date)", "modifiers": "@GET @Path(\"job/{jobId}/{date}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "String", "signature": "String getSingleJobReport(@PathParam(\"jobId\") String jobId, @PathParam(\"date\") String date)", "full_signature": "@GET @Path(\"job/{jobId}/{date}\") @Produces(MediaType.APPLICATION_JSON) public String getSingleJobReport(@PathParam(\"jobId\") String jobId, @PathParam(\"date\") String date)", "class_method_signature": "ReportingService.getSingleJobReport(@PathParam(\"jobId\") String jobId, @PathParam(\"date\") String date)", "testcase": false, "constructor": false}, {"identifier": "getAllJobReportsForUser", "parameters": "(@PathParam(\"user\") String user)", "modifiers": "@GET @Path(\"{user}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "String", "signature": "String getAllJobReportsForUser(@PathParam(\"user\") String user)", "full_signature": "@GET @Path(\"{user}\") @Produces(MediaType.APPLICATION_JSON) public String getAllJobReportsForUser(@PathParam(\"user\") String user)", "class_method_signature": "ReportingService.getAllJobReportsForUser(@PathParam(\"user\") String user)", "testcase": false, "constructor": false}, {"identifier": "getUserAggregatedJobReports", "parameters": "()", "modifiers": "@GET @Path(\"/all/users\") @Produces(MediaType.APPLICATION_JSON) public", "return": "String", "signature": "String getUserAggregatedJobReports()", "full_signature": "@GET @Path(\"/all/users\") @Produces(MediaType.APPLICATION_JSON) public String getUserAggregatedJobReports()", "class_method_signature": "ReportingService.getUserAggregatedJobReports()", "testcase": false, "constructor": false}, {"identifier": "getYearlyJobReportTxt", "parameters": "(@PathParam(\"user\") String user, @PathParam(\"year\") String year)", "modifiers": "@GET @Path(\"{user}/time/{year}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "String", "signature": "String getYearlyJobReportTxt(@PathParam(\"user\") String user, @PathParam(\"year\") String year)", "full_signature": "@GET @Path(\"{user}/time/{year}\") @Produces(MediaType.APPLICATION_JSON) public String getYearlyJobReportTxt(@PathParam(\"user\") String user, @PathParam(\"year\") String year)", "class_method_signature": "ReportingService.getYearlyJobReportTxt(@PathParam(\"user\") String user, @PathParam(\"year\") String year)", "testcase": false, "constructor": false}, {"identifier": "getMonthlyJobReportTxt", "parameters": "(@PathParam(\"user\") String user,\n                                         @PathParam(\"year\") String year,\n                                         @PathParam(\"month\") String month)", "modifiers": "@GET @Path(\"{user}/time/{year}/{month}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "String", "signature": "String getMonthlyJobReportTxt(@PathParam(\"user\") String user,\n                                         @PathParam(\"year\") String year,\n                                         @PathParam(\"month\") String month)", "full_signature": "@GET @Path(\"{user}/time/{year}/{month}\") @Produces(MediaType.APPLICATION_JSON) public String getMonthlyJobReportTxt(@PathParam(\"user\") String user,\n                                         @PathParam(\"year\") String year,\n                                         @PathParam(\"month\") String month)", "class_method_signature": "ReportingService.getMonthlyJobReportTxt(@PathParam(\"user\") String user,\n                                         @PathParam(\"year\") String year,\n                                         @PathParam(\"month\") String month)", "testcase": false, "constructor": false}, {"identifier": "getMonthlyJobReportTxt", "parameters": "(@PathParam(\"user\") String user,\n                                         @PathParam(\"year\") String year,\n                                         @PathParam(\"month\") String month,\n                                         @PathParam(\"day\") String day)", "modifiers": "@GET @Path(\"{user}/time/{year}/{month}/{day}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "String", "signature": "String getMonthlyJobReportTxt(@PathParam(\"user\") String user,\n                                         @PathParam(\"year\") String year,\n                                         @PathParam(\"month\") String month,\n                                         @PathParam(\"day\") String day)", "full_signature": "@GET @Path(\"{user}/time/{year}/{month}/{day}\") @Produces(MediaType.APPLICATION_JSON) public String getMonthlyJobReportTxt(@PathParam(\"user\") String user,\n                                         @PathParam(\"year\") String year,\n                                         @PathParam(\"month\") String month,\n                                         @PathParam(\"day\") String day)", "class_method_signature": "ReportingService.getMonthlyJobReportTxt(@PathParam(\"user\") String user,\n                                         @PathParam(\"year\") String year,\n                                         @PathParam(\"month\") String month,\n                                         @PathParam(\"day\") String day)", "testcase": false, "constructor": false}, {"identifier": "getTimeSpecificJobReportTxt", "parameters": "(@PathParam(\"user\") String user,\n                                              @PathParam(\"date_start\") String start,\n                                              @PathParam(\"date_end\") String end)", "modifiers": "@GET @Path(\"{user}/range/{date_start}/{date_end}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "String", "signature": "String getTimeSpecificJobReportTxt(@PathParam(\"user\") String user,\n                                              @PathParam(\"date_start\") String start,\n                                              @PathParam(\"date_end\") String end)", "full_signature": "@GET @Path(\"{user}/range/{date_start}/{date_end}\") @Produces(MediaType.APPLICATION_JSON) public String getTimeSpecificJobReportTxt(@PathParam(\"user\") String user,\n                                              @PathParam(\"date_start\") String start,\n                                              @PathParam(\"date_end\") String end)", "class_method_signature": "ReportingService.getTimeSpecificJobReportTxt(@PathParam(\"user\") String user,\n                                              @PathParam(\"date_start\") String start,\n                                              @PathParam(\"date_end\") String end)", "testcase": false, "constructor": false}, {"identifier": "getRangeUserBetween", "parameters": "(@PathParam(\"date_start\") String start, @PathParam(\"date_end\") String end)", "modifiers": "@GET @Path(\"/range-user/{date_start}/{date_end}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "String", "signature": "String getRangeUserBetween(@PathParam(\"date_start\") String start, @PathParam(\"date_end\") String end)", "full_signature": "@GET @Path(\"/range-user/{date_start}/{date_end}\") @Produces(MediaType.APPLICATION_JSON) public String getRangeUserBetween(@PathParam(\"date_start\") String start, @PathParam(\"date_end\") String end)", "class_method_signature": "ReportingService.getRangeUserBetween(@PathParam(\"date_start\") String start, @PathParam(\"date_end\") String end)", "testcase": false, "constructor": false}, {"identifier": "getRangeDateBetween", "parameters": "(@PathParam(\"date_start\") String start, @PathParam(\"date_end\") String end)", "modifiers": "@GET @Path(\"/range-date/{date_start}/{date_end}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "String", "signature": "String getRangeDateBetween(@PathParam(\"date_start\") String start, @PathParam(\"date_end\") String end)", "full_signature": "@GET @Path(\"/range-date/{date_start}/{date_end}\") @Produces(MediaType.APPLICATION_JSON) public String getRangeDateBetween(@PathParam(\"date_start\") String start, @PathParam(\"date_end\") String end)", "class_method_signature": "ReportingService.getRangeDateBetween(@PathParam(\"date_start\") String start, @PathParam(\"date_end\") String end)", "testcase": false, "constructor": false}, {"identifier": "getRangeQueueBetween", "parameters": "(@PathParam(\"date_start\") String start, @PathParam(\"date_end\") String end)", "modifiers": "@GET @Path(\"/range-queue/{date_start}/{date_end}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "String", "signature": "String getRangeQueueBetween(@PathParam(\"date_start\") String start, @PathParam(\"date_end\") String end)", "full_signature": "@GET @Path(\"/range-queue/{date_start}/{date_end}\") @Produces(MediaType.APPLICATION_JSON) public String getRangeQueueBetween(@PathParam(\"date_start\") String start, @PathParam(\"date_end\") String end)", "class_method_signature": "ReportingService.getRangeQueueBetween(@PathParam(\"date_start\") String start, @PathParam(\"date_end\") String end)", "testcase": false, "constructor": false}, {"identifier": "getFromDate", "parameters": "(@PathParam(\"date_start\") String startDate)", "modifiers": "@GET @Path(\"/date/{date_start}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "String", "signature": "String getFromDate(@PathParam(\"date_start\") String startDate)", "full_signature": "@GET @Path(\"/date/{date_start}\") @Produces(MediaType.APPLICATION_JSON) public String getFromDate(@PathParam(\"date_start\") String startDate)", "class_method_signature": "ReportingService.getFromDate(@PathParam(\"date_start\") String startDate)", "testcase": false, "constructor": false}, {"identifier": "getErrorResponse", "parameters": "(Exception exception)", "modifiers": "private", "return": "String", "signature": "String getErrorResponse(Exception exception)", "full_signature": "private String getErrorResponse(Exception exception)", "class_method_signature": "ReportingService.getErrorResponse(Exception exception)", "testcase": false, "constructor": false}], "file": "calvalus-reporting/src/main/java/com/bc/calvalus/reporting/restservice/ws/ReportingService.java"}, "focal_method": {"identifier": "getAllJobReportsForUser", "parameters": "(@PathParam(\"user\") String user)", "modifiers": "@GET @Path(\"{user}\") @Produces(MediaType.APPLICATION_JSON) public", "return": "String", "body": "@GET\n    @Path(\"{user}\")\n    @Produces(MediaType.APPLICATION_JSON)\n    public String getAllJobReportsForUser(@PathParam(\"user\") String user) {\n        try {\n            // TODO(hans-permana, 20180111): get user usage statistics should not require a hard-coded date\n            List<UsageStatistic> singleUserStatistics = jsonExtractor.getSingleUserStatistic(user, \"2017-01-20\");\n            Gson gson = new GsonBuilder().setPrettyPrinting().create();\n            return gson.toJson(singleUserStatistics);\n        } catch (IOException | DatabaseFileNotFoundException exception) {\n            return getErrorResponse(exception);\n        }\n    }", "signature": "String getAllJobReportsForUser(@PathParam(\"user\") String user)", "full_signature": "@GET @Path(\"{user}\") @Produces(MediaType.APPLICATION_JSON) public String getAllJobReportsForUser(@PathParam(\"user\") String user)", "class_method_signature": "ReportingService.getAllJobReportsForUser(@PathParam(\"user\") String user)", "testcase": false, "constructor": false, "invocations": ["getSingleUserStatistic", "create", "setPrettyPrinting", "toJson", "getErrorResponse"]}, "repository": {"repo_id": 542927, "url": "https://github.com/bcdev/calvalus2", "language": "Java", "is_fork": false, "fork_count": 4, "stargazer_count": 12, "size": 126408, "license": "licensed"}}