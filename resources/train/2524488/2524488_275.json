{"test_class": {"identifier": "HadoopCredentialProviderTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Configuration hadoopConf = new Configuration();", "modifier": "private static final", "type": "Configuration", "declarator": "hadoopConf = new Configuration()", "var_name": "hadoopConf"}, {"original_string": "private static final Logger log = LoggerFactory.getLogger(HadoopCredentialProviderTest.class);", "modifier": "private static final", "type": "Logger", "declarator": "log = LoggerFactory.getLogger(HadoopCredentialProviderTest.class)", "var_name": "log"}, {"original_string": "private static final String populatedKeyStoreName = \"/accumulo.jceks\",\n      emptyKeyStoreName = \"/empty.jceks\";", "modifier": "private static final", "type": "String", "declarator": "populatedKeyStoreName = \"/accumulo.jceks\"", "var_name": "populatedKeyStoreName"}, {"original_string": "private static File emptyKeyStore, populatedKeyStore;", "modifier": "private static", "type": "File", "declarator": "emptyKeyStore", "var_name": "emptyKeyStore"}], "file": "core/src/test/java/org/apache/accumulo/core/conf/HadoopCredentialProviderTest.java"}, "test_case": {"identifier": "testNullConfigOnGetValue", "parameters": "()", "modifiers": "@Test(expected = NullPointerException.class) public", "return": "void", "body": "@Test(expected = NullPointerException.class)\n  public void testNullConfigOnGetValue() {\n    HadoopCredentialProvider.getValue(null, \"alias\");\n  }", "signature": "void testNullConfigOnGetValue()", "full_signature": "@Test(expected = NullPointerException.class) public void testNullConfigOnGetValue()", "class_method_signature": "HadoopCredentialProviderTest.testNullConfigOnGetValue()", "testcase": true, "constructor": false, "invocations": ["getValue"]}, "focal_class": {"identifier": "HadoopCredentialProvider", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger log = LoggerFactory.getLogger(HadoopCredentialProvider.class);", "modifier": "private static final", "type": "Logger", "declarator": "log = LoggerFactory.getLogger(HadoopCredentialProvider.class)", "var_name": "log"}, {"original_string": "private static final String CREDENTIAL_PROVIDER_PATH = \"hadoop.security.credential.provider.path\";", "modifier": "private static final", "type": "String", "declarator": "CREDENTIAL_PROVIDER_PATH = \"hadoop.security.credential.provider.path\"", "var_name": "CREDENTIAL_PROVIDER_PATH"}, {"original_string": "private static final ConcurrentHashMap<String,List<CredentialProvider>> cachedProviders =\n      new ConcurrentHashMap<>();", "modifier": "private static final", "type": "ConcurrentHashMap<String,List<CredentialProvider>>", "declarator": "cachedProviders =\n      new ConcurrentHashMap<>()", "var_name": "cachedProviders"}], "methods": [{"identifier": "setPath", "parameters": "(Configuration conf, String path)", "modifiers": "public static", "return": "void", "signature": "void setPath(Configuration conf, String path)", "full_signature": "public static void setPath(Configuration conf, String path)", "class_method_signature": "HadoopCredentialProvider.setPath(Configuration conf, String path)", "testcase": false, "constructor": false}, {"identifier": "getProviders", "parameters": "(Configuration conf)", "modifiers": "private static", "return": "List<CredentialProvider>", "signature": "List<CredentialProvider> getProviders(Configuration conf)", "full_signature": "private static List<CredentialProvider> getProviders(Configuration conf)", "class_method_signature": "HadoopCredentialProvider.getProviders(Configuration conf)", "testcase": false, "constructor": false}, {"identifier": "getValue", "parameters": "(Configuration conf, String alias)", "modifiers": "public static", "return": "char[]", "signature": "char[] getValue(Configuration conf, String alias)", "full_signature": "public static char[] getValue(Configuration conf, String alias)", "class_method_signature": "HadoopCredentialProvider.getValue(Configuration conf, String alias)", "testcase": false, "constructor": false}, {"identifier": "getKeys", "parameters": "(Configuration conf)", "modifiers": "public static", "return": "List<String>", "signature": "List<String> getKeys(Configuration conf)", "full_signature": "public static List<String> getKeys(Configuration conf)", "class_method_signature": "HadoopCredentialProvider.getKeys(Configuration conf)", "testcase": false, "constructor": false}, {"identifier": "createEntry", "parameters": "(Configuration conf, String name, char[] credential)", "modifiers": "public static", "return": "void", "signature": "void createEntry(Configuration conf, String name, char[] credential)", "full_signature": "public static void createEntry(Configuration conf, String name, char[] credential)", "class_method_signature": "HadoopCredentialProvider.createEntry(Configuration conf, String name, char[] credential)", "testcase": false, "constructor": false}], "file": "core/src/main/java/org/apache/accumulo/core/conf/HadoopCredentialProvider.java"}, "focal_method": {"identifier": "getValue", "parameters": "(Configuration conf, String alias)", "modifiers": "public static", "return": "char[]", "body": "public static char[] getValue(Configuration conf, String alias) {\n    requireNonNull(alias);\n    List<CredentialProvider> providerList = getProviders(requireNonNull(conf));\n    return providerList == null ? null : providerList.stream().map(provider -> {\n      try {\n        return provider.getCredentialEntry(alias);\n      } catch (IOException e) {\n        log.warn(\"Failed to call getCredentialEntry(alias) for provider {}\", provider, e);\n        return null;\n      }\n    }).filter(Objects::nonNull).map(CredentialProvider.CredentialEntry::getCredential).findFirst()\n        .orElseGet(() -> {\n          // If we didn't find it, this isn't an error, it just wasn't set in the CredentialProvider\n          log.trace(\"Could not extract credential for {} from providers\", alias);\n          return null;\n        });\n  }", "signature": "char[] getValue(Configuration conf, String alias)", "full_signature": "public static char[] getValue(Configuration conf, String alias)", "class_method_signature": "HadoopCredentialProvider.getValue(Configuration conf, String alias)", "testcase": false, "constructor": false, "invocations": ["requireNonNull", "getProviders", "requireNonNull", "orElseGet", "findFirst", "map", "filter", "map", "stream", "getCredentialEntry", "warn", "trace"]}, "repository": {"repo_id": 2524488, "url": "https://github.com/apache/accumulo", "stars": 779, "created": "10/6/2011 7:00:09 AM +00:00", "updates": "2020-01-24T17:34:30+00:00", "fork": "False", "license": "licensed"}}