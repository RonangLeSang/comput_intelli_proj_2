{"test_class": {"identifier": "DefaultSoyMsgBundleResolverTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "@InjectMocks\n    private DefaultSoyMsgBundleResolver defaultSoyMsgBundleResolver = new DefaultSoyMsgBundleResolver();", "modifier": "@InjectMocks\n    private", "type": "DefaultSoyMsgBundleResolver", "declarator": "defaultSoyMsgBundleResolver = new DefaultSoyMsgBundleResolver()", "var_name": "defaultSoyMsgBundleResolver"}], "file": "spring-soy-view/src/test/java/pl/matisoft/soy/bundle/DefaultSoyMsgBundleResolverTest.java"}, "test_case": {"identifier": "resolveWithNoLocale", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void resolveWithNoLocale() throws Exception {\n        Assert.assertFalse(\"value should be absent\", defaultSoyMsgBundleResolver.resolve(Optional.<Locale>absent()).isPresent());\n    }", "signature": "void resolveWithNoLocale()", "full_signature": "@Test public void resolveWithNoLocale()", "class_method_signature": "DefaultSoyMsgBundleResolverTest.resolveWithNoLocale()", "testcase": true, "constructor": false, "invocations": ["assertFalse", "isPresent", "resolve", "absent"]}, "focal_class": {"identifier": "DefaultSoyMsgBundleResolver", "superclass": "", "interfaces": "implements SoyMsgBundleResolver", "fields": [{"original_string": "private static final Logger logger = LoggerFactory.getLogger(DefaultSoyMsgBundleResolver.class);", "modifier": "private static final", "type": "Logger", "declarator": "logger = LoggerFactory.getLogger(DefaultSoyMsgBundleResolver.class)", "var_name": "logger"}, {"original_string": "Map<Locale, SoyMsgBundle> msgBundles = new ConcurrentHashMap<Locale, SoyMsgBundle>();", "modifier": "", "type": "Map<Locale, SoyMsgBundle>", "declarator": "msgBundles = new ConcurrentHashMap<Locale, SoyMsgBundle>()", "var_name": "msgBundles"}, {"original_string": "private String messagesPath = SoyViewConfigDefaults.DEF_MESSAGES_PATH;", "modifier": "private", "type": "String", "declarator": "messagesPath = SoyViewConfigDefaults.DEF_MESSAGES_PATH", "var_name": "messagesPath"}, {"original_string": "private boolean hotReloadMode = SoyViewConfigDefaults.DEFAULT_HOT_RELOAD_MODE;", "modifier": "private", "type": "boolean", "declarator": "hotReloadMode = SoyViewConfigDefaults.DEFAULT_HOT_RELOAD_MODE", "var_name": "hotReloadMode"}, {"original_string": "private boolean fallbackToEnglish = true;", "modifier": "private", "type": "boolean", "declarator": "fallbackToEnglish = true", "var_name": "fallbackToEnglish"}], "methods": [{"identifier": "resolve", "parameters": "(final Optional<Locale> locale)", "modifiers": "public", "return": "Optional<SoyMsgBundle>", "signature": "Optional<SoyMsgBundle> resolve(final Optional<Locale> locale)", "full_signature": "public Optional<SoyMsgBundle> resolve(final Optional<Locale> locale)", "class_method_signature": "DefaultSoyMsgBundleResolver.resolve(final Optional<Locale> locale)", "testcase": false, "constructor": false}, {"identifier": "createSoyMsgBundle", "parameters": "(final Locale locale)", "modifiers": "protected", "return": "SoyMsgBundle", "signature": "SoyMsgBundle createSoyMsgBundle(final Locale locale)", "full_signature": "protected SoyMsgBundle createSoyMsgBundle(final Locale locale)", "class_method_signature": "DefaultSoyMsgBundleResolver.createSoyMsgBundle(final Locale locale)", "testcase": false, "constructor": false}, {"identifier": "mergeMsgBundles", "parameters": "(final Locale locale, final List<SoyMsgBundle> soyMsgBundles)", "modifiers": "private", "return": "Optional<? extends SoyMsgBundle>", "signature": "Optional<? extends SoyMsgBundle> mergeMsgBundles(final Locale locale, final List<SoyMsgBundle> soyMsgBundles)", "full_signature": "private Optional<? extends SoyMsgBundle> mergeMsgBundles(final Locale locale, final List<SoyMsgBundle> soyMsgBundles)", "class_method_signature": "DefaultSoyMsgBundleResolver.mergeMsgBundles(final Locale locale, final List<SoyMsgBundle> soyMsgBundles)", "testcase": false, "constructor": false}, {"identifier": "setMessagesPath", "parameters": "(final String messagesPath)", "modifiers": "public", "return": "void", "signature": "void setMessagesPath(final String messagesPath)", "full_signature": "public void setMessagesPath(final String messagesPath)", "class_method_signature": "DefaultSoyMsgBundleResolver.setMessagesPath(final String messagesPath)", "testcase": false, "constructor": false}, {"identifier": "setHotReloadMode", "parameters": "(final boolean hotReloadMode)", "modifiers": "public", "return": "void", "signature": "void setHotReloadMode(final boolean hotReloadMode)", "full_signature": "public void setHotReloadMode(final boolean hotReloadMode)", "class_method_signature": "DefaultSoyMsgBundleResolver.setHotReloadMode(final boolean hotReloadMode)", "testcase": false, "constructor": false}, {"identifier": "setFallbackToEnglish", "parameters": "(boolean fallbackToEnglish)", "modifiers": "public", "return": "void", "signature": "void setFallbackToEnglish(boolean fallbackToEnglish)", "full_signature": "public void setFallbackToEnglish(boolean fallbackToEnglish)", "class_method_signature": "DefaultSoyMsgBundleResolver.setFallbackToEnglish(boolean fallbackToEnglish)", "testcase": false, "constructor": false}, {"identifier": "getMessagesPath", "parameters": "()", "modifiers": "public", "return": "String", "signature": "String getMessagesPath()", "full_signature": "public String getMessagesPath()", "class_method_signature": "DefaultSoyMsgBundleResolver.getMessagesPath()", "testcase": false, "constructor": false}, {"identifier": "isHotReloadMode", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isHotReloadMode()", "full_signature": "public boolean isHotReloadMode()", "class_method_signature": "DefaultSoyMsgBundleResolver.isHotReloadMode()", "testcase": false, "constructor": false}, {"identifier": "isHotReloadModeOff", "parameters": "()", "modifiers": "private", "return": "boolean", "signature": "boolean isHotReloadModeOff()", "full_signature": "private boolean isHotReloadModeOff()", "class_method_signature": "DefaultSoyMsgBundleResolver.isHotReloadModeOff()", "testcase": false, "constructor": false}, {"identifier": "isFallbackToEnglish", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean isFallbackToEnglish()", "full_signature": "public boolean isFallbackToEnglish()", "class_method_signature": "DefaultSoyMsgBundleResolver.isFallbackToEnglish()", "testcase": false, "constructor": false}], "file": "spring-soy-view/src/main/java/pl/matisoft/soy/bundle/DefaultSoyMsgBundleResolver.java"}, "focal_method": {"identifier": "resolve", "parameters": "(final Optional<Locale> locale)", "modifiers": "public", "return": "Optional<SoyMsgBundle>", "body": "public Optional<SoyMsgBundle> resolve(final Optional<Locale> locale) throws IOException {\n        if (!locale.isPresent()) {\n            return Optional.absent();\n        }\n\n        synchronized (msgBundles) {\n            SoyMsgBundle soyMsgBundle = null;\n            if (isHotReloadModeOff()) {\n                soyMsgBundle = msgBundles.get(locale.get());\n            }\n            if (soyMsgBundle == null) {\n                soyMsgBundle = createSoyMsgBundle(locale.get());\n                if (soyMsgBundle == null) {\n                    soyMsgBundle = createSoyMsgBundle(new Locale(locale.get().getLanguage()));\n                }\n\n                if (soyMsgBundle == null && fallbackToEnglish) {\n                    soyMsgBundle = createSoyMsgBundle(Locale.ENGLISH);\n                }\n\n                if (soyMsgBundle == null) {\n                    return Optional.absent();\n                }\n\n                if (isHotReloadModeOff()) {\n                    msgBundles.put(locale.get(), soyMsgBundle);\n                }\n            }\n\n            return Optional.fromNullable(soyMsgBundle);\n        }\n    }", "signature": "Optional<SoyMsgBundle> resolve(final Optional<Locale> locale)", "full_signature": "public Optional<SoyMsgBundle> resolve(final Optional<Locale> locale)", "class_method_signature": "DefaultSoyMsgBundleResolver.resolve(final Optional<Locale> locale)", "testcase": false, "constructor": false, "invocations": ["isPresent", "absent", "isHotReloadModeOff", "get", "get", "createSoyMsgBundle", "get", "createSoyMsgBundle", "getLanguage", "get", "createSoyMsgBundle", "absent", "isHotReloadModeOff", "put", "get", "fromNullable"]}, "repository": {"repo_id": 10806441, "url": "https://github.com/matiwinnetou/spring-soy-view", "language": "Java", "is_fork": false, "fork_count": 10, "stargazer_count": 17, "size": 2147, "license": "licensed"}}