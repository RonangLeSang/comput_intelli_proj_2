{"test_class": {"identifier": "HasherNodeTest", "superclass": "extends MessagingBaseTest", "interfaces": "", "fields": [{"original_string": "private static final String TEST_ADDRESS_REQUEST = \"test_request\";", "modifier": "private static final", "type": "String", "declarator": "TEST_ADDRESS_REQUEST = \"test_request\"", "var_name": "TEST_ADDRESS_REQUEST"}, {"original_string": "private static final String TEST_ADDRESS_RESULT = \"test_result\";", "modifier": "private static final", "type": "String", "declarator": "TEST_ADDRESS_RESULT = \"test_result\"", "var_name": "TEST_ADDRESS_RESULT"}, {"original_string": "private static final long TEST_HASH = 42L;", "modifier": "private static final", "type": "long", "declarator": "TEST_HASH = 42L", "var_name": "TEST_HASH"}, {"original_string": "private static final byte[] TEST_DATA = { 12, 13, 14, 15, 16 };", "modifier": "private static final", "type": "byte[]", "declarator": "TEST_DATA = { 12, 13, 14, 15, 16 }", "var_name": "TEST_DATA"}, {"original_string": "private static final UUID TEST_UUID = new UUID(12, 42);", "modifier": "private static final", "type": "UUID", "declarator": "TEST_UUID = new UUID(12, 42)", "var_name": "TEST_UUID"}, {"original_string": "private static final long WORKER_NUMBER = 10L;", "modifier": "private static final", "type": "long", "declarator": "WORKER_NUMBER = 10L", "var_name": "WORKER_NUMBER"}, {"original_string": "private static final int LARGE_DATA_SIZE = 5000;", "modifier": "private static final", "type": "int", "declarator": "LARGE_DATA_SIZE = 5000", "var_name": "LARGE_DATA_SIZE"}, {"original_string": "@Mock\n\tprivate ImagePHash hasher;", "modifier": "@Mock\n\tprivate", "type": "ImagePHash", "declarator": "hasher", "var_name": "hasher"}, {"original_string": "private HasherNode cut;", "modifier": "private", "type": "HasherNode", "declarator": "cut", "var_name": "cut"}, {"original_string": "private MessageFactory messageFactory;", "modifier": "private", "type": "MessageFactory", "declarator": "messageFactory", "var_name": "messageFactory"}, {"original_string": "private MetricRegistry metrics;", "modifier": "private", "type": "MetricRegistry", "declarator": "metrics", "var_name": "metrics"}, {"original_string": "private ClientMessage hashRequestMessage;", "modifier": "private", "type": "ClientMessage", "declarator": "hashRequestMessage", "var_name": "hashRequestMessage"}, {"original_string": "private ClientConsumer consumer;", "modifier": "private", "type": "ClientConsumer", "declarator": "consumer", "var_name": "consumer"}, {"original_string": "private ClientProducer producer;", "modifier": "private", "type": "ClientProducer", "declarator": "producer", "var_name": "producer"}, {"original_string": "private List<ClientMessage> messages;", "modifier": "private", "type": "List<ClientMessage>", "declarator": "messages", "var_name": "messages"}], "file": "distributed/src/test/java/com/github/dozedoff/similarImage/messaging/HasherNodeTest.java"}, "test_case": {"identifier": "testStop", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n\tpublic void testStop() throws Exception {\n\t\tcut.stop();\n\n\t\tassertThat(session.isClosed(), is(true));\n\t}", "signature": "void testStop()", "full_signature": "@Test public void testStop()", "class_method_signature": "HasherNodeTest.testStop()", "testcase": true, "constructor": false, "invocations": ["stop", "assertThat", "isClosed", "is"]}, "focal_class": {"identifier": "HasherNode", "superclass": "", "interfaces": "implements MessageHandler, Node", "fields": [{"original_string": "private static final Logger LOGGER = LoggerFactory.getLogger(HasherNode.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOGGER = LoggerFactory.getLogger(HasherNode.class)", "var_name": "LOGGER"}, {"original_string": "private static final int INITIAL_BUFFER_SIZE = 4096;", "modifier": "private static final", "type": "int", "declarator": "INITIAL_BUFFER_SIZE = 4096", "var_name": "INITIAL_BUFFER_SIZE"}, {"original_string": "private final ClientConsumer consumer;", "modifier": "private final", "type": "ClientConsumer", "declarator": "consumer", "var_name": "consumer"}, {"original_string": "private final ClientProducer producer;", "modifier": "private final", "type": "ClientProducer", "declarator": "producer", "var_name": "producer"}, {"original_string": "private final ClientSession session;", "modifier": "private final", "type": "ClientSession", "declarator": "session", "var_name": "session"}, {"original_string": "private final ImagePHash hasher;", "modifier": "private final", "type": "ImagePHash", "declarator": "hasher", "var_name": "hasher"}, {"original_string": "private ByteBuffer buffer;", "modifier": "private", "type": "ByteBuffer", "declarator": "buffer", "var_name": "buffer"}, {"original_string": "private MessageFactory messageFactory;", "modifier": "private", "type": "MessageFactory", "declarator": "messageFactory", "var_name": "messageFactory"}, {"original_string": "private final UUID identity;", "modifier": "private final", "type": "UUID", "declarator": "identity", "var_name": "identity"}, {"original_string": "private final Meter hashRequests;", "modifier": "private final", "type": "Meter", "declarator": "hashRequests", "var_name": "hashRequests"}, {"original_string": "private final Timer hashDuration;", "modifier": "private final", "type": "Timer", "declarator": "hashDuration", "var_name": "hashDuration"}, {"original_string": "private final Meter bufferResize;", "modifier": "private final", "type": "Meter", "declarator": "bufferResize", "var_name": "bufferResize"}, {"original_string": "private static final String NAME_HASH = \"hash\";", "modifier": "private static final", "type": "String", "declarator": "NAME_HASH = \"hash\"", "var_name": "NAME_HASH"}, {"original_string": "public static final String METRIC_NAME_HASH_MESSAGES = MetricRegistry.name(HasherNode.class, NAME_HASH, \"messages\");", "modifier": "public static final", "type": "String", "declarator": "METRIC_NAME_HASH_MESSAGES = MetricRegistry.name(HasherNode.class, NAME_HASH, \"messages\")", "var_name": "METRIC_NAME_HASH_MESSAGES"}, {"original_string": "public static final String METRIC_NAME_HASH_DURATION = MetricRegistry.name(HasherNode.class, NAME_HASH, \"duration\");", "modifier": "public static final", "type": "String", "declarator": "METRIC_NAME_HASH_DURATION = MetricRegistry.name(HasherNode.class, NAME_HASH, \"duration\")", "var_name": "METRIC_NAME_HASH_DURATION"}, {"original_string": "public static final String METRIC_NAME_BUFFER_RESIZE = MetricRegistry.name(HasherNode.class, \"buffer\", \"resize\");", "modifier": "public static final", "type": "String", "declarator": "METRIC_NAME_BUFFER_RESIZE = MetricRegistry.name(HasherNode.class, \"buffer\", \"resize\")", "var_name": "METRIC_NAME_BUFFER_RESIZE"}], "methods": [{"identifier": "HasherNode", "parameters": "(ClientSession session, ImagePHash hasher, String requestAddress, String resultAddress,\n\t\t\tMetricRegistry metrics)", "modifiers": "public", "return": "", "signature": " HasherNode(ClientSession session, ImagePHash hasher, String requestAddress, String resultAddress,\n\t\t\tMetricRegistry metrics)", "full_signature": "public  HasherNode(ClientSession session, ImagePHash hasher, String requestAddress, String resultAddress,\n\t\t\tMetricRegistry metrics)", "class_method_signature": "HasherNode.HasherNode(ClientSession session, ImagePHash hasher, String requestAddress, String resultAddress,\n\t\t\tMetricRegistry metrics)", "testcase": false, "constructor": true}, {"identifier": "setMessageFactory", "parameters": "(MessageFactory messageFactory)", "modifiers": "protected final", "return": "void", "signature": "void setMessageFactory(MessageFactory messageFactory)", "full_signature": "protected final void setMessageFactory(MessageFactory messageFactory)", "class_method_signature": "HasherNode.setMessageFactory(MessageFactory messageFactory)", "testcase": false, "constructor": false}, {"identifier": "stop", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void stop()", "full_signature": "@Override public void stop()", "class_method_signature": "HasherNode.stop()", "testcase": false, "constructor": false}, {"identifier": "toString", "parameters": "()", "modifiers": "@Override public", "return": "String", "signature": "String toString()", "full_signature": "@Override public String toString()", "class_method_signature": "HasherNode.toString()", "testcase": false, "constructor": false}, {"identifier": "onMessage", "parameters": "(ClientMessage message)", "modifiers": "@Override public", "return": "void", "signature": "void onMessage(ClientMessage message)", "full_signature": "@Override public void onMessage(ClientMessage message)", "class_method_signature": "HasherNode.onMessage(ClientMessage message)", "testcase": false, "constructor": false}, {"identifier": "checkBufferCapacity", "parameters": "(int messageSize)", "modifiers": "private", "return": "void", "signature": "void checkBufferCapacity(int messageSize)", "full_signature": "private void checkBufferCapacity(int messageSize)", "class_method_signature": "HasherNode.checkBufferCapacity(int messageSize)", "testcase": false, "constructor": false}, {"identifier": "doHash", "parameters": "(BufferedImage image)", "modifiers": "private", "return": "long", "signature": "long doHash(BufferedImage image)", "full_signature": "private long doHash(BufferedImage image)", "class_method_signature": "HasherNode.doHash(BufferedImage image)", "testcase": false, "constructor": false}], "file": "distributed/src/main/java/com/github/dozedoff/similarImage/messaging/HasherNode.java"}, "focal_method": {"identifier": "stop", "parameters": "()", "modifiers": "@Override public", "return": "void", "body": "@Override\n\tpublic void stop() {\n\t\tLOGGER.info(\"Stopping {}...\", this.toString());\n\t\tMessagingUtil.silentClose(consumer);\n\t\tMessagingUtil.silentClose(producer);\n\t\tMessagingUtil.silentClose(session);\n\t}", "signature": "void stop()", "full_signature": "@Override public void stop()", "class_method_signature": "HasherNode.stop()", "testcase": false, "constructor": false, "invocations": ["info", "toString", "silentClose", "silentClose", "silentClose"]}, "repository": {"repo_id": 9713275, "url": "https://github.com/seeker/similarImage", "language": "Java", "is_fork": false, "fork_count": 9, "stargazer_count": 15, "size": 3845, "license": "licensed"}}