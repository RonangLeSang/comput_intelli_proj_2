{"test_class": {"identifier": "TransactionOperationFinalizerTest", "superclass": "extends AbstractCollectionTestSupport", "interfaces": "", "fields": [], "file": "collection-plugins/spring-tx/src/test/java/com/springsource/insight/plugin/springtx/TransactionOperationFinalizerTest.java"}, "test_case": {"identifier": "normalizeIsolation", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void normalizeIsolation() {\n        for (Map.Entry<Integer, String> ie : TransactionOperationFinalizer.isolationLevels.entrySet()) {\n            Integer value = ie.getKey();\n            String expected = ie.getValue(),\n                    actual = TransactionOperationFinalizer.normalizeIsolation(new Operation().put(\"isolation\", value.intValue()));\n            assertEquals(\"Mismatched values for value=\" + value, expected, actual);\n        }\n    }", "signature": "void normalizeIsolation()", "full_signature": "@Test public void normalizeIsolation()", "class_method_signature": "TransactionOperationFinalizerTest.normalizeIsolation()", "testcase": true, "constructor": false, "invocations": ["entrySet", "getKey", "getValue", "normalizeIsolation", "put", "intValue", "assertEquals"]}, "focal_class": {"identifier": "TransactionOperationFinalizer", "superclass": "", "interfaces": "implements OperationFinalizer", "fields": [{"original_string": "private static final TransactionOperationFinalizer INSTANCE = new TransactionOperationFinalizer();", "modifier": "private static final", "type": "TransactionOperationFinalizer", "declarator": "INSTANCE = new TransactionOperationFinalizer()", "var_name": "INSTANCE"}, {"original_string": "static final int MAX_TX_NAME_LEN = 30;", "modifier": "static final", "type": "int", "declarator": "MAX_TX_NAME_LEN = 30", "var_name": "MAX_TX_NAME_LEN"}, {"original_string": "static final List<String> propagationNames =\n            Collections.unmodifiableList(\n                    Arrays.asList(\"REQUIRED\", \"SUPPORTS\", \"MANDATORY\",\n                            \"REQUIRES_NEW\", \"NOT_SUPPORTED\", \"NEVER\",\n                            \"NESTED\"));", "modifier": "static final", "type": "List<String>", "declarator": "propagationNames =\n            Collections.unmodifiableList(\n                    Arrays.asList(\"REQUIRED\", \"SUPPORTS\", \"MANDATORY\",\n                            \"REQUIRES_NEW\", \"NOT_SUPPORTED\", \"NEVER\",\n                            \"NESTED\"))", "var_name": "propagationNames"}, {"original_string": "static final String DEFAULT_ISOLATION_LEVEL = \"DEFAULT\";", "modifier": "static final", "type": "String", "declarator": "DEFAULT_ISOLATION_LEVEL = \"DEFAULT\"", "var_name": "DEFAULT_ISOLATION_LEVEL"}, {"original_string": "static final Map<Integer, String> isolationLevels =\n            Collections.unmodifiableMap(new HashMap<Integer, String>() {\n                private static final long serialVersionUID = 1L;\n\n                {\n                    put(Integer.valueOf(Connection.TRANSACTION_NONE), DEFAULT_ISOLATION_LEVEL);\n                    put(Integer.valueOf(Connection.TRANSACTION_READ_COMMITTED), \"READ_COMMITTED\");\n                    put(Integer.valueOf(Connection.TRANSACTION_READ_UNCOMMITTED), \"READ_UNCOMMITTED\");\n                    put(Integer.valueOf(Connection.TRANSACTION_REPEATABLE_READ), \"REPEATABLE_READ\");\n                    put(Integer.valueOf(Connection.TRANSACTION_SERIALIZABLE), \"SERIALIZABLE\");\n                }\n            });", "modifier": "static final", "type": "Map<Integer, String>", "declarator": "isolationLevels =\n            Collections.unmodifiableMap(new HashMap<Integer, String>() {\n                private static final long serialVersionUID = 1L;\n\n                {\n                    put(Integer.valueOf(Connection.TRANSACTION_NONE), DEFAULT_ISOLATION_LEVEL);\n                    put(Integer.valueOf(Connection.TRANSACTION_READ_COMMITTED), \"READ_COMMITTED\");\n                    put(Integer.valueOf(Connection.TRANSACTION_READ_UNCOMMITTED), \"READ_UNCOMMITTED\");\n                    put(Integer.valueOf(Connection.TRANSACTION_REPEATABLE_READ), \"REPEATABLE_READ\");\n                    put(Integer.valueOf(Connection.TRANSACTION_SERIALIZABLE), \"SERIALIZABLE\");\n                }\n            })", "var_name": "isolationLevels"}], "methods": [{"identifier": "register", "parameters": "(Operation operation)", "modifiers": "public static", "return": "void", "signature": "void register(Operation operation)", "full_signature": "public static void register(Operation operation)", "class_method_signature": "TransactionOperationFinalizer.register(Operation operation)", "testcase": false, "constructor": false}, {"identifier": "finalize", "parameters": "(Operation operation, Map<String, Object> richObjects)", "modifiers": "public", "return": "void", "signature": "void finalize(Operation operation, Map<String, Object> richObjects)", "full_signature": "public void finalize(Operation operation, Map<String, Object> richObjects)", "class_method_signature": "TransactionOperationFinalizer.finalize(Operation operation, Map<String, Object> richObjects)", "testcase": false, "constructor": false}, {"identifier": "normalizeIsolation", "parameters": "(Operation operation)", "modifiers": "static", "return": "String", "signature": "String normalizeIsolation(Operation operation)", "full_signature": "static String normalizeIsolation(Operation operation)", "class_method_signature": "TransactionOperationFinalizer.normalizeIsolation(Operation operation)", "testcase": false, "constructor": false}, {"identifier": "normalizePropagation", "parameters": "(Operation operation)", "modifiers": "static", "return": "String", "signature": "String normalizePropagation(Operation operation)", "full_signature": "static String normalizePropagation(Operation operation)", "class_method_signature": "TransactionOperationFinalizer.normalizePropagation(Operation operation)", "testcase": false, "constructor": false}, {"identifier": "buildLabel", "parameters": "(Operation operation)", "modifiers": "static", "return": "String", "signature": "String buildLabel(Operation operation)", "full_signature": "static String buildLabel(Operation operation)", "class_method_signature": "TransactionOperationFinalizer.buildLabel(Operation operation)", "testcase": false, "constructor": false}, {"identifier": "truncateTxName", "parameters": "(String txName, int maxChars)", "modifiers": "static", "return": "String", "signature": "String truncateTxName(String txName, int maxChars)", "full_signature": "static String truncateTxName(String txName, int maxChars)", "class_method_signature": "TransactionOperationFinalizer.truncateTxName(String txName, int maxChars)", "testcase": false, "constructor": false}], "file": "collection-plugins/spring-tx/src/main/java/com/springsource/insight/plugin/springtx/TransactionOperationFinalizer.java"}, "focal_method": {"identifier": "normalizeIsolation", "parameters": "(Operation operation)", "modifiers": "static", "return": "String", "body": "static String normalizeIsolation(Operation operation) {\n        int isolation = operation.getInt(\"isolation\", (-1));\n        if (isolation < 0) {\n            return DEFAULT_ISOLATION_LEVEL;    // debug breakpoint\n        }\n\n        String level = isolationLevels.get(Integer.valueOf(isolation));\n        if (StringUtil.isEmpty(level)) {\n            return DEFAULT_ISOLATION_LEVEL;\n        } else {\n            return level;\n        }\n    }", "signature": "String normalizeIsolation(Operation operation)", "full_signature": "static String normalizeIsolation(Operation operation)", "class_method_signature": "TransactionOperationFinalizer.normalizeIsolation(Operation operation)", "testcase": false, "constructor": false, "invocations": ["getInt", "get", "valueOf", "isEmpty"]}, "repository": {"repo_id": 2550825, "url": "https://github.com/spring-projects/spring-insight-plugins", "language": "Java", "is_fork": false, "fork_count": 24, "stargazer_count": 55, "size": 6372, "license": "licensed"}}