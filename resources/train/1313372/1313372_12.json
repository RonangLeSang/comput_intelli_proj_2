{"test_class": {"identifier": "AlbumMediaNotificationManagerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final ComponentInstLight componentInstance = new ComponentInstLight();", "modifier": "private static final", "type": "ComponentInstLight", "declarator": "componentInstance = new ComponentInstLight()", "var_name": "componentInstance"}, {"original_string": "private static final ComponentInstLight otherComponentInstance = new ComponentInstLight();", "modifier": "private static final", "type": "ComponentInstLight", "declarator": "otherComponentInstance = new ComponentInstLight()", "var_name": "otherComponentInstance"}, {"original_string": "private static final AlbumDetail albumDetail1 = new AlbumDetail(new NodeDetail());", "modifier": "private static final", "type": "AlbumDetail", "declarator": "albumDetail1 = new AlbumDetail(new NodeDetail())", "var_name": "albumDetail1"}, {"original_string": "private static final AlbumDetail albumDetail2 = new AlbumDetail(new NodeDetail());", "modifier": "private static final", "type": "AlbumDetail", "declarator": "albumDetail2 = new AlbumDetail(new NodeDetail())", "var_name": "albumDetail2"}, {"original_string": "private static final AlbumDetail albumDetail3 = new AlbumDetail(new NodeDetail());", "modifier": "private static final", "type": "AlbumDetail", "declarator": "albumDetail3 = new AlbumDetail(new NodeDetail())", "var_name": "albumDetail3"}, {"original_string": "private static final User senderX = mock(User.class);", "modifier": "private static final", "type": "User", "declarator": "senderX = mock(User.class)", "var_name": "senderX"}, {"original_string": "private static final User senderY = mock(User.class);", "modifier": "private static final", "type": "User", "declarator": "senderY = mock(User.class)", "var_name": "senderY"}, {"original_string": "@RegisterExtension\n  static SettingBundleStub gallerySettings = new SettingBundleStub(\n      \"org.silverpeas.gallery.settings.gallerySettings\");", "modifier": "@RegisterExtension\n  static", "type": "SettingBundleStub", "declarator": "gallerySettings = new SettingBundleStub(\n      \"org.silverpeas.gallery.settings.gallerySettings\")", "var_name": "gallerySettings"}, {"original_string": "@TestManagedMock\n  private Scheduler scheduler;", "modifier": "@TestManagedMock\n  private", "type": "Scheduler", "declarator": "scheduler", "var_name": "scheduler"}, {"original_string": "@TestManagedMock\n  private UserNotificationManager userNotificationManager;", "modifier": "@TestManagedMock\n  private", "type": "UserNotificationManager", "declarator": "userNotificationManager", "var_name": "userNotificationManager"}, {"original_string": "@TestManagedBean\n  private UserNotificationHelper userNotificationHelper;", "modifier": "@TestManagedBean\n  private", "type": "UserNotificationHelper", "declarator": "userNotificationHelper", "var_name": "userNotificationHelper"}, {"original_string": "@TestedBean\n  private AlbumMediaNotificationManager testedManager;", "modifier": "@TestedBean\n  private", "type": "AlbumMediaNotificationManager", "declarator": "testedManager", "var_name": "testedManager"}, {"original_string": "private AlbumMedia albumMediaA;", "modifier": "private", "type": "AlbumMedia", "declarator": "albumMediaA", "var_name": "albumMediaA"}, {"original_string": "private AlbumMedia albumMediaB;", "modifier": "private", "type": "AlbumMedia", "declarator": "albumMediaB", "var_name": "albumMediaB"}, {"original_string": "private AlbumMedia albumMediaC;", "modifier": "private", "type": "AlbumMedia", "declarator": "albumMediaC", "var_name": "albumMediaC"}, {"original_string": "private AlbumMedia albumMediaD;", "modifier": "private", "type": "AlbumMedia", "declarator": "albumMediaD", "var_name": "albumMediaD"}], "file": "gallery/gallery-library/src/test/java/org/silverpeas/components/gallery/notification/user/AlbumMediaNotificationManagerTest.java"}, "test_case": {"identifier": "putCreation", "parameters": "()", "modifiers": "@Test", "return": "void", "body": "@Test\n  void putCreation() throws Exception {\n    testedManager.putCreationOf(albumMediaA, senderX);\n    assertThat(getContextCache().size(), is(0));\n    verify(scheduler, times(0)).unscheduleJob(anyString());\n    verify(scheduler, times(0)).scheduleJob(any(NotificationAlbumJob.class), any(JobTrigger.class));\n    final ArgumentCaptor<GalleryAlbumMediaSubscriptionNotificationBuilder> captor = forClass(\n        GalleryAlbumMediaSubscriptionNotificationBuilder.class);\n    verify(userNotificationManager, times(1)).buildAndSend(captor.capture());\n    final GalleryAlbumMediaSubscriptionNotificationBuilder builder = captor.getValue();\n    assertUserNotificationBuilder(builder, albumDetail1);\n  }", "signature": "void putCreation()", "full_signature": "@Test void putCreation()", "class_method_signature": "AlbumMediaNotificationManagerTest.putCreation()", "testcase": true, "constructor": false, "invocations": ["putCreationOf", "assertThat", "size", "getContextCache", "is", "unscheduleJob", "verify", "times", "anyString", "scheduleJob", "verify", "times", "any", "any", "forClass", "buildAndSend", "verify", "times", "capture", "getValue", "assertUserNotificationBuilder"]}, "focal_class": {"identifier": "AlbumMediaNotificationManager", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final ConcurrentMap<String, NotificationAlbumJob> contextCache =\n      new ConcurrentHashMap<>();", "modifier": "private static final", "type": "ConcurrentMap<String, NotificationAlbumJob>", "declarator": "contextCache =\n      new ConcurrentHashMap<>()", "var_name": "contextCache"}], "methods": [{"identifier": "AlbumMediaNotificationManager", "parameters": "()", "modifiers": "", "return": "", "signature": " AlbumMediaNotificationManager()", "full_signature": "  AlbumMediaNotificationManager()", "class_method_signature": "AlbumMediaNotificationManager.AlbumMediaNotificationManager()", "testcase": false, "constructor": true}, {"identifier": "buildKey", "parameters": "(final User user, final AlbumMedia albumMedia)", "modifiers": "private static", "return": "String", "signature": "String buildKey(final User user, final AlbumMedia albumMedia)", "full_signature": "private static String buildKey(final User user, final AlbumMedia albumMedia)", "class_method_signature": "AlbumMediaNotificationManager.buildKey(final User user, final AlbumMedia albumMedia)", "testcase": false, "constructor": false}, {"identifier": "buildKey", "parameters": "(final User user, final String instanceId, String albumId)", "modifiers": "private static", "return": "String", "signature": "String buildKey(final User user, final String instanceId, String albumId)", "full_signature": "private static String buildKey(final User user, final String instanceId, String albumId)", "class_method_signature": "AlbumMediaNotificationManager.buildKey(final User user, final String instanceId, String albumId)", "testcase": false, "constructor": false}, {"identifier": "get", "parameters": "()", "modifiers": "public static", "return": "AlbumMediaNotificationManager", "signature": "AlbumMediaNotificationManager get()", "full_signature": "public static AlbumMediaNotificationManager get()", "class_method_signature": "AlbumMediaNotificationManager.get()", "testcase": false, "constructor": false}, {"identifier": "putCreationOf", "parameters": "(final AlbumMedia albumMedia, final User by)", "modifiers": "public", "return": "void", "signature": "void putCreationOf(final AlbumMedia albumMedia, final User by)", "full_signature": "public void putCreationOf(final AlbumMedia albumMedia, final User by)", "class_method_signature": "AlbumMediaNotificationManager.putCreationOf(final AlbumMedia albumMedia, final User by)", "testcase": false, "constructor": false}, {"identifier": "putDeletionOf", "parameters": "(final AlbumMedia albumMedia, final User by)", "modifiers": "public", "return": "void", "signature": "void putDeletionOf(final AlbumMedia albumMedia, final User by)", "full_signature": "public void putDeletionOf(final AlbumMedia albumMedia, final User by)", "class_method_signature": "AlbumMediaNotificationManager.putDeletionOf(final AlbumMedia albumMedia, final User by)", "testcase": false, "constructor": false}, {"identifier": "getNotificationAlbumJob", "parameters": "(final User user,\n      final AlbumMedia albumMedia)", "modifiers": "private", "return": "NotificationAlbumJob", "signature": "NotificationAlbumJob getNotificationAlbumJob(final User user,\n      final AlbumMedia albumMedia)", "full_signature": "private NotificationAlbumJob getNotificationAlbumJob(final User user,\n      final AlbumMedia albumMedia)", "class_method_signature": "AlbumMediaNotificationManager.getNotificationAlbumJob(final User user,\n      final AlbumMedia albumMedia)", "testcase": false, "constructor": false}], "file": "gallery/gallery-library/src/main/java/org/silverpeas/components/gallery/notification/user/AlbumMediaNotificationManager.java"}, "focal_method": {"identifier": "putCreationOf", "parameters": "(final AlbumMedia albumMedia, final User by)", "modifiers": "public", "return": "void", "body": "public void putCreationOf(final AlbumMedia albumMedia, final User by) {\n    final NotificationAlbumJob job = getNotificationAlbumJob(by, albumMedia);\n    job.registerCreation(albumMedia.getMedia());\n  }", "signature": "void putCreationOf(final AlbumMedia albumMedia, final User by)", "full_signature": "public void putCreationOf(final AlbumMedia albumMedia, final User by)", "class_method_signature": "AlbumMediaNotificationManager.putCreationOf(final AlbumMedia albumMedia, final User by)", "testcase": false, "constructor": false, "invocations": ["getNotificationAlbumJob", "registerCreation", "getMedia"]}, "repository": {"repo_id": 1313372, "url": "https://github.com/Silverpeas/Silverpeas-Components", "language": "Java", "is_fork": false, "fork_count": 23, "stargazer_count": 19, "size": 60227, "license": "licensed"}}