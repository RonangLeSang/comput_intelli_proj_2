{"test_class": {"identifier": "ODataJPAResponseBuilderTest", "superclass": "extends JPAEdmTestModelView", "interfaces": "", "fields": [], "file": "com.sap.core.odata.processor.core/src/test/java/com/sap/core/odata/processor/core/jpa/ODataJPAResponseBuilderTest.java"}, "test_case": {"identifier": "testBuildListOfTGetEntitySetUriInfoStringODataJPAContext", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testBuildListOfTGetEntitySetUriInfoStringODataJPAContext() {\n    try {\n      assertNotNull(ODataJPAResponseBuilder.build(getJPAEntities(),\n          getResultsView(), \"application/xml\", getODataJPAContext()));\n    } catch (ODataJPARuntimeException e) {\n      fail(ODataJPATestConstants.EXCEPTION_MSG_PART_1 + e.getMessage()\n          + ODataJPATestConstants.EXCEPTION_MSG_PART_2);\n    }\n\n  }", "signature": "void testBuildListOfTGetEntitySetUriInfoStringODataJPAContext()", "full_signature": "@Test public void testBuildListOfTGetEntitySetUriInfoStringODataJPAContext()", "class_method_signature": "ODataJPAResponseBuilderTest.testBuildListOfTGetEntitySetUriInfoStringODataJPAContext()", "testcase": true, "constructor": false, "invocations": ["assertNotNull", "build", "getJPAEntities", "getResultsView", "getODataJPAContext", "fail", "getMessage"]}, "focal_class": {"identifier": "ODataJPAResponseBuilder", "superclass": "", "interfaces": "", "fields": [], "methods": [{"identifier": "build", "parameters": "(final List<T> jpaEntities,\n      final GetEntitySetUriInfo resultsView, final String contentType,\n      final ODataJPAContext odataJPAContext)", "modifiers": "public static", "return": "ODataResponse", "signature": "ODataResponse build(final List<T> jpaEntities,\n      final GetEntitySetUriInfo resultsView, final String contentType,\n      final ODataJPAContext odataJPAContext)", "full_signature": "public static ODataResponse build(final List<T> jpaEntities,\n      final GetEntitySetUriInfo resultsView, final String contentType,\n      final ODataJPAContext odataJPAContext)", "class_method_signature": "ODataJPAResponseBuilder.build(final List<T> jpaEntities,\n      final GetEntitySetUriInfo resultsView, final String contentType,\n      final ODataJPAContext odataJPAContext)", "testcase": false, "constructor": false}, {"identifier": "build", "parameters": "(final Object jpaEntity,\n      final GetEntityUriInfo resultsView, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "modifiers": "public static", "return": "ODataResponse", "signature": "ODataResponse build(final Object jpaEntity,\n      final GetEntityUriInfo resultsView, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "full_signature": "public static ODataResponse build(final Object jpaEntity,\n      final GetEntityUriInfo resultsView, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "class_method_signature": "ODataJPAResponseBuilder.build(final Object jpaEntity,\n      final GetEntityUriInfo resultsView, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "testcase": false, "constructor": false}, {"identifier": "build", "parameters": "(final long jpaEntityCount,\n      final ODataJPAContext oDataJPAContext)", "modifiers": "public static", "return": "ODataResponse", "signature": "ODataResponse build(final long jpaEntityCount,\n      final ODataJPAContext oDataJPAContext)", "full_signature": "public static ODataResponse build(final long jpaEntityCount,\n      final ODataJPAContext oDataJPAContext)", "class_method_signature": "ODataJPAResponseBuilder.build(final long jpaEntityCount,\n      final ODataJPAContext oDataJPAContext)", "testcase": false, "constructor": false}, {"identifier": "build", "parameters": "(final List<Object> createdObjectList,\n      final PostUriInfo uriInfo, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "modifiers": "@SuppressWarnings(\"unchecked\") public static", "return": "ODataResponse", "signature": "ODataResponse build(final List<Object> createdObjectList,\n      final PostUriInfo uriInfo, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "full_signature": "@SuppressWarnings(\"unchecked\") public static ODataResponse build(final List<Object> createdObjectList,\n      final PostUriInfo uriInfo, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "class_method_signature": "ODataJPAResponseBuilder.build(final List<Object> createdObjectList,\n      final PostUriInfo uriInfo, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "testcase": false, "constructor": false}, {"identifier": "build", "parameters": "(final Object updatedObject,\n      final PutMergePatchUriInfo putUriInfo)", "modifiers": "public static", "return": "ODataResponse", "signature": "ODataResponse build(final Object updatedObject,\n      final PutMergePatchUriInfo putUriInfo)", "full_signature": "public static ODataResponse build(final Object updatedObject,\n      final PutMergePatchUriInfo putUriInfo)", "class_method_signature": "ODataJPAResponseBuilder.build(final Object updatedObject,\n      final PutMergePatchUriInfo putUriInfo)", "testcase": false, "constructor": false}, {"identifier": "build", "parameters": "(final Object deletedObject,\n      final DeleteUriInfo deleteUriInfo)", "modifiers": "public static", "return": "ODataResponse", "signature": "ODataResponse build(final Object deletedObject,\n      final DeleteUriInfo deleteUriInfo)", "full_signature": "public static ODataResponse build(final Object deletedObject,\n      final DeleteUriInfo deleteUriInfo)", "class_method_signature": "ODataJPAResponseBuilder.build(final Object deletedObject,\n      final DeleteUriInfo deleteUriInfo)", "testcase": false, "constructor": false}, {"identifier": "build", "parameters": "(final Object result,\n      final GetFunctionImportUriInfo resultsView)", "modifiers": "public static", "return": "ODataResponse", "signature": "ODataResponse build(final Object result,\n      final GetFunctionImportUriInfo resultsView)", "full_signature": "public static ODataResponse build(final Object result,\n      final GetFunctionImportUriInfo resultsView)", "class_method_signature": "ODataJPAResponseBuilder.build(final Object result,\n      final GetFunctionImportUriInfo resultsView)", "testcase": false, "constructor": false}, {"identifier": "build", "parameters": "(final List<Object> resultList,\n      final GetFunctionImportUriInfo resultsView, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "modifiers": "public static", "return": "ODataResponse", "signature": "ODataResponse build(final List<Object> resultList,\n      final GetFunctionImportUriInfo resultsView, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "full_signature": "public static ODataResponse build(final List<Object> resultList,\n      final GetFunctionImportUriInfo resultsView, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "class_method_signature": "ODataJPAResponseBuilder.build(final List<Object> resultList,\n      final GetFunctionImportUriInfo resultsView, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "testcase": false, "constructor": false}, {"identifier": "build", "parameters": "(final Object jpaEntity,\n      final GetEntityLinkUriInfo resultsView, final String contentType, final ODataJPAContext oDataJPAContext)", "modifiers": "public static", "return": "ODataResponse", "signature": "ODataResponse build(final Object jpaEntity,\n      final GetEntityLinkUriInfo resultsView, final String contentType, final ODataJPAContext oDataJPAContext)", "full_signature": "public static ODataResponse build(final Object jpaEntity,\n      final GetEntityLinkUriInfo resultsView, final String contentType, final ODataJPAContext oDataJPAContext)", "class_method_signature": "ODataJPAResponseBuilder.build(final Object jpaEntity,\n      final GetEntityLinkUriInfo resultsView, final String contentType, final ODataJPAContext oDataJPAContext)", "testcase": false, "constructor": false}, {"identifier": "build", "parameters": "(final List<T> jpaEntities,\n      final GetEntitySetLinksUriInfo resultsView, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "modifiers": "public static", "return": "ODataResponse", "signature": "ODataResponse build(final List<T> jpaEntities,\n      final GetEntitySetLinksUriInfo resultsView, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "full_signature": "public static ODataResponse build(final List<T> jpaEntities,\n      final GetEntitySetLinksUriInfo resultsView, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "class_method_signature": "ODataJPAResponseBuilder.build(final List<T> jpaEntities,\n      final GetEntitySetLinksUriInfo resultsView, final String contentType,\n      final ODataJPAContext oDataJPAContext)", "testcase": false, "constructor": false}, {"identifier": "getInlineCountForNonFilterQueryLinks", "parameters": "(final List<Map<String, Object>> edmEntityList, final GetEntitySetLinksUriInfo resultsView)", "modifiers": "private static", "return": "Integer", "signature": "Integer getInlineCountForNonFilterQueryLinks(final List<Map<String, Object>> edmEntityList, final GetEntitySetLinksUriInfo resultsView)", "full_signature": "private static Integer getInlineCountForNonFilterQueryLinks(final List<Map<String, Object>> edmEntityList, final GetEntitySetLinksUriInfo resultsView)", "class_method_signature": "ODataJPAResponseBuilder.getInlineCountForNonFilterQueryLinks(final List<Map<String, Object>> edmEntityList, final GetEntitySetLinksUriInfo resultsView)", "testcase": false, "constructor": false}, {"identifier": "getEntityProviderProperties", "parameters": "(\n      final ODataJPAContext odataJPAContext, final GetEntitySetUriInfo resultsView,\n      final List<Map<String, Object>> edmEntityList)", "modifiers": "private static", "return": "EntityProviderWriteProperties", "signature": "EntityProviderWriteProperties getEntityProviderProperties(\n      final ODataJPAContext odataJPAContext, final GetEntitySetUriInfo resultsView,\n      final List<Map<String, Object>> edmEntityList)", "full_signature": "private static EntityProviderWriteProperties getEntityProviderProperties(\n      final ODataJPAContext odataJPAContext, final GetEntitySetUriInfo resultsView,\n      final List<Map<String, Object>> edmEntityList)", "class_method_signature": "ODataJPAResponseBuilder.getEntityProviderProperties(\n      final ODataJPAContext odataJPAContext, final GetEntitySetUriInfo resultsView,\n      final List<Map<String, Object>> edmEntityList)", "testcase": false, "constructor": false}, {"identifier": "getInlineCountForNonFilterQueryEntitySet", "parameters": "(final List<Map<String, Object>> edmEntityList, final GetEntitySetUriInfo resultsView)", "modifiers": "private static", "return": "Integer", "signature": "Integer getInlineCountForNonFilterQueryEntitySet(final List<Map<String, Object>> edmEntityList, final GetEntitySetUriInfo resultsView)", "full_signature": "private static Integer getInlineCountForNonFilterQueryEntitySet(final List<Map<String, Object>> edmEntityList, final GetEntitySetUriInfo resultsView)", "class_method_signature": "ODataJPAResponseBuilder.getInlineCountForNonFilterQueryEntitySet(final List<Map<String, Object>> edmEntityList, final GetEntitySetUriInfo resultsView)", "testcase": false, "constructor": false}, {"identifier": "getEntityProviderProperties", "parameters": "(\n      final ODataJPAContext odataJPAContext, final GetEntityUriInfo resultsView)", "modifiers": "private static", "return": "EntityProviderWriteProperties", "signature": "EntityProviderWriteProperties getEntityProviderProperties(\n      final ODataJPAContext odataJPAContext, final GetEntityUriInfo resultsView)", "full_signature": "private static EntityProviderWriteProperties getEntityProviderProperties(\n      final ODataJPAContext odataJPAContext, final GetEntityUriInfo resultsView)", "class_method_signature": "ODataJPAResponseBuilder.getEntityProviderProperties(\n      final ODataJPAContext odataJPAContext, final GetEntityUriInfo resultsView)", "testcase": false, "constructor": false}, {"identifier": "getEntityProviderPropertiesforPost", "parameters": "(\n      final ODataJPAContext odataJPAContext, final PostUriInfo resultsView, final List<ArrayList<NavigationPropertySegment>> expandList)", "modifiers": "private static", "return": "EntityProviderWriteProperties", "signature": "EntityProviderWriteProperties getEntityProviderPropertiesforPost(\n      final ODataJPAContext odataJPAContext, final PostUriInfo resultsView, final List<ArrayList<NavigationPropertySegment>> expandList)", "full_signature": "private static EntityProviderWriteProperties getEntityProviderPropertiesforPost(\n      final ODataJPAContext odataJPAContext, final PostUriInfo resultsView, final List<ArrayList<NavigationPropertySegment>> expandList)", "class_method_signature": "ODataJPAResponseBuilder.getEntityProviderPropertiesforPost(\n      final ODataJPAContext odataJPAContext, final PostUriInfo resultsView, final List<ArrayList<NavigationPropertySegment>> expandList)", "testcase": false, "constructor": false}, {"identifier": "getExpandList", "parameters": "(final Map<EdmNavigationProperty, EdmEntitySet> navPropEntitySetMap)", "modifiers": "private static", "return": "List<ArrayList<NavigationPropertySegment>>", "signature": "List<ArrayList<NavigationPropertySegment>> getExpandList(final Map<EdmNavigationProperty, EdmEntitySet> navPropEntitySetMap)", "full_signature": "private static List<ArrayList<NavigationPropertySegment>> getExpandList(final Map<EdmNavigationProperty, EdmEntitySet> navPropEntitySetMap)", "class_method_signature": "ODataJPAResponseBuilder.getExpandList(final Map<EdmNavigationProperty, EdmEntitySet> navPropEntitySetMap)", "testcase": false, "constructor": false}, {"identifier": "buildSelectItemList", "parameters": "(\n      final List<SelectItem> selectItems, final EdmEntityType entity)", "modifiers": "private static", "return": "List<EdmProperty>", "signature": "List<EdmProperty> buildSelectItemList(\n      final List<SelectItem> selectItems, final EdmEntityType entity)", "full_signature": "private static List<EdmProperty> buildSelectItemList(\n      final List<SelectItem> selectItems, final EdmEntityType entity)", "class_method_signature": "ODataJPAResponseBuilder.buildSelectItemList(\n      final List<SelectItem> selectItems, final EdmEntityType entity)", "testcase": false, "constructor": false}, {"identifier": "constructListofNavProperty", "parameters": "(\n      final List<ArrayList<NavigationPropertySegment>> expandList)", "modifiers": "private static", "return": "List<EdmNavigationProperty>", "signature": "List<EdmNavigationProperty> constructListofNavProperty(\n      final List<ArrayList<NavigationPropertySegment>> expandList)", "full_signature": "private static List<EdmNavigationProperty> constructListofNavProperty(\n      final List<ArrayList<NavigationPropertySegment>> expandList)", "class_method_signature": "ODataJPAResponseBuilder.constructListofNavProperty(\n      final List<ArrayList<NavigationPropertySegment>> expandList)", "testcase": false, "constructor": false}], "file": "com.sap.core.odata.processor.core/src/main/java/com/sap/core/odata/processor/core/jpa/ODataJPAResponseBuilder.java"}, "focal_method": {"identifier": "build", "parameters": "(final List<T> jpaEntities,\n      final GetEntitySetUriInfo resultsView, final String contentType,\n      final ODataJPAContext odataJPAContext)", "modifiers": "public static", "return": "ODataResponse", "body": "public static <T> ODataResponse build(final List<T> jpaEntities,\n      final GetEntitySetUriInfo resultsView, final String contentType,\n      final ODataJPAContext odataJPAContext) throws ODataJPARuntimeException {\n\n    EdmEntityType edmEntityType = null;\n    ODataResponse odataResponse = null;\n    List<ArrayList<NavigationPropertySegment>> expandList = null;\n\n    try {\n      edmEntityType = resultsView.getTargetEntitySet().getEntityType();\n      List<Map<String, Object>> edmEntityList = new ArrayList<Map<String, Object>>();\n      Map<String, Object> edmPropertyValueMap = null;\n      JPAEntityParser jpaResultParser = new JPAEntityParser();\n      final List<SelectItem> selectedItems = resultsView.getSelect();\n      if (selectedItems != null && selectedItems.size() > 0) {\n        for (Object jpaEntity : jpaEntities) {\n          edmPropertyValueMap = jpaResultParser\n              .parse2EdmPropertyValueMap(\n                  jpaEntity,\n                  buildSelectItemList(selectedItems,\n                      edmEntityType));\n          edmEntityList.add(edmPropertyValueMap);\n        }\n      } else {\n        for (Object jpaEntity : jpaEntities) {\n          edmPropertyValueMap = jpaResultParser\n              .parse2EdmPropertyValueMap(jpaEntity, edmEntityType);\n          edmEntityList.add(edmPropertyValueMap);\n        }\n      }\n      expandList = resultsView.getExpand();\n      if (expandList != null && expandList.size() != 0) {\n        int count = 0;\n        for (Object jpaEntity : jpaEntities) {\n          Map<String, Object> relationShipMap = edmEntityList.get(count);\n          HashMap<String, Object> navigationMap = jpaResultParser.parse2EdmNavigationValueMap(\n              jpaEntity, constructListofNavProperty(expandList));\n          relationShipMap.putAll(navigationMap);\n          count++;\n        }\n      }\n\n      EntityProviderWriteProperties feedProperties = null;\n\n      feedProperties = getEntityProviderProperties(odataJPAContext,\n          resultsView, edmEntityList);\n      odataResponse = EntityProvider.writeFeed(contentType,\n          resultsView.getTargetEntitySet(), edmEntityList,\n          feedProperties);\n      odataResponse = ODataResponse.fromResponse(odataResponse)\n          .status(HttpStatusCodes.OK).build();\n\n    } catch (EntityProviderException e) {\n      throw ODataJPARuntimeException\n          .throwException(ODataJPARuntimeException.GENERAL\n              .addContent(e.getMessage()), e);\n    } catch (EdmException e) {\n      throw ODataJPARuntimeException\n          .throwException(ODataJPARuntimeException.GENERAL\n              .addContent(e.getMessage()), e);\n    }\n\n    return odataResponse;\n  }", "signature": "ODataResponse build(final List<T> jpaEntities,\n      final GetEntitySetUriInfo resultsView, final String contentType,\n      final ODataJPAContext odataJPAContext)", "full_signature": "public static ODataResponse build(final List<T> jpaEntities,\n      final GetEntitySetUriInfo resultsView, final String contentType,\n      final ODataJPAContext odataJPAContext)", "class_method_signature": "ODataJPAResponseBuilder.build(final List<T> jpaEntities,\n      final GetEntitySetUriInfo resultsView, final String contentType,\n      final ODataJPAContext odataJPAContext)", "testcase": false, "constructor": false, "invocations": ["getEntityType", "getTargetEntitySet", "getSelect", "size", "parse2EdmPropertyValueMap", "buildSelectItemList", "add", "parse2EdmPropertyValueMap", "add", "getExpand", "size", "get", "parse2EdmNavigationValueMap", "constructListofNavProperty", "putAll", "getEntityProviderProperties", "writeFeed", "getTargetEntitySet", "build", "status", "fromResponse", "throwException", "addContent", "getMessage", "throwException", "addContent", "getMessage"]}, "repository": {"repo_id": 9327416, "url": "https://github.com/SAP/cloud-odata-java", "language": "Java", "is_fork": false, "fork_count": 18, "stargazer_count": 45, "size": 20455, "license": "licensed"}}