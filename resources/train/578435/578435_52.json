{"test_class": {"identifier": "TestThriftToDynamicProto", "superclass": "", "interfaces": "", "fields": [{"original_string": "@Rule\n  public ExpectedException exception = ExpectedException.none();", "modifier": "@Rule\n  public", "type": "ExpectedException", "declarator": "exception = ExpectedException.none()", "var_name": "exception"}], "file": "core/src/test/java/com/twitter/elephantbird/util/TestThriftToDynamicProto.java"}, "test_case": {"identifier": "testBadThriftTypeForGetFieldDescriptor", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testBadThriftTypeForGetFieldDescriptor() throws DescriptorValidationException {\n    ThriftToDynamicProto<PhoneNumber> converter = new ThriftToDynamicProto<PhoneNumber>(PhoneNumber.class);\n\n    exception.expect(IllegalStateException.class);\n    converter.getFieldDescriptor(Person.class, \"some_field\");\n  }", "signature": "void testBadThriftTypeForGetFieldDescriptor()", "full_signature": "@Test public void testBadThriftTypeForGetFieldDescriptor()", "class_method_signature": "TestThriftToDynamicProto.testBadThriftTypeForGetFieldDescriptor()", "testcase": true, "constructor": false, "invocations": ["expect", "getFieldDescriptor"]}, "focal_class": {"identifier": "ThriftToDynamicProto", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final Logger LOG = LoggerFactory.getLogger(ThriftToDynamicProto.class);", "modifier": "private static final", "type": "Logger", "declarator": "LOG = LoggerFactory.getLogger(ThriftToDynamicProto.class)", "var_name": "LOG"}, {"original_string": "private static final List<Pair<String, Type>> EMPTY_FIELDS = new ArrayList<Pair<String, Type>>();", "modifier": "private static final", "type": "List<Pair<String, Type>>", "declarator": "EMPTY_FIELDS = new ArrayList<Pair<String, Type>>()", "var_name": "EMPTY_FIELDS"}, {"original_string": "private static final String MAP_KEY_FIELD_NAME   = \"key\";", "modifier": "private static final", "type": "String", "declarator": "MAP_KEY_FIELD_NAME   = \"key\"", "var_name": "MAP_KEY_FIELD_NAME"}, {"original_string": "private static final String MAP_VALUE_FIELD_NAME = \"value\";", "modifier": "private static final", "type": "String", "declarator": "MAP_VALUE_FIELD_NAME = \"value\"", "var_name": "MAP_VALUE_FIELD_NAME"}, {"original_string": "private boolean supportNestedObjects = false;", "modifier": "private", "type": "boolean", "declarator": "supportNestedObjects = false", "var_name": "supportNestedObjects"}, {"original_string": "private boolean ignoreUnsupportedTypes = false;", "modifier": "private", "type": "boolean", "declarator": "ignoreUnsupportedTypes = false", "var_name": "ignoreUnsupportedTypes"}, {"original_string": "private final Descriptors.FileDescriptor fileDescriptor;", "modifier": "private final", "type": "Descriptors.FileDescriptor", "declarator": "fileDescriptor", "var_name": "fileDescriptor"}, {"original_string": "private Map<String, DescriptorProtos.DescriptorProto.Builder> descriptorBuilderMap\n      = Maps.newHashMap();", "modifier": "private", "type": "Map<String, DescriptorProtos.DescriptorProto.Builder>", "declarator": "descriptorBuilderMap\n      = Maps.newHashMap()", "var_name": "descriptorBuilderMap"}, {"original_string": "private Map<String, DynamicMessage.Builder> messageBuilderMap = Maps.newHashMap();", "modifier": "private", "type": "Map<String, DynamicMessage.Builder>", "declarator": "messageBuilderMap = Maps.newHashMap()", "var_name": "messageBuilderMap"}], "methods": [{"identifier": "ThriftToDynamicProto", "parameters": "(Class<T> thriftClass)", "modifiers": "public", "return": "", "signature": " ThriftToDynamicProto(Class<T> thriftClass)", "full_signature": "public  ThriftToDynamicProto(Class<T> thriftClass)", "class_method_signature": "ThriftToDynamicProto.ThriftToDynamicProto(Class<T> thriftClass)", "testcase": false, "constructor": true}, {"identifier": "ThriftToDynamicProto", "parameters": "(Class<T> thriftClass,\n                              boolean supportNestedObjects,\n                              boolean ignoreUnsupportedTypes)", "modifiers": "public", "return": "", "signature": " ThriftToDynamicProto(Class<T> thriftClass,\n                              boolean supportNestedObjects,\n                              boolean ignoreUnsupportedTypes)", "full_signature": "public  ThriftToDynamicProto(Class<T> thriftClass,\n                              boolean supportNestedObjects,\n                              boolean ignoreUnsupportedTypes)", "class_method_signature": "ThriftToDynamicProto.ThriftToDynamicProto(Class<T> thriftClass,\n                              boolean supportNestedObjects,\n                              boolean ignoreUnsupportedTypes)", "testcase": false, "constructor": true}, {"identifier": "ThriftToDynamicProto", "parameters": "(Class<T> thriftClass, List<Pair<String, Type>> extraFields)", "modifiers": "public", "return": "", "signature": " ThriftToDynamicProto(Class<T> thriftClass, List<Pair<String, Type>> extraFields)", "full_signature": "public  ThriftToDynamicProto(Class<T> thriftClass, List<Pair<String, Type>> extraFields)", "class_method_signature": "ThriftToDynamicProto.ThriftToDynamicProto(Class<T> thriftClass, List<Pair<String, Type>> extraFields)", "testcase": false, "constructor": true}, {"identifier": "ThriftToDynamicProto", "parameters": "(Class<T> thriftClass,\n                              List<Pair<String, Type>> extraFields,\n                              boolean supportNestedObjects,\n                              boolean ignoreUnsupportedTypes)", "modifiers": "public", "return": "", "signature": " ThriftToDynamicProto(Class<T> thriftClass,\n                              List<Pair<String, Type>> extraFields,\n                              boolean supportNestedObjects,\n                              boolean ignoreUnsupportedTypes)", "full_signature": "public  ThriftToDynamicProto(Class<T> thriftClass,\n                              List<Pair<String, Type>> extraFields,\n                              boolean supportNestedObjects,\n                              boolean ignoreUnsupportedTypes)", "class_method_signature": "ThriftToDynamicProto.ThriftToDynamicProto(Class<T> thriftClass,\n                              List<Pair<String, Type>> extraFields,\n                              boolean supportNestedObjects,\n                              boolean ignoreUnsupportedTypes)", "testcase": false, "constructor": true}, {"identifier": "getBuilder", "parameters": "(Class<? extends TBase<?, ?>> thriftClass)", "modifiers": "public", "return": "Message.Builder", "signature": "Message.Builder getBuilder(Class<? extends TBase<?, ?>> thriftClass)", "full_signature": "public Message.Builder getBuilder(Class<? extends TBase<?, ?>> thriftClass)", "class_method_signature": "ThriftToDynamicProto.getBuilder(Class<? extends TBase<?, ?>> thriftClass)", "testcase": false, "constructor": false}, {"identifier": "mapEntryProtoBuilder", "parameters": "(TStructDescriptor descriptor, Field field)", "modifiers": "private", "return": "Message.Builder", "signature": "Message.Builder mapEntryProtoBuilder(TStructDescriptor descriptor, Field field)", "full_signature": "private Message.Builder mapEntryProtoBuilder(TStructDescriptor descriptor, Field field)", "class_method_signature": "ThriftToDynamicProto.mapEntryProtoBuilder(TStructDescriptor descriptor, Field field)", "testcase": false, "constructor": false}, {"identifier": "thriftToProtoSchema", "parameters": "(DescriptorProtos.DescriptorProto.Builder desBuilder,\n      TStructDescriptor fieldDesc, List<Pair<String, Type>> extraFields)", "modifiers": "private", "return": "void", "signature": "void thriftToProtoSchema(DescriptorProtos.DescriptorProto.Builder desBuilder,\n      TStructDescriptor fieldDesc, List<Pair<String, Type>> extraFields)", "full_signature": "private void thriftToProtoSchema(DescriptorProtos.DescriptorProto.Builder desBuilder,\n      TStructDescriptor fieldDesc, List<Pair<String, Type>> extraFields)", "class_method_signature": "ThriftToDynamicProto.thriftToProtoSchema(DescriptorProtos.DescriptorProto.Builder desBuilder,\n      TStructDescriptor fieldDesc, List<Pair<String, Type>> extraFields)", "testcase": false, "constructor": false}, {"identifier": "doSchemaMapping", "parameters": "(DescriptorProtos.DescriptorProto.Builder desBuilder,\n      TStructDescriptor fieldDesc)", "modifiers": "private", "return": "int", "signature": "int doSchemaMapping(DescriptorProtos.DescriptorProto.Builder desBuilder,\n      TStructDescriptor fieldDesc)", "full_signature": "private int doSchemaMapping(DescriptorProtos.DescriptorProto.Builder desBuilder,\n      TStructDescriptor fieldDesc)", "class_method_signature": "ThriftToDynamicProto.doSchemaMapping(DescriptorProtos.DescriptorProto.Builder desBuilder,\n      TStructDescriptor fieldDesc)", "testcase": false, "constructor": false}, {"identifier": "resolveField", "parameters": "(Field inputField)", "modifiers": "private", "return": "Field", "signature": "Field resolveField(Field inputField)", "full_signature": "private Field resolveField(Field inputField)", "class_method_signature": "ThriftToDynamicProto.resolveField(Field inputField)", "testcase": false, "constructor": false}, {"identifier": "hasNestedObject", "parameters": "(Field field)", "modifiers": "private", "return": "boolean", "signature": "boolean hasNestedObject(Field field)", "full_signature": "private boolean hasNestedObject(Field field)", "class_method_signature": "ThriftToDynamicProto.hasNestedObject(Field field)", "testcase": false, "constructor": false}, {"identifier": "mapDescriptorProtoBuilder", "parameters": "(\n    Field field, String typeName)", "modifiers": "private", "return": "DescriptorProtos.DescriptorProto.Builder", "signature": "DescriptorProtos.DescriptorProto.Builder mapDescriptorProtoBuilder(\n    Field field, String typeName)", "full_signature": "private DescriptorProtos.DescriptorProto.Builder mapDescriptorProtoBuilder(\n    Field field, String typeName)", "class_method_signature": "ThriftToDynamicProto.mapDescriptorProtoBuilder(\n    Field field, String typeName)", "testcase": false, "constructor": false}, {"identifier": "mapKeyProtoBuilder", "parameters": "()", "modifiers": "private", "return": "DescriptorProtos.FieldDescriptorProto.Builder", "signature": "DescriptorProtos.FieldDescriptorProto.Builder mapKeyProtoBuilder()", "full_signature": "private DescriptorProtos.FieldDescriptorProto.Builder mapKeyProtoBuilder()", "class_method_signature": "ThriftToDynamicProto.mapKeyProtoBuilder()", "testcase": false, "constructor": false}, {"identifier": "mapValueProtoBuilder", "parameters": "()", "modifiers": "private", "return": "DescriptorProtos.FieldDescriptorProto.Builder", "signature": "DescriptorProtos.FieldDescriptorProto.Builder mapValueProtoBuilder()", "full_signature": "private DescriptorProtos.FieldDescriptorProto.Builder mapValueProtoBuilder()", "class_method_signature": "ThriftToDynamicProto.mapValueProtoBuilder()", "testcase": false, "constructor": false}, {"identifier": "setBuilderTypeFromField", "parameters": "(\n      Field field,\n      DescriptorProtos.FieldDescriptorProto.Builder builder\n   )", "modifiers": "private", "return": "void", "signature": "void setBuilderTypeFromField(\n      Field field,\n      DescriptorProtos.FieldDescriptorProto.Builder builder\n   )", "full_signature": "private void setBuilderTypeFromField(\n      Field field,\n      DescriptorProtos.FieldDescriptorProto.Builder builder\n   )", "class_method_signature": "ThriftToDynamicProto.setBuilderTypeFromField(\n      Field field,\n      DescriptorProtos.FieldDescriptorProto.Builder builder\n   )", "testcase": false, "constructor": false}, {"identifier": "resolveMessageTypeName", "parameters": "(TStructDescriptor descriptor)", "modifiers": "private", "return": "String", "signature": "String resolveMessageTypeName(TStructDescriptor descriptor)", "full_signature": "private String resolveMessageTypeName(TStructDescriptor descriptor)", "class_method_signature": "ThriftToDynamicProto.resolveMessageTypeName(TStructDescriptor descriptor)", "testcase": false, "constructor": false}, {"identifier": "addProtoField", "parameters": "(DescriptorProtos.DescriptorProto.Builder builder, String name,\n                             int fieldIdx, Type type, boolean isRepeated)", "modifiers": "private", "return": "void", "signature": "void addProtoField(DescriptorProtos.DescriptorProto.Builder builder, String name,\n                             int fieldIdx, Type type, boolean isRepeated)", "full_signature": "private void addProtoField(DescriptorProtos.DescriptorProto.Builder builder, String name,\n                             int fieldIdx, Type type, boolean isRepeated)", "class_method_signature": "ThriftToDynamicProto.addProtoField(DescriptorProtos.DescriptorProto.Builder builder, String name,\n                             int fieldIdx, Type type, boolean isRepeated)", "testcase": false, "constructor": false}, {"identifier": "addProtoField", "parameters": "(DescriptorProtos.DescriptorProto.Builder builder, String name,\n                             int fieldIdx, String type, boolean isRepeated)", "modifiers": "private", "return": "void", "signature": "void addProtoField(DescriptorProtos.DescriptorProto.Builder builder, String name,\n                             int fieldIdx, String type, boolean isRepeated)", "full_signature": "private void addProtoField(DescriptorProtos.DescriptorProto.Builder builder, String name,\n                             int fieldIdx, String type, boolean isRepeated)", "class_method_signature": "ThriftToDynamicProto.addProtoField(DescriptorProtos.DescriptorProto.Builder builder, String name,\n                             int fieldIdx, String type, boolean isRepeated)", "testcase": false, "constructor": false}, {"identifier": "fieldDescriptorProtoBuilder", "parameters": "(\n      String name, int fieldIdx)", "modifiers": "private", "return": "DescriptorProtos.FieldDescriptorProto.Builder", "signature": "DescriptorProtos.FieldDescriptorProto.Builder fieldDescriptorProtoBuilder(\n      String name, int fieldIdx)", "full_signature": "private DescriptorProtos.FieldDescriptorProto.Builder fieldDescriptorProtoBuilder(\n      String name, int fieldIdx)", "class_method_signature": "ThriftToDynamicProto.fieldDescriptorProtoBuilder(\n      String name, int fieldIdx)", "testcase": false, "constructor": false}, {"identifier": "convert", "parameters": "(T thriftObj)", "modifiers": "@SuppressWarnings(\"unchecked\") public", "return": "Message", "signature": "Message convert(T thriftObj)", "full_signature": "@SuppressWarnings(\"unchecked\") public Message convert(T thriftObj)", "class_method_signature": "ThriftToDynamicProto.convert(T thriftObj)", "testcase": false, "constructor": false}, {"identifier": "doConvert", "parameters": "(TBase<?, F> thriftObj)", "modifiers": "@SuppressWarnings(\"unchecked\") public", "return": "Message", "signature": "Message doConvert(TBase<?, F> thriftObj)", "full_signature": "@SuppressWarnings(\"unchecked\") public Message doConvert(TBase<?, F> thriftObj)", "class_method_signature": "ThriftToDynamicProto.doConvert(TBase<?, F> thriftObj)", "testcase": false, "constructor": false}, {"identifier": "checkState", "parameters": "(Class<? extends TBase<?, ?>> thriftClass)", "modifiers": "private", "return": "void", "signature": "void checkState(Class<? extends TBase<?, ?>> thriftClass)", "full_signature": "private void checkState(Class<? extends TBase<?, ?>> thriftClass)", "class_method_signature": "ThriftToDynamicProto.checkState(Class<? extends TBase<?, ?>> thriftClass)", "testcase": false, "constructor": false}, {"identifier": "hasBuilder", "parameters": "(Class<? extends TBase<?, ?>> thriftClass)", "modifiers": "private", "return": "boolean", "signature": "boolean hasBuilder(Class<? extends TBase<?, ?>> thriftClass)", "full_signature": "private boolean hasBuilder(Class<? extends TBase<?, ?>> thriftClass)", "class_method_signature": "ThriftToDynamicProto.hasBuilder(Class<? extends TBase<?, ?>> thriftClass)", "testcase": false, "constructor": false}, {"identifier": "sanitizeRawValue", "parameters": "(Object value, Field tField)", "modifiers": "private", "return": "Object", "signature": "Object sanitizeRawValue(Object value, Field tField)", "full_signature": "private Object sanitizeRawValue(Object value, Field tField)", "class_method_signature": "ThriftToDynamicProto.sanitizeRawValue(Object value, Field tField)", "testcase": false, "constructor": false}, {"identifier": "isStructContainer", "parameters": "(Field tField)", "modifiers": "private", "return": "boolean", "signature": "boolean isStructContainer(Field tField)", "full_signature": "private boolean isStructContainer(Field tField)", "class_method_signature": "ThriftToDynamicProto.isStructContainer(Field tField)", "testcase": false, "constructor": false}, {"identifier": "convertField", "parameters": "(TBase<?, ?> thriftObj, Message.Builder builder,\n                           TStructDescriptor fieldDesc, int fieldId, Field tField)", "modifiers": "@SuppressWarnings(\"unchecked\") private", "return": "int", "signature": "int convertField(TBase<?, ?> thriftObj, Message.Builder builder,\n                           TStructDescriptor fieldDesc, int fieldId, Field tField)", "full_signature": "@SuppressWarnings(\"unchecked\") private int convertField(TBase<?, ?> thriftObj, Message.Builder builder,\n                           TStructDescriptor fieldDesc, int fieldId, Field tField)", "class_method_signature": "ThriftToDynamicProto.convertField(TBase<?, ?> thriftObj, Message.Builder builder,\n                           TStructDescriptor fieldDesc, int fieldId, Field tField)", "testcase": false, "constructor": false}, {"identifier": "buildMapEntryMessage", "parameters": "(Message.Builder mapBuilder, Field field,\n                                       Object mapKey, Object mapValue)", "modifiers": "private", "return": "Message", "signature": "Message buildMapEntryMessage(Message.Builder mapBuilder, Field field,\n                                       Object mapKey, Object mapValue)", "full_signature": "private Message buildMapEntryMessage(Message.Builder mapBuilder, Field field,\n                                       Object mapKey, Object mapValue)", "class_method_signature": "ThriftToDynamicProto.buildMapEntryMessage(Message.Builder mapBuilder, Field field,\n                                       Object mapKey, Object mapValue)", "testcase": false, "constructor": false}, {"identifier": "isContainer", "parameters": "(Field field)", "modifiers": "private", "return": "boolean", "signature": "boolean isContainer(Field field)", "full_signature": "private boolean isContainer(Field field)", "class_method_signature": "ThriftToDynamicProto.isContainer(Field field)", "testcase": false, "constructor": false}, {"identifier": "thriftTypeToProtoType", "parameters": "(Field tField)", "modifiers": "private", "return": "Type", "signature": "Type thriftTypeToProtoType(Field tField)", "full_signature": "private Type thriftTypeToProtoType(Field tField)", "class_method_signature": "ThriftToDynamicProto.thriftTypeToProtoType(Field tField)", "testcase": false, "constructor": false}, {"identifier": "protoMessageType", "parameters": "(Class<? extends TBase<?, ?>> thriftClass)", "modifiers": "private", "return": "String", "signature": "String protoMessageType(Class<? extends TBase<?, ?>> thriftClass)", "full_signature": "private String protoMessageType(Class<? extends TBase<?, ?>> thriftClass)", "class_method_signature": "ThriftToDynamicProto.protoMessageType(Class<? extends TBase<?, ?>> thriftClass)", "testcase": false, "constructor": false}, {"identifier": "mapProtoMessageType", "parameters": "(TStructDescriptor descriptor, Field field)", "modifiers": "private", "return": "String", "signature": "String mapProtoMessageType(TStructDescriptor descriptor, Field field)", "full_signature": "private String mapProtoMessageType(TStructDescriptor descriptor, Field field)", "class_method_signature": "ThriftToDynamicProto.mapProtoMessageType(TStructDescriptor descriptor, Field field)", "testcase": false, "constructor": false}, {"identifier": "getFieldDescriptor", "parameters": "(Class<? extends TBase<?, ?>> thriftClass,\n                                            String fieldName)", "modifiers": "public", "return": "FieldDescriptor", "signature": "FieldDescriptor getFieldDescriptor(Class<? extends TBase<?, ?>> thriftClass,\n                                            String fieldName)", "full_signature": "public FieldDescriptor getFieldDescriptor(Class<? extends TBase<?, ?>> thriftClass,\n                                            String fieldName)", "class_method_signature": "ThriftToDynamicProto.getFieldDescriptor(Class<? extends TBase<?, ?>> thriftClass,\n                                            String fieldName)", "testcase": false, "constructor": false}, {"identifier": "getFileDescriptor", "parameters": "()", "modifiers": "public", "return": "Descriptors.FileDescriptor", "signature": "Descriptors.FileDescriptor getFileDescriptor()", "full_signature": "public Descriptors.FileDescriptor getFileDescriptor()", "class_method_signature": "ThriftToDynamicProto.getFileDescriptor()", "testcase": false, "constructor": false}], "file": "core/src/main/java/com/twitter/elephantbird/util/ThriftToDynamicProto.java"}, "focal_method": {"identifier": "getFieldDescriptor", "parameters": "(Class<? extends TBase<?, ?>> thriftClass,\n                                            String fieldName)", "modifiers": "public", "return": "FieldDescriptor", "body": "public FieldDescriptor getFieldDescriptor(Class<? extends TBase<?, ?>> thriftClass,\n                                            String fieldName) {\n    checkState(thriftClass);\n    Descriptors.Descriptor descriptor = getBuilder(thriftClass).getDescriptorForType();\n    return descriptor.findFieldByName(fieldName);\n  }", "signature": "FieldDescriptor getFieldDescriptor(Class<? extends TBase<?, ?>> thriftClass,\n                                            String fieldName)", "full_signature": "public FieldDescriptor getFieldDescriptor(Class<? extends TBase<?, ?>> thriftClass,\n                                            String fieldName)", "class_method_signature": "ThriftToDynamicProto.getFieldDescriptor(Class<? extends TBase<?, ?>> thriftClass,\n                                            String fieldName)", "testcase": false, "constructor": false, "invocations": ["checkState", "getDescriptorForType", "getBuilder", "findFieldByName"]}, "repository": {"repo_id": 578435, "url": "https://github.com/twitter/elephant-bird", "language": "Java", "is_fork": false, "fork_count": 385, "stargazer_count": 1096, "size": 62266, "license": "licensed"}}