{"test_class": {"identifier": "NycSiriServiceGatewayTest", "superclass": "extends NycSiriServiceGateway", "interfaces": "", "fields": [], "file": "onebusaway-nyc-tdm-adapters/src/test/java/org/onebusaway/nyc/transit_data_manager/siri/NycSiriServiceGatewayTest.java"}, "test_case": {"identifier": "testPostServiceDeliveryActions", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testPostServiceDeliveryActions() throws Exception {\n    MockSiriServicePersister mockPersister = new MockSiriServicePersister();\n    setPersister(mockPersister);\n    mockPersister.put(\"one\",\n        ServiceAlertsTestSupport.createServiceAlertBean(\"MTA NYCT_100\"));\n    SituationExchangeResults result = mock(SituationExchangeResults.class);\n    ServiceDelivery delivery = mock(ServiceDelivery.class);\n    addSubscription();\n    addSubscription();\n\n    handleServiceDeliveries(result, delivery);\n\n    // for (ServiceAlertSubscription s : getActiveServiceAlertSubscriptions())\n    //   verify(s).send(any(List.class), any(Collection.class));\n  }", "signature": "void testPostServiceDeliveryActions()", "full_signature": "@Test public void testPostServiceDeliveryActions()", "class_method_signature": "NycSiriServiceGatewayTest.testPostServiceDeliveryActions()", "testcase": true, "constructor": false, "invocations": ["setPersister", "put", "createServiceAlertBean", "mock", "mock", "addSubscription", "addSubscription", "handleServiceDeliveries"]}, "focal_class": {"identifier": "NycSiriServiceGateway", "superclass": "extends NycSiriService", "interfaces": "", "fields": [{"original_string": "@Autowired\n  private SiriServicePersister _siriServicePersister;", "modifier": "@Autowired\n  private", "type": "SiriServicePersister", "declarator": "_siriServicePersister", "var_name": "_siriServicePersister"}], "methods": [{"identifier": "setupForMode", "parameters": "()", "modifiers": "@Override", "return": "void", "signature": "void setupForMode()", "full_signature": "@Override void setupForMode()", "class_method_signature": "NycSiriServiceGateway.setupForMode()", "testcase": false, "constructor": false}, {"identifier": "addOrUpdateServiceAlert", "parameters": "(SituationExchangeResults result,\n      DeliveryResult deliveryResult, ServiceAlertBean serviceAlertBean,\n      String defaultAgencyId)", "modifiers": "@Override", "return": "void", "signature": "void addOrUpdateServiceAlert(SituationExchangeResults result,\n      DeliveryResult deliveryResult, ServiceAlertBean serviceAlertBean,\n      String defaultAgencyId)", "full_signature": "@Override void addOrUpdateServiceAlert(SituationExchangeResults result,\n      DeliveryResult deliveryResult, ServiceAlertBean serviceAlertBean,\n      String defaultAgencyId)", "class_method_signature": "NycSiriServiceGateway.addOrUpdateServiceAlert(SituationExchangeResults result,\n      DeliveryResult deliveryResult, ServiceAlertBean serviceAlertBean,\n      String defaultAgencyId)", "testcase": false, "constructor": false}, {"identifier": "removeServiceAlert", "parameters": "(SituationExchangeResults result,\n      DeliveryResult deliveryResult, String serviceAlertId)", "modifiers": "", "return": "void", "signature": "void removeServiceAlert(SituationExchangeResults result,\n      DeliveryResult deliveryResult, String serviceAlertId)", "full_signature": " void removeServiceAlert(SituationExchangeResults result,\n      DeliveryResult deliveryResult, String serviceAlertId)", "class_method_signature": "NycSiriServiceGateway.removeServiceAlert(SituationExchangeResults result,\n      DeliveryResult deliveryResult, String serviceAlertId)", "testcase": false, "constructor": false}, {"identifier": "getExistingAlertIds", "parameters": "(Set<String> agencies)", "modifiers": "", "return": "List<String>", "signature": "List<String> getExistingAlertIds(Set<String> agencies)", "full_signature": " List<String> getExistingAlertIds(Set<String> agencies)", "class_method_signature": "NycSiriServiceGateway.getExistingAlertIds(Set<String> agencies)", "testcase": false, "constructor": false}, {"identifier": "postServiceDeliveryActions", "parameters": "(SituationExchangeResults results,\n      Collection<String> deletedIds)", "modifiers": "@Override", "return": "void", "signature": "void postServiceDeliveryActions(SituationExchangeResults results,\n      Collection<String> deletedIds)", "full_signature": "@Override void postServiceDeliveryActions(SituationExchangeResults results,\n      Collection<String> deletedIds)", "class_method_signature": "NycSiriServiceGateway.postServiceDeliveryActions(SituationExchangeResults results,\n      Collection<String> deletedIds)", "testcase": false, "constructor": false}, {"identifier": "addSubscription", "parameters": "(ServiceAlertSubscription subscription)", "modifiers": "", "return": "void", "signature": "void addSubscription(ServiceAlertSubscription subscription)", "full_signature": " void addSubscription(ServiceAlertSubscription subscription)", "class_method_signature": "NycSiriServiceGateway.addSubscription(ServiceAlertSubscription subscription)", "testcase": false, "constructor": false}, {"identifier": "getActiveServiceAlertSubscriptions", "parameters": "()", "modifiers": "public", "return": "List<ServiceAlertSubscription>", "signature": "List<ServiceAlertSubscription> getActiveServiceAlertSubscriptions()", "full_signature": "public List<ServiceAlertSubscription> getActiveServiceAlertSubscriptions()", "class_method_signature": "NycSiriServiceGateway.getActiveServiceAlertSubscriptions()", "testcase": false, "constructor": false}, {"identifier": "getPersister", "parameters": "()", "modifiers": "public", "return": "SiriServicePersister", "signature": "SiriServicePersister getPersister()", "full_signature": "public SiriServicePersister getPersister()", "class_method_signature": "NycSiriServiceGateway.getPersister()", "testcase": false, "constructor": false}, {"identifier": "setPersister", "parameters": "(SiriServicePersister _siriServicePersister)", "modifiers": "public", "return": "void", "signature": "void setPersister(SiriServicePersister _siriServicePersister)", "full_signature": "public void setPersister(SiriServicePersister _siriServicePersister)", "class_method_signature": "NycSiriServiceGateway.setPersister(SiriServicePersister _siriServicePersister)", "testcase": false, "constructor": false}, {"identifier": "deleteAllServiceAlerts", "parameters": "()", "modifiers": "@Override public", "return": "void", "signature": "void deleteAllServiceAlerts()", "full_signature": "@Override public void deleteAllServiceAlerts()", "class_method_signature": "NycSiriServiceGateway.deleteAllServiceAlerts()", "testcase": false, "constructor": false}], "file": "onebusaway-nyc-tdm-adapters/src/main/java/org/onebusaway/nyc/transit_data_manager/siri/NycSiriServiceGateway.java"}, "focal_method": {"identifier": "postServiceDeliveryActions", "parameters": "(SituationExchangeResults results,\n      Collection<String> deletedIds)", "modifiers": "@Override", "return": "void", "body": "@Override\n  void postServiceDeliveryActions(SituationExchangeResults results,\n      Collection<String> deletedIds) throws Exception {\n    for (ServiceAlertSubscription subscription : getActiveServiceAlertSubscriptions()) {\n      new Thread(new SubscriptionSender(subscription, deletedIds)).start();\n    }\n  }", "signature": "void postServiceDeliveryActions(SituationExchangeResults results,\n      Collection<String> deletedIds)", "full_signature": "@Override void postServiceDeliveryActions(SituationExchangeResults results,\n      Collection<String> deletedIds)", "class_method_signature": "NycSiriServiceGateway.postServiceDeliveryActions(SituationExchangeResults results,\n      Collection<String> deletedIds)", "testcase": false, "constructor": false, "invocations": ["getActiveServiceAlertSubscriptions", "start"]}, "repository": {"repo_id": 2259237, "url": "https://github.com/camsys/onebusaway-nyc", "stars": 38, "created": "8/24/2011 2:52:13 AM +00:00", "updates": "2019-12-21T00:37:49+00:00", "fork": "False", "license": "licensed"}}