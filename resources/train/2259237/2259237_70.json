{"test_class": {"identifier": "CcLocationReportDaoImplTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private SessionFactory _sessionFactory;", "modifier": "private", "type": "SessionFactory", "declarator": "_sessionFactory", "var_name": "_sessionFactory"}, {"original_string": "private CcLocationReportDaoImpl _dao;", "modifier": "private", "type": "CcLocationReportDaoImpl", "declarator": "_dao", "var_name": "_dao"}], "file": "onebusaway-nyc-report-archive/src/test/java/org/onebusaway/nyc/report_archive/impl/CcLocationReportDaoImplTest.java"}, "test_case": {"identifier": "testConstructor", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n  public void testConstructor() {\n      Transaction t = getSession().beginTransaction();\n      RealtimeEnvelope envelope = new RealtimeEnvelope();\n\t  envelope.setUUID(\"foo\");\n      envelope.setTimeReceived(122345l);\n      CcLocationReport m = new CcLocationReport();\n      envelope.setCcLocationReport(m);\n      m.setRequestId(1205);\n      m.setDataQuality(new SPDataQuality());\n      m.getDataQuality().setQualitativeIndicator(\"4\");\n      m.setDestSignCode(4631l);\n      m.setDirection(new Angle());\n      m.getDirection().setDeg(new BigDecimal(128.77));\n      m.setLatitude(40640760);\n      m.setLongitude(-74018234);\n      m.setManufacturerData(\"VFTP123456789\");\n      m.setOperatorID(new CPTOperatorIden());\n      m.getOperatorID().setOperatorId(0);\n      m.getOperatorID().setDesignator(\"123456\");\n      m.setRequestId(1);\n      m.setRouteID(new SCHRouteIden());\n      m.getRouteID().setRouteId(0);\n      m.getRouteID().setRouteDesignator(\"63\");\n      m.setRunID(new SCHRunIden());\n      m.getRunID().setRunId(0);\n      m.getRunID().setDesignator(\"1\");\n      m.setSpeed((short)36);\n      m.setStatusInfo(0);\n      m.setTimeReported(\"2011-06-22T10:58:10.0-00:00\");\n      m.setVehicle(new CPTVehicleIden());\n      m.getVehicle().setAgencydesignator(\"MTA NYCT\");\n      m.getVehicle().setAgencyId(2008l);\n      m.getVehicle().setVehicleId(2560);\n      m.setLocalCcLocationReport(new tcip_3_0_5_local.CcLocationReport());\n      m.getLocalCcLocationReport().setNMEA(new NMEA());\n      m.getLocalCcLocationReport().getNMEA().getSentence().add(\"$GPRMC,105850.00,A,4038.445646,N,07401.094043,W,002.642,128.77,220611,,,A*7C\");\n      m.getLocalCcLocationReport().getNMEA().getSentence().add(\"$GPGGA,105850.000,4038.44565,N,07401.09404,W,1,09,01.7,+00042.0,M,,M,,*49\");\n      String contents = \"TBD\";\n      CcLocationReportRecord r = new CcLocationReportRecord(envelope, contents, \"-04:00\");\n      assertEquals((int)r.getRequestId(), (int)m.getRequestId());\n      // todo test others\n      for (String s : m.getLocalCcLocationReport().getNMEA().getSentence()) {\n\t  if (s.indexOf(\"$GPGGA\") != -1) {\n\t      assertEquals(s, r.getNmeaSentenceGPGGA());\n\t  } else if (s.indexOf(\"$GPRMC\") != -1) {\n\t      assertEquals(s, r.getNmeaSentenceGPRMC());\n\t  }\n      }\n      t.commit();\n  }", "signature": "void testConstructor()", "full_signature": "@Test public void testConstructor()", "class_method_signature": "CcLocationReportDaoImplTest.testConstructor()", "testcase": true, "constructor": false, "invocations": ["beginTransaction", "getSession", "setUUID", "setTimeReceived", "setCcLocationReport", "setRequestId", "setDataQuality", "setQualitativeIndicator", "getDataQuality", "setDestSignCode", "setDirection", "setDeg", "getDirection", "setLatitude", "setLongitude", "setManufacturerData", "setOperatorID", "setOperatorId", "getOperatorID", "setDesignator", "getOperatorID", "setRequestId", "setRouteID", "setRouteId", "getRouteID", "setRouteDesignator", "getRouteID", "setRunID", "setRunId", "getRunID", "setDesignator", "getRunID", "setSpeed", "setStatusInfo", "setTimeReported", "setVehicle", "setAgencydesignator", "getVehicle", "setAgencyId", "getVehicle", "setVehicleId", "getVehicle", "setLocalCcLocationReport", "setNMEA", "getLocalCcLocationReport", "add", "getSentence", "getNMEA", "getLocalCcLocationReport", "add", "getSentence", "getNMEA", "getLocalCcLocationReport", "assertEquals", "getRequestId", "getRequestId", "getSentence", "getNMEA", "getLocalCcLocationReport", "indexOf", "assertEquals", "getNmeaSentenceGPGGA", "indexOf", "assertEquals", "getNmeaSentenceGPRMC", "commit"]}, "focal_class": {"identifier": "CcLocationReportDaoImpl", "superclass": "", "interfaces": "implements CcLocationReportDao", "fields": [{"original_string": "protected static Logger _log = LoggerFactory\n\t\t\t.getLogger(CcLocationReportDaoImpl.class);", "modifier": "protected static", "type": "Logger", "declarator": "_log = LoggerFactory\n\t\t\t.getLogger(CcLocationReportDaoImpl.class)", "var_name": "_log"}, {"original_string": "private SessionFactory _sessionFactory;", "modifier": "private", "type": "SessionFactory", "declarator": "_sessionFactory", "var_name": "_sessionFactory"}], "methods": [{"identifier": "setSessionFactory", "parameters": "(SessionFactory sessionFactory)", "modifiers": "@Autowired @Qualifier(\"sessionFactory\") public", "return": "void", "signature": "void setSessionFactory(SessionFactory sessionFactory)", "full_signature": "@Autowired @Qualifier(\"sessionFactory\") public void setSessionFactory(SessionFactory sessionFactory)", "class_method_signature": "CcLocationReportDaoImpl.setSessionFactory(SessionFactory sessionFactory)", "testcase": false, "constructor": false}, {"identifier": "getSession", "parameters": "()", "modifiers": "public", "return": "Session", "signature": "Session getSession()", "full_signature": "public Session getSession()", "class_method_signature": "CcLocationReportDaoImpl.getSession()", "testcase": false, "constructor": false}, {"identifier": "saveOrUpdateReport", "parameters": "(CcLocationReportRecord report)", "modifiers": "@Transactional(value=\"transactionManager\", rollbackFor = Throwable.class) @Override public", "return": "void", "signature": "void saveOrUpdateReport(CcLocationReportRecord report)", "full_signature": "@Transactional(value=\"transactionManager\", rollbackFor = Throwable.class) @Override public void saveOrUpdateReport(CcLocationReportRecord report)", "class_method_signature": "CcLocationReportDaoImpl.saveOrUpdateReport(CcLocationReportRecord report)", "testcase": false, "constructor": false}, {"identifier": "saveOrUpdateReports", "parameters": "(CcLocationReportRecord... reports)", "modifiers": "@Transactional(value=\"transactionManager\", rollbackFor = Throwable.class) @Override public", "return": "void", "signature": "void saveOrUpdateReports(CcLocationReportRecord... reports)", "full_signature": "@Transactional(value=\"transactionManager\", rollbackFor = Throwable.class) @Override public void saveOrUpdateReports(CcLocationReportRecord... reports)", "class_method_signature": "CcLocationReportDaoImpl.saveOrUpdateReports(CcLocationReportRecord... reports)", "testcase": false, "constructor": false}, {"identifier": "getNumberOfReports", "parameters": "()", "modifiers": "@SuppressWarnings(\"unchecked\") @Transactional(value=\"transactionManager\", readOnly = true) public", "return": "int", "signature": "int getNumberOfReports()", "full_signature": "@SuppressWarnings(\"unchecked\") @Transactional(value=\"transactionManager\", readOnly = true) public int getNumberOfReports()", "class_method_signature": "CcLocationReportDaoImpl.getNumberOfReports()", "testcase": false, "constructor": false}, {"identifier": "handleException", "parameters": "(String content, Throwable error,\n\t\t\tDate timeReceived)", "modifiers": "@Override @Transactional(value=\"transactionManager\", rollbackFor = Throwable.class, propagation = Propagation.REQUIRES_NEW) public", "return": "void", "signature": "void handleException(String content, Throwable error,\n\t\t\tDate timeReceived)", "full_signature": "@Override @Transactional(value=\"transactionManager\", rollbackFor = Throwable.class, propagation = Propagation.REQUIRES_NEW) public void handleException(String content, Throwable error,\n\t\t\tDate timeReceived)", "class_method_signature": "CcLocationReportDaoImpl.handleException(String content, Throwable error,\n\t\t\tDate timeReceived)", "testcase": false, "constructor": false}], "file": "onebusaway-nyc-report-archive/src/main/java/org/onebusaway/nyc/report_archive/impl/CcLocationReportDaoImpl.java"}, "focal_method": {"identifier": "getSession", "parameters": "()", "modifiers": "public", "return": "Session", "body": "public Session getSession() {\n\t\treturn _sessionFactory.getCurrentSession();\n\t}", "signature": "Session getSession()", "full_signature": "public Session getSession()", "class_method_signature": "CcLocationReportDaoImpl.getSession()", "testcase": false, "constructor": false, "invocations": ["getCurrentSession"]}, "repository": {"repo_id": 2259237, "url": "https://github.com/camsys/onebusaway-nyc", "stars": 38, "created": "8/24/2011 2:52:13 AM +00:00", "updates": "2019-12-21T00:37:49+00:00", "fork": "False", "license": "licensed"}}