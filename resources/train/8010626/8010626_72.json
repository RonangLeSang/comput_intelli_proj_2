{"test_class": {"identifier": "CsvHttpMessageConverterTest", "superclass": "extends AbstractMockitoTest", "interfaces": "", "fields": [{"original_string": "private CsvHttpMessageConverter csvHttpMessageConverter;", "modifier": "private", "type": "CsvHttpMessageConverter", "declarator": "csvHttpMessageConverter", "var_name": "csvHttpMessageConverter"}], "file": "molgenis-web/src/test/java/org/molgenis/web/converter/CsvHttpMessageConverterTest.java"}, "test_case": {"identifier": "testWriteInternal", "parameters": "()", "modifiers": "@Test", "return": "void", "body": "@Test\n  void testWriteInternal() throws IOException {\n    List<String> attrName = asList(\"attr0\", \"attr1\");\n    Entity entity0 = mock(Entity.class);\n    Entity entity1 = mock(Entity.class);\n    EntityCollection entityCollection = mock(EntityCollection.class);\n    when(entityCollection.getAttributeNames()).thenReturn(attrName);\n    when(entityCollection.stream()).thenReturn(Stream.of(entity0, entity1));\n\n    HttpHeaders httpHeaders = mock(HttpHeaders.class);\n    when(httpHeaders.getContentType()).thenReturn(APPLICATION_JSON_UTF8);\n\n    OutputStream outputStream = mock(OutputStream.class);\n    HttpOutputMessage outputMessage = mock(HttpOutputMessage.class);\n    when(outputMessage.getHeaders()).thenReturn(httpHeaders);\n    when(outputMessage.getBody()).thenReturn(outputStream);\n\n    csvHttpMessageConverter.writeInternal(entityCollection, outputMessage);\n    verify(outputStream).close();\n  }", "signature": "void testWriteInternal()", "full_signature": "@Test void testWriteInternal()", "class_method_signature": "CsvHttpMessageConverterTest.testWriteInternal()", "testcase": true, "constructor": false, "invocations": ["asList", "mock", "mock", "mock", "thenReturn", "when", "getAttributeNames", "thenReturn", "when", "stream", "of", "mock", "thenReturn", "when", "getContentType", "mock", "mock", "thenReturn", "when", "getHeaders", "thenReturn", "when", "getBody", "writeInternal", "close", "verify"]}, "focal_class": {"identifier": "CsvHttpMessageConverter", "superclass": "extends BaseHttpMessageConverter<EntityCollection>", "interfaces": "", "fields": [], "methods": [{"identifier": "CsvHttpMessageConverter", "parameters": "()", "modifiers": "public", "return": "", "signature": " CsvHttpMessageConverter()", "full_signature": "public  CsvHttpMessageConverter()", "class_method_signature": "CsvHttpMessageConverter.CsvHttpMessageConverter()", "testcase": false, "constructor": true}, {"identifier": "writeInternal", "parameters": "(EntityCollection entities, HttpOutputMessage outputMessage)", "modifiers": "@Override protected", "return": "void", "signature": "void writeInternal(EntityCollection entities, HttpOutputMessage outputMessage)", "full_signature": "@Override protected void writeInternal(EntityCollection entities, HttpOutputMessage outputMessage)", "class_method_signature": "CsvHttpMessageConverter.writeInternal(EntityCollection entities, HttpOutputMessage outputMessage)", "testcase": false, "constructor": false}, {"identifier": "supports", "parameters": "(Class<?> clazz)", "modifiers": "@Override protected", "return": "boolean", "signature": "boolean supports(Class<?> clazz)", "full_signature": "@Override protected boolean supports(Class<?> clazz)", "class_method_signature": "CsvHttpMessageConverter.supports(Class<?> clazz)", "testcase": false, "constructor": false}, {"identifier": "readInternal", "parameters": "(\n      Class<? extends EntityCollection> clazz, HttpInputMessage inputMessage)", "modifiers": "@Override protected", "return": "EntityCollection", "signature": "EntityCollection readInternal(\n      Class<? extends EntityCollection> clazz, HttpInputMessage inputMessage)", "full_signature": "@Override protected EntityCollection readInternal(\n      Class<? extends EntityCollection> clazz, HttpInputMessage inputMessage)", "class_method_signature": "CsvHttpMessageConverter.readInternal(\n      Class<? extends EntityCollection> clazz, HttpInputMessage inputMessage)", "testcase": false, "constructor": false}], "file": "molgenis-web/src/main/java/org/molgenis/web/converter/CsvHttpMessageConverter.java"}, "focal_method": {"identifier": "writeInternal", "parameters": "(EntityCollection entities, HttpOutputMessage outputMessage)", "modifiers": "@Override protected", "return": "void", "body": "@Override\n  protected void writeInternal(EntityCollection entities, HttpOutputMessage outputMessage)\n      throws IOException {\n    Charset charset = getCharset(outputMessage.getHeaders());\n    try (CsvWriter csvWriter =\n        new CsvWriter(new OutputStreamWriter(outputMessage.getBody(), charset))) {\n      csvWriter.writeAttributeNames(entities.getAttributeNames());\n      csvWriter.add(entities.stream());\n    }\n  }", "signature": "void writeInternal(EntityCollection entities, HttpOutputMessage outputMessage)", "full_signature": "@Override protected void writeInternal(EntityCollection entities, HttpOutputMessage outputMessage)", "class_method_signature": "CsvHttpMessageConverter.writeInternal(EntityCollection entities, HttpOutputMessage outputMessage)", "testcase": false, "constructor": false, "invocations": ["getCharset", "getHeaders", "getBody", "writeAttributeNames", "getAttributeNames", "add", "stream"]}, "repository": {"repo_id": 8010626, "url": "https://github.com/molgenis/molgenis", "language": "Java", "is_fork": false, "fork_count": 96, "stargazer_count": 82, "size": 168771, "license": "licensed"}}