{"test_class": {"identifier": "SourceCodePositionerTest", "superclass": "", "interfaces": "", "fields": [{"original_string": "private static final String SOURCE_CODE = \"abcd\\ndefghi\\n\\njklmn\\nopq\";", "modifier": "private static final", "type": "String", "declarator": "SOURCE_CODE = \"abcd\\ndefghi\\n\\njklmn\\nopq\"", "var_name": "SOURCE_CODE"}], "file": "pmd-core/src/test/java/net/sourceforge/pmd/lang/ast/SourceCodePositionerTest.java"}, "test_case": {"identifier": "testLineNumberFromOffset", "parameters": "()", "modifiers": "@Test public", "return": "void", "body": "@Test\n    public void testLineNumberFromOffset() {\n        SourceCodePositioner positioner = new SourceCodePositioner(SOURCE_CODE);\n\n        int offset;\n\n        offset = SOURCE_CODE.indexOf('a');\n        assertEquals(1, positioner.lineNumberFromOffset(offset));\n        assertEquals(1, positioner.columnFromOffset(1, offset));\n\n        offset = SOURCE_CODE.indexOf('b');\n        assertEquals(1, positioner.lineNumberFromOffset(offset));\n        assertEquals(2, positioner.columnFromOffset(1, offset));\n\n        offset = SOURCE_CODE.indexOf('e');\n        assertEquals(2, positioner.lineNumberFromOffset(offset));\n        assertEquals(2, positioner.columnFromOffset(2, offset));\n\n        offset = SOURCE_CODE.indexOf('q');\n        assertEquals(5, positioner.lineNumberFromOffset(offset));\n        assertEquals(3, positioner.columnFromOffset(5, offset));\n    }", "signature": "void testLineNumberFromOffset()", "full_signature": "@Test public void testLineNumberFromOffset()", "class_method_signature": "SourceCodePositionerTest.testLineNumberFromOffset()", "testcase": true, "constructor": false, "invocations": ["indexOf", "assertEquals", "lineNumberFromOffset", "assertEquals", "columnFromOffset", "indexOf", "assertEquals", "lineNumberFromOffset", "assertEquals", "columnFromOffset", "indexOf", "assertEquals", "lineNumberFromOffset", "assertEquals", "columnFromOffset", "indexOf", "assertEquals", "lineNumberFromOffset", "assertEquals", "columnFromOffset"]}, "focal_class": {"identifier": "SourceCodePositioner", "superclass": "", "interfaces": "", "fields": [{"original_string": "private int[] lineOffsets;", "modifier": "private", "type": "int[]", "declarator": "lineOffsets", "var_name": "lineOffsets"}, {"original_string": "private int sourceCodeLength;", "modifier": "private", "type": "int", "declarator": "sourceCodeLength", "var_name": "sourceCodeLength"}], "methods": [{"identifier": "SourceCodePositioner", "parameters": "(String sourceCode)", "modifiers": "public", "return": "", "signature": " SourceCodePositioner(String sourceCode)", "full_signature": "public  SourceCodePositioner(String sourceCode)", "class_method_signature": "SourceCodePositioner.SourceCodePositioner(String sourceCode)", "testcase": false, "constructor": true}, {"identifier": "analyzeLineOffsets", "parameters": "(String sourceCode)", "modifiers": "private", "return": "void", "signature": "void analyzeLineOffsets(String sourceCode)", "full_signature": "private void analyzeLineOffsets(String sourceCode)", "class_method_signature": "SourceCodePositioner.analyzeLineOffsets(String sourceCode)", "testcase": false, "constructor": false}, {"identifier": "lineNumberFromOffset", "parameters": "(int offset)", "modifiers": "public", "return": "int", "signature": "int lineNumberFromOffset(int offset)", "full_signature": "public int lineNumberFromOffset(int offset)", "class_method_signature": "SourceCodePositioner.lineNumberFromOffset(int offset)", "testcase": false, "constructor": false}, {"identifier": "columnFromOffset", "parameters": "(int lineNumber, int offset)", "modifiers": "public", "return": "int", "signature": "int columnFromOffset(int lineNumber, int offset)", "full_signature": "public int columnFromOffset(int lineNumber, int offset)", "class_method_signature": "SourceCodePositioner.columnFromOffset(int lineNumber, int offset)", "testcase": false, "constructor": false}, {"identifier": "getLastLine", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int getLastLine()", "full_signature": "public int getLastLine()", "class_method_signature": "SourceCodePositioner.getLastLine()", "testcase": false, "constructor": false}, {"identifier": "getLastLineColumn", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int getLastLineColumn()", "full_signature": "public int getLastLineColumn()", "class_method_signature": "SourceCodePositioner.getLastLineColumn()", "testcase": false, "constructor": false}], "file": "pmd-core/src/main/java/net/sourceforge/pmd/lang/ast/SourceCodePositioner.java"}, "focal_method": {"identifier": "lineNumberFromOffset", "parameters": "(int offset)", "modifiers": "public", "return": "int", "body": "public int lineNumberFromOffset(int offset) {\n        int search = Arrays.binarySearch(lineOffsets, offset);\n        int lineNumber;\n        if (search >= 0) {\n            lineNumber = search;\n        } else {\n            int insertionPoint = search;\n            insertionPoint += 1;\n            insertionPoint *= -1;\n            lineNumber = insertionPoint - 1; // take the insertion point one\n            // before\n        }\n        return lineNumber + 1; // 1-based line numbers\n    }", "signature": "int lineNumberFromOffset(int offset)", "full_signature": "public int lineNumberFromOffset(int offset)", "class_method_signature": "SourceCodePositioner.lineNumberFromOffset(int offset)", "testcase": false, "constructor": false, "invocations": ["binarySearch"]}, "repository": {"repo_id": 4992906, "url": "https://github.com/pmd/pmd", "stars": 2677, "created": "7/11/2012 6:03:00 PM +00:00", "updates": "2020-01-27T18:49:43+00:00", "fork": "False", "license": "licensed"}}